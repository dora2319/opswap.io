(self.webpackChunkopswap=self.webpackChunkopswap||[]).push([[882],{31050:function(Le,j,z){"use strict";var B;B={value:!0},B=B=B=j.Xx=B=B=j._w=j.aP=j.KS=B=j.jQ=void 0;const ae=z(31416),m=z(93350),pe=z(17309);j.jQ=64,B=32,j.KS=64,j.aP=32;function V(H){const k=new Float64Array(16);if(H)for(let M=0;M<H.length;M++)k[M]=H[M];return k}const he=new Uint8Array(32);he[0]=9;const Ie=V(),te=V([1]),se=V([30883,4953,19914,30187,55467,16705,2637,112,59544,30585,16505,36039,65139,11119,27886,20995]),le=V([61785,9906,39828,60374,45398,33411,5274,224,53552,61171,33010,6542,64743,22239,55772,9222]),Re=V([54554,36645,11616,51542,42930,38181,51040,26924,56412,64982,57905,49316,21502,52590,14035,8553]),xe=V([26200,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214,26214]),Te=V([41136,18958,6951,50414,58488,44335,6150,12099,55207,15867,153,11085,57099,20417,9344,11139]);function ce(H,k){for(let M=0;M<16;M++)H[M]=k[M]|0}function He(H){let k=1;for(let M=0;M<16;M++){let h=H[M]+k+65535;k=Math.floor(h/65536),H[M]=h-k*65536}H[0]+=k-1+37*(k-1)}function tt(H,k,M){const h=~(M-1);for(let A=0;A<16;A++){const be=h&(H[A]^k[A]);H[A]^=be,k[A]^=be}}function ke(H,k){const M=V(),h=V();for(let A=0;A<16;A++)h[A]=k[A];He(h),He(h),He(h);for(let A=0;A<2;A++){M[0]=h[0]-65517;for(let Fe=1;Fe<15;Fe++)M[Fe]=h[Fe]-65535-(M[Fe-1]>>16&1),M[Fe-1]&=65535;M[15]=h[15]-32767-(M[14]>>16&1);const be=M[15]>>16&1;M[14]&=65535,tt(h,M,1-be)}for(let A=0;A<16;A++)H[2*A]=h[A]&255,H[2*A+1]=h[A]>>8}function Se(H,k){let M=0;for(let h=0;h<32;h++)M|=H[h]^k[h];return(1&M-1>>>8)-1}function ie(H,k){const M=new Uint8Array(32),h=new Uint8Array(32);return ke(M,H),ke(h,k),Se(M,h)}function X(H){const k=new Uint8Array(32);return ke(k,H),k[0]&1}function oe(H,k){for(let M=0;M<16;M++)H[M]=k[2*M]+(k[2*M+1]<<8);H[15]&=32767}function fe(H,k,M){for(let h=0;h<16;h++)H[h]=k[h]+M[h]}function F(H,k,M){for(let h=0;h<16;h++)H[h]=k[h]-M[h]}function Z(H,k,M){let h,A,be=0,Fe=0,Je=0,yt=0,Ze=0,st=0,Ht=0,lr=0,Qt=0,Yt=0,At=0,Ct=0,Tt=0,lt=0,at=0,ft=0,rt=0,Vt=0,Xt=0,or=0,er=0,ar=0,Sr=0,cr=0,Fr=0,gr=0,Hr=0,mi=0,wi=0,ci=0,bi=0,St=M[0],Dt=M[1],Ft=M[2],dt=M[3],jt=M[4],vt=M[5],Nt=M[6],Ot=M[7],Kt=M[8],Mt=M[9],Ut=M[10],pt=M[11],kt=M[12],Gt=M[13],Wt=M[14],Jt=M[15];h=k[0],be+=h*St,Fe+=h*Dt,Je+=h*Ft,yt+=h*dt,Ze+=h*jt,st+=h*vt,Ht+=h*Nt,lr+=h*Ot,Qt+=h*Kt,Yt+=h*Mt,At+=h*Ut,Ct+=h*pt,Tt+=h*kt,lt+=h*Gt,at+=h*Wt,ft+=h*Jt,h=k[1],Fe+=h*St,Je+=h*Dt,yt+=h*Ft,Ze+=h*dt,st+=h*jt,Ht+=h*vt,lr+=h*Nt,Qt+=h*Ot,Yt+=h*Kt,At+=h*Mt,Ct+=h*Ut,Tt+=h*pt,lt+=h*kt,at+=h*Gt,ft+=h*Wt,rt+=h*Jt,h=k[2],Je+=h*St,yt+=h*Dt,Ze+=h*Ft,st+=h*dt,Ht+=h*jt,lr+=h*vt,Qt+=h*Nt,Yt+=h*Ot,At+=h*Kt,Ct+=h*Mt,Tt+=h*Ut,lt+=h*pt,at+=h*kt,ft+=h*Gt,rt+=h*Wt,Vt+=h*Jt,h=k[3],yt+=h*St,Ze+=h*Dt,st+=h*Ft,Ht+=h*dt,lr+=h*jt,Qt+=h*vt,Yt+=h*Nt,At+=h*Ot,Ct+=h*Kt,Tt+=h*Mt,lt+=h*Ut,at+=h*pt,ft+=h*kt,rt+=h*Gt,Vt+=h*Wt,Xt+=h*Jt,h=k[4],Ze+=h*St,st+=h*Dt,Ht+=h*Ft,lr+=h*dt,Qt+=h*jt,Yt+=h*vt,At+=h*Nt,Ct+=h*Ot,Tt+=h*Kt,lt+=h*Mt,at+=h*Ut,ft+=h*pt,rt+=h*kt,Vt+=h*Gt,Xt+=h*Wt,or+=h*Jt,h=k[5],st+=h*St,Ht+=h*Dt,lr+=h*Ft,Qt+=h*dt,Yt+=h*jt,At+=h*vt,Ct+=h*Nt,Tt+=h*Ot,lt+=h*Kt,at+=h*Mt,ft+=h*Ut,rt+=h*pt,Vt+=h*kt,Xt+=h*Gt,or+=h*Wt,er+=h*Jt,h=k[6],Ht+=h*St,lr+=h*Dt,Qt+=h*Ft,Yt+=h*dt,At+=h*jt,Ct+=h*vt,Tt+=h*Nt,lt+=h*Ot,at+=h*Kt,ft+=h*Mt,rt+=h*Ut,Vt+=h*pt,Xt+=h*kt,or+=h*Gt,er+=h*Wt,ar+=h*Jt,h=k[7],lr+=h*St,Qt+=h*Dt,Yt+=h*Ft,At+=h*dt,Ct+=h*jt,Tt+=h*vt,lt+=h*Nt,at+=h*Ot,ft+=h*Kt,rt+=h*Mt,Vt+=h*Ut,Xt+=h*pt,or+=h*kt,er+=h*Gt,ar+=h*Wt,Sr+=h*Jt,h=k[8],Qt+=h*St,Yt+=h*Dt,At+=h*Ft,Ct+=h*dt,Tt+=h*jt,lt+=h*vt,at+=h*Nt,ft+=h*Ot,rt+=h*Kt,Vt+=h*Mt,Xt+=h*Ut,or+=h*pt,er+=h*kt,ar+=h*Gt,Sr+=h*Wt,cr+=h*Jt,h=k[9],Yt+=h*St,At+=h*Dt,Ct+=h*Ft,Tt+=h*dt,lt+=h*jt,at+=h*vt,ft+=h*Nt,rt+=h*Ot,Vt+=h*Kt,Xt+=h*Mt,or+=h*Ut,er+=h*pt,ar+=h*kt,Sr+=h*Gt,cr+=h*Wt,Fr+=h*Jt,h=k[10],At+=h*St,Ct+=h*Dt,Tt+=h*Ft,lt+=h*dt,at+=h*jt,ft+=h*vt,rt+=h*Nt,Vt+=h*Ot,Xt+=h*Kt,or+=h*Mt,er+=h*Ut,ar+=h*pt,Sr+=h*kt,cr+=h*Gt,Fr+=h*Wt,gr+=h*Jt,h=k[11],Ct+=h*St,Tt+=h*Dt,lt+=h*Ft,at+=h*dt,ft+=h*jt,rt+=h*vt,Vt+=h*Nt,Xt+=h*Ot,or+=h*Kt,er+=h*Mt,ar+=h*Ut,Sr+=h*pt,cr+=h*kt,Fr+=h*Gt,gr+=h*Wt,Hr+=h*Jt,h=k[12],Tt+=h*St,lt+=h*Dt,at+=h*Ft,ft+=h*dt,rt+=h*jt,Vt+=h*vt,Xt+=h*Nt,or+=h*Ot,er+=h*Kt,ar+=h*Mt,Sr+=h*Ut,cr+=h*pt,Fr+=h*kt,gr+=h*Gt,Hr+=h*Wt,mi+=h*Jt,h=k[13],lt+=h*St,at+=h*Dt,ft+=h*Ft,rt+=h*dt,Vt+=h*jt,Xt+=h*vt,or+=h*Nt,er+=h*Ot,ar+=h*Kt,Sr+=h*Mt,cr+=h*Ut,Fr+=h*pt,gr+=h*kt,Hr+=h*Gt,mi+=h*Wt,wi+=h*Jt,h=k[14],at+=h*St,ft+=h*Dt,rt+=h*Ft,Vt+=h*dt,Xt+=h*jt,or+=h*vt,er+=h*Nt,ar+=h*Ot,Sr+=h*Kt,cr+=h*Mt,Fr+=h*Ut,gr+=h*pt,Hr+=h*kt,mi+=h*Gt,wi+=h*Wt,ci+=h*Jt,h=k[15],ft+=h*St,rt+=h*Dt,Vt+=h*Ft,Xt+=h*dt,or+=h*jt,er+=h*vt,ar+=h*Nt,Sr+=h*Ot,cr+=h*Kt,Fr+=h*Mt,gr+=h*Ut,Hr+=h*pt,mi+=h*kt,wi+=h*Gt,ci+=h*Wt,bi+=h*Jt,be+=38*rt,Fe+=38*Vt,Je+=38*Xt,yt+=38*or,Ze+=38*er,st+=38*ar,Ht+=38*Sr,lr+=38*cr,Qt+=38*Fr,Yt+=38*gr,At+=38*Hr,Ct+=38*mi,Tt+=38*wi,lt+=38*ci,at+=38*bi,A=1,h=be+A+65535,A=Math.floor(h/65536),be=h-A*65536,h=Fe+A+65535,A=Math.floor(h/65536),Fe=h-A*65536,h=Je+A+65535,A=Math.floor(h/65536),Je=h-A*65536,h=yt+A+65535,A=Math.floor(h/65536),yt=h-A*65536,h=Ze+A+65535,A=Math.floor(h/65536),Ze=h-A*65536,h=st+A+65535,A=Math.floor(h/65536),st=h-A*65536,h=Ht+A+65535,A=Math.floor(h/65536),Ht=h-A*65536,h=lr+A+65535,A=Math.floor(h/65536),lr=h-A*65536,h=Qt+A+65535,A=Math.floor(h/65536),Qt=h-A*65536,h=Yt+A+65535,A=Math.floor(h/65536),Yt=h-A*65536,h=At+A+65535,A=Math.floor(h/65536),At=h-A*65536,h=Ct+A+65535,A=Math.floor(h/65536),Ct=h-A*65536,h=Tt+A+65535,A=Math.floor(h/65536),Tt=h-A*65536,h=lt+A+65535,A=Math.floor(h/65536),lt=h-A*65536,h=at+A+65535,A=Math.floor(h/65536),at=h-A*65536,h=ft+A+65535,A=Math.floor(h/65536),ft=h-A*65536,be+=A-1+37*(A-1),A=1,h=be+A+65535,A=Math.floor(h/65536),be=h-A*65536,h=Fe+A+65535,A=Math.floor(h/65536),Fe=h-A*65536,h=Je+A+65535,A=Math.floor(h/65536),Je=h-A*65536,h=yt+A+65535,A=Math.floor(h/65536),yt=h-A*65536,h=Ze+A+65535,A=Math.floor(h/65536),Ze=h-A*65536,h=st+A+65535,A=Math.floor(h/65536),st=h-A*65536,h=Ht+A+65535,A=Math.floor(h/65536),Ht=h-A*65536,h=lr+A+65535,A=Math.floor(h/65536),lr=h-A*65536,h=Qt+A+65535,A=Math.floor(h/65536),Qt=h-A*65536,h=Yt+A+65535,A=Math.floor(h/65536),Yt=h-A*65536,h=At+A+65535,A=Math.floor(h/65536),At=h-A*65536,h=Ct+A+65535,A=Math.floor(h/65536),Ct=h-A*65536,h=Tt+A+65535,A=Math.floor(h/65536),Tt=h-A*65536,h=lt+A+65535,A=Math.floor(h/65536),lt=h-A*65536,h=at+A+65535,A=Math.floor(h/65536),at=h-A*65536,h=ft+A+65535,A=Math.floor(h/65536),ft=h-A*65536,be+=A-1+37*(A-1),H[0]=be,H[1]=Fe,H[2]=Je,H[3]=yt,H[4]=Ze,H[5]=st,H[6]=Ht,H[7]=lr,H[8]=Qt,H[9]=Yt,H[10]=At,H[11]=Ct,H[12]=Tt,H[13]=lt,H[14]=at,H[15]=ft}function re(H,k){Z(H,k,k)}function ye(H,k){const M=V();let h;for(h=0;h<16;h++)M[h]=k[h];for(h=253;h>=0;h--)re(M,M),h!==2&&h!==4&&Z(M,M,k);for(h=0;h<16;h++)H[h]=M[h]}function d(H,k){const M=V();let h;for(h=0;h<16;h++)M[h]=k[h];for(h=250;h>=0;h--)re(M,M),h!==1&&Z(M,M,k);for(h=0;h<16;h++)H[h]=M[h]}function b(H,k){const M=V(),h=V(),A=V(),be=V(),Fe=V(),Je=V(),yt=V(),Ze=V(),st=V();F(M,H[1],H[0]),F(st,k[1],k[0]),Z(M,M,st),fe(h,H[0],H[1]),fe(st,k[0],k[1]),Z(h,h,st),Z(A,H[3],k[3]),Z(A,A,le),Z(be,H[2],k[2]),fe(be,be,be),F(Fe,h,M),F(Je,be,A),fe(yt,be,A),fe(Ze,h,M),Z(H[0],Fe,Je),Z(H[1],Ze,yt),Z(H[2],yt,Je),Z(H[3],Fe,Ze)}function l(H,k,M){for(let h=0;h<4;h++)tt(H[h],k[h],M)}function p(H,k){const M=V(),h=V(),A=V();ye(A,k[2]),Z(M,k[0],A),Z(h,k[1],A),ke(H,h),H[31]^=X(M)<<7}function f(H,k,M){ce(H[0],Ie),ce(H[1],te),ce(H[2],te),ce(H[3],Ie);for(let h=255;h>=0;--h){const A=M[h/8|0]>>(h&7)&1;l(H,k,A),b(k,H),b(H,H),l(H,k,A)}}function _(H,k){const M=[V(),V(),V(),V()];ce(M[0],Re),ce(M[1],xe),ce(M[2],te),Z(M[3],Re,xe),f(H,M,k)}function O(H){if(H.length!==j.aP)throw new Error(`ed25519: seed must be ${j.aP} bytes`);const k=(0,m.hash)(H);k[0]&=248,k[31]&=127,k[31]|=64;const M=new Uint8Array(32),h=[V(),V(),V(),V()];_(h,k),p(M,h);const A=new Uint8Array(64);return A.set(H),A.set(M,32),{publicKey:M,secretKey:A}}j._w=O;function C(H){const k=(0,ae.randomBytes)(32,H),M=O(k);return(0,pe.wipe)(k),M}B=C;function W(H){if(H.length!==j.KS)throw new Error(`ed25519: secret key must be ${j.KS} bytes`);return new Uint8Array(H.subarray(32))}B=W;const S=new Float64Array([237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16]);function $(H,k){let M,h,A,be;for(h=63;h>=32;--h){for(M=0,A=h-32,be=h-12;A<be;++A)k[A]+=M-16*k[h]*S[A-(h-32)],M=Math.floor((k[A]+128)/256),k[A]-=M*256;k[A]+=M,k[h]=0}for(M=0,A=0;A<32;A++)k[A]+=M-(k[31]>>4)*S[A],M=k[A]>>8,k[A]&=255;for(A=0;A<32;A++)k[A]-=M*S[A];for(h=0;h<32;h++)k[h+1]+=k[h]>>8,H[h]=k[h]&255}function Pe(H){const k=new Float64Array(64);for(let M=0;M<64;M++)k[M]=H[M];for(let M=0;M<64;M++)H[M]=0;$(H,k)}function ue(H,k){const M=new Float64Array(64),h=[V(),V(),V(),V()],A=(0,m.hash)(H.subarray(0,32));A[0]&=248,A[31]&=127,A[31]|=64;const be=new Uint8Array(64);be.set(A.subarray(32),32);const Fe=new m.SHA512;Fe.update(be.subarray(32)),Fe.update(k);const Je=Fe.digest();Fe.clean(),Pe(Je),_(h,Je),p(be,h),Fe.reset(),Fe.update(be.subarray(0,32)),Fe.update(H.subarray(32)),Fe.update(k);const yt=Fe.digest();Pe(yt);for(let Ze=0;Ze<32;Ze++)M[Ze]=Je[Ze];for(let Ze=0;Ze<32;Ze++)for(let st=0;st<32;st++)M[Ze+st]+=yt[Ze]*A[st];return $(be.subarray(32),M),be}j.Xx=ue;function me(H,k){const M=V(),h=V(),A=V(),be=V(),Fe=V(),Je=V(),yt=V();return ce(H[2],te),oe(H[1],k),re(A,H[1]),Z(be,A,se),F(A,A,H[2]),fe(be,H[2],be),re(Fe,be),re(Je,Fe),Z(yt,Je,Fe),Z(M,yt,A),Z(M,M,be),d(M,M),Z(M,M,A),Z(M,M,be),Z(M,M,be),Z(H[0],M,be),re(h,H[0]),Z(h,h,be),ie(h,A)&&Z(H[0],H[0],Te),re(h,H[0]),Z(h,h,be),ie(h,A)?-1:(X(H[0])===k[31]>>7&&F(H[0],Ie,H[0]),Z(H[3],H[0],H[1]),0)}function nt(H,k,M){const h=new Uint8Array(32),A=[V(),V(),V(),V()],be=[V(),V(),V(),V()];if(M.length!==j.jQ)throw new Error(`ed25519: signature must be ${j.jQ} bytes`);if(me(be,H))return!1;const Fe=new m.SHA512;Fe.update(M.subarray(0,32)),Fe.update(H),Fe.update(k);const Je=Fe.digest();return Pe(Je),f(A,be,Je),_(be,M.subarray(32)),b(A,be),p(h,A),!Se(M,h)}B=nt;function sr(H){let k=[V(),V(),V(),V()];if(me(k,H))throw new Error("Ed25519: invalid public key");let M=V(),h=V(),A=k[1];fe(M,te,A),F(h,te,A),ye(h,h),Z(M,M,h);let be=new Uint8Array(32);return ke(be,M),be}B=sr;function ht(H){const k=(0,m.hash)(H.subarray(0,32));k[0]&=248,k[31]&=127,k[31]|=64;const M=new Uint8Array(k.subarray(0,32));return(0,pe.wipe)(k),M}B=ht},93350:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0});var B=z(98099),ae=z(17309);j.DIGEST_LENGTH=64,j.BLOCK_SIZE=128;var m=function(){function Ie(){this.digestLength=j.DIGEST_LENGTH,this.blockSize=j.BLOCK_SIZE,this._stateHi=new Int32Array(8),this._stateLo=new Int32Array(8),this._tempHi=new Int32Array(16),this._tempLo=new Int32Array(16),this._buffer=new Uint8Array(256),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this.reset()}return Ie.prototype._initState=function(){this._stateHi[0]=1779033703,this._stateHi[1]=3144134277,this._stateHi[2]=1013904242,this._stateHi[3]=2773480762,this._stateHi[4]=1359893119,this._stateHi[5]=2600822924,this._stateHi[6]=528734635,this._stateHi[7]=1541459225,this._stateLo[0]=4089235720,this._stateLo[1]=2227873595,this._stateLo[2]=4271175723,this._stateLo[3]=1595750129,this._stateLo[4]=2917565137,this._stateLo[5]=725511199,this._stateLo[6]=4215389547,this._stateLo[7]=327033209},Ie.prototype.reset=function(){return this._initState(),this._bufferLength=0,this._bytesHashed=0,this._finished=!1,this},Ie.prototype.clean=function(){ae.wipe(this._buffer),ae.wipe(this._tempHi),ae.wipe(this._tempLo),this.reset()},Ie.prototype.update=function(te,se){if(se===void 0&&(se=te.length),this._finished)throw new Error("SHA512: can't update because hash was finished.");var le=0;if(this._bytesHashed+=se,this._bufferLength>0){for(;this._bufferLength<j.BLOCK_SIZE&&se>0;)this._buffer[this._bufferLength++]=te[le++],se--;this._bufferLength===this.blockSize&&(V(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,this.blockSize),this._bufferLength=0)}for(se>=this.blockSize&&(le=V(this._tempHi,this._tempLo,this._stateHi,this._stateLo,te,le,se),se%=this.blockSize);se>0;)this._buffer[this._bufferLength++]=te[le++],se--;return this},Ie.prototype.finish=function(te){if(!this._finished){var se=this._bytesHashed,le=this._bufferLength,Re=se/536870912|0,xe=se<<3,Te=se%128<112?128:256;this._buffer[le]=128;for(var ce=le+1;ce<Te-8;ce++)this._buffer[ce]=0;B.writeUint32BE(Re,this._buffer,Te-8),B.writeUint32BE(xe,this._buffer,Te-4),V(this._tempHi,this._tempLo,this._stateHi,this._stateLo,this._buffer,0,Te),this._finished=!0}for(var ce=0;ce<this.digestLength/8;ce++)B.writeUint32BE(this._stateHi[ce],te,ce*8),B.writeUint32BE(this._stateLo[ce],te,ce*8+4);return this},Ie.prototype.digest=function(){var te=new Uint8Array(this.digestLength);return this.finish(te),te},Ie.prototype.saveState=function(){if(this._finished)throw new Error("SHA256: cannot save finished state");return{stateHi:new Int32Array(this._stateHi),stateLo:new Int32Array(this._stateLo),buffer:this._bufferLength>0?new Uint8Array(this._buffer):void 0,bufferLength:this._bufferLength,bytesHashed:this._bytesHashed}},Ie.prototype.restoreState=function(te){return this._stateHi.set(te.stateHi),this._stateLo.set(te.stateLo),this._bufferLength=te.bufferLength,te.buffer&&this._buffer.set(te.buffer),this._bytesHashed=te.bytesHashed,this._finished=!1,this},Ie.prototype.cleanSavedState=function(te){ae.wipe(te.stateHi),ae.wipe(te.stateLo),te.buffer&&ae.wipe(te.buffer),te.bufferLength=0,te.bytesHashed=0},Ie}();j.SHA512=m;var pe=new Int32Array([1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591]);function V(Ie,te,se,le,Re,xe,Te){for(var ce=se[0],He=se[1],tt=se[2],ke=se[3],Se=se[4],ie=se[5],X=se[6],oe=se[7],fe=le[0],F=le[1],Z=le[2],re=le[3],ye=le[4],d=le[5],b=le[6],l=le[7],p,f,_,O,C,W,S,$;Te>=128;){for(var Pe=0;Pe<16;Pe++){var ue=8*Pe+xe;Ie[Pe]=B.readUint32BE(Re,ue),te[Pe]=B.readUint32BE(Re,ue+4)}for(var Pe=0;Pe<80;Pe++){var me=ce,nt=He,sr=tt,ht=ke,H=Se,k=ie,M=X,h=oe,A=fe,be=F,Fe=Z,Je=re,yt=ye,Ze=d,st=b,Ht=l;if(p=oe,f=l,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=(Se>>>14|ye<<32-14)^(Se>>>18|ye<<32-18)^(ye>>>41-32|Se<<32-(41-32)),f=(ye>>>14|Se<<32-14)^(ye>>>18|Se<<32-18)^(Se>>>41-32|ye<<32-(41-32)),C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,p=Se&ie^~Se&X,f=ye&d^~ye&b,C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,p=pe[Pe*2],f=pe[Pe*2+1],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,p=Ie[Pe%16],f=te[Pe%16],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,_=S&65535|$<<16,O=C&65535|W<<16,p=_,f=O,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=(ce>>>28|fe<<32-28)^(fe>>>34-32|ce<<32-(34-32))^(fe>>>39-32|ce<<32-(39-32)),f=(fe>>>28|ce<<32-28)^(ce>>>34-32|fe<<32-(34-32))^(ce>>>39-32|fe<<32-(39-32)),C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,p=ce&He^ce&tt^He&tt,f=fe&F^fe&Z^F&Z,C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,h=S&65535|$<<16,Ht=C&65535|W<<16,p=ht,f=Je,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=_,f=O,C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,ht=S&65535|$<<16,Je=C&65535|W<<16,He=me,tt=nt,ke=sr,Se=ht,ie=H,X=k,oe=M,ce=h,F=A,Z=be,re=Fe,ye=Je,d=yt,b=Ze,l=st,fe=Ht,Pe%16===15)for(var ue=0;ue<16;ue++)p=Ie[ue],f=te[ue],C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=Ie[(ue+9)%16],f=te[(ue+9)%16],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,_=Ie[(ue+1)%16],O=te[(ue+1)%16],p=(_>>>1|O<<32-1)^(_>>>8|O<<32-8)^_>>>7,f=(O>>>1|_<<32-1)^(O>>>8|_<<32-8)^(O>>>7|_<<32-7),C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,_=Ie[(ue+14)%16],O=te[(ue+14)%16],p=(_>>>19|O<<32-19)^(O>>>61-32|_<<32-(61-32))^_>>>6,f=(O>>>19|_<<32-19)^(_>>>61-32|O<<32-(61-32))^(O>>>6|_<<32-6),C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,Ie[ue]=S&65535|$<<16,te[ue]=C&65535|W<<16}p=ce,f=fe,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[0],f=le[0],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[0]=ce=S&65535|$<<16,le[0]=fe=C&65535|W<<16,p=He,f=F,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[1],f=le[1],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[1]=He=S&65535|$<<16,le[1]=F=C&65535|W<<16,p=tt,f=Z,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[2],f=le[2],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[2]=tt=S&65535|$<<16,le[2]=Z=C&65535|W<<16,p=ke,f=re,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[3],f=le[3],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[3]=ke=S&65535|$<<16,le[3]=re=C&65535|W<<16,p=Se,f=ye,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[4],f=le[4],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[4]=Se=S&65535|$<<16,le[4]=ye=C&65535|W<<16,p=ie,f=d,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[5],f=le[5],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[5]=ie=S&65535|$<<16,le[5]=d=C&65535|W<<16,p=X,f=b,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[6],f=le[6],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[6]=X=S&65535|$<<16,le[6]=b=C&65535|W<<16,p=oe,f=l,C=f&65535,W=f>>>16,S=p&65535,$=p>>>16,p=se[7],f=le[7],C+=f&65535,W+=f>>>16,S+=p&65535,$+=p>>>16,W+=C>>>16,S+=W>>>16,$+=S>>>16,se[7]=oe=S&65535|$<<16,le[7]=l=C&65535|W<<16,xe+=128,Te-=128}return xe}function he(Ie){var te=new m;te.update(Ie);var se=te.digest();return te.clean(),se}j.hash=he},20933:function(Le,j,z){"use strict";z.r(j),z.d(j,{__assign:function(){return V},__asyncDelegator:function(){return X},__asyncGenerator:function(){return ie},__asyncValues:function(){return oe},__await:function(){return Se},__awaiter:function(){return le},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return ye},__createBinding:function(){return xe},__decorate:function(){return Ie},__exportStar:function(){return Te},__extends:function(){return pe},__generator:function(){return Re},__importDefault:function(){return Z},__importStar:function(){return F},__makeTemplateObject:function(){return fe},__metadata:function(){return se},__param:function(){return te},__read:function(){return He},__rest:function(){return he},__spread:function(){return tt},__spreadArrays:function(){return ke},__values:function(){return ce}});var B=z(52677),ae=z.n(B);var m=function(b,l){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var _ in f)f.hasOwnProperty(_)&&(p[_]=f[_])},m(b,l)};function pe(d,b){m(d,b);function l(){this.constructor=d}d.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}var V=function(){return V=Object.assign||function(l){for(var p,f=1,_=arguments.length;f<_;f++){p=arguments[f];for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&(l[O]=p[O])}return l},V.apply(this,arguments)};function he(d,b){var l={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&b.indexOf(p)<0&&(l[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(d);f<p.length;f++)b.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(d,p[f])&&(l[p[f]]=d[p[f]]);return l}function Ie(d,b,l,p){var f=arguments.length,_=f<3?b:p===null?p=Object.getOwnPropertyDescriptor(b,l):p,O;if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,b,l,p);else for(var C=d.length-1;C>=0;C--)(O=d[C])&&(_=(f<3?O(_):f>3?O(b,l,_):O(b,l))||_);return f>3&&_&&Object.defineProperty(b,l,_),_}function te(d,b){return function(l,p){b(l,p,d)}}function se(d,b){if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,b)}function le(d,b,l,p){function f(_){return _ instanceof l?_:new l(function(O){O(_)})}return new(l||(l=Promise))(function(_,O){function C($){try{S(p.next($))}catch(Pe){O(Pe)}}function W($){try{S(p.throw($))}catch(Pe){O(Pe)}}function S($){$.done?_($.value):f($.value).then(C,W)}S((p=p.apply(d,b||[])).next())})}function Re(d,b){var l={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},p,f,_,O;return O={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function C(S){return function($){return W([S,$])}}function W(S){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(_=S[0]&2?f.return:S[0]?f.throw||((_=f.return)&&_.call(f),0):f.next)&&!(_=_.call(f,S[1])).done)return _;switch(f=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return l.label++,{value:S[1],done:!1};case 5:l.label++,f=S[1],S=[0];continue;case 7:S=l.ops.pop(),l.trys.pop();continue;default:if(_=l.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){l=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){l.label=S[1];break}if(S[0]===6&&l.label<_[1]){l.label=_[1],_=S;break}if(_&&l.label<_[2]){l.label=_[2],l.ops.push(S);break}_[2]&&l.ops.pop(),l.trys.pop();continue}S=b.call(d,l)}catch($){S=[6,$],f=0}finally{p=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function xe(d,b,l,p){p===void 0&&(p=l),d[p]=b[l]}function Te(d,b){for(var l in d)l!=="default"&&!b.hasOwnProperty(l)&&(b[l]=d[l])}function ce(d){var b=typeof Symbol=="function"&&Symbol.iterator,l=b&&d[b],p=0;if(l)return l.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(d,b){var l=typeof Symbol=="function"&&d[Symbol.iterator];if(!l)return d;var p=l.call(d),f,_=[],O;try{for(;(b===void 0||b-- >0)&&!(f=p.next()).done;)_.push(f.value)}catch(C){O={error:C}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(O)throw O.error}}return _}function tt(){for(var d=[],b=0;b<arguments.length;b++)d=d.concat(He(arguments[b]));return d}function ke(){for(var d=0,b=0,l=arguments.length;b<l;b++)d+=arguments[b].length;for(var p=Array(d),f=0,b=0;b<l;b++)for(var _=arguments[b],O=0,C=_.length;O<C;O++,f++)p[f]=_[O];return p}function Se(d){return this instanceof Se?(this.v=d,this):new Se(d)}function ie(d,b,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l.apply(d,b||[]),f,_=[];return f={},O("next"),O("throw"),O("return"),f[Symbol.asyncIterator]=function(){return this},f;function O(ue){p[ue]&&(f[ue]=function(me){return new Promise(function(nt,sr){_.push([ue,me,nt,sr])>1||C(ue,me)})})}function C(ue,me){try{W(p[ue](me))}catch(nt){Pe(_[0][3],nt)}}function W(ue){ue.value instanceof Se?Promise.resolve(ue.value.v).then(S,$):Pe(_[0][2],ue)}function S(ue){C("next",ue)}function $(ue){C("throw",ue)}function Pe(ue,me){ue(me),_.shift(),_.length&&C(_[0][0],_[0][1])}}function X(d){var b,l;return b={},p("next"),p("throw",function(f){throw f}),p("return"),b[Symbol.iterator]=function(){return this},b;function p(f,_){b[f]=d[f]?function(O){return(l=!l)?{value:Se(d[f](O)),done:f==="return"}:_?_(O):O}:_}}function oe(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=d[Symbol.asyncIterator],l;return b?b.call(d):(d=typeof ce=="function"?ce(d):d[Symbol.iterator](),l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l);function p(_){l[_]=d[_]&&function(O){return new Promise(function(C,W){O=d[_](O),f(C,W,O.done,O.value)})}}function f(_,O,C,W){Promise.resolve(W).then(function(S){_({value:S,done:C})},O)}}function fe(d,b){return Object.defineProperty?Object.defineProperty(d,"raw",{value:b}):d.raw=b,d}function F(d){if(d&&d.__esModule)return d;var b={};if(d!=null)for(var l in d)Object.hasOwnProperty.call(d,l)&&(b[l]=d[l]);return b.default=d,b}function Z(d){return d&&d.__esModule?d:{default:d}}function re(d,b){if(!b.has(d))throw new TypeError("attempted to get private field on non-instance");return b.get(d)}function ye(d,b,l){if(!b.has(d))throw new TypeError("attempted to set private field on non-instance");return b.set(d,l),l}},57875:function(Le,j,z){"use strict";z.r(j),z.d(j,{__assign:function(){return V},__asyncDelegator:function(){return X},__asyncGenerator:function(){return ie},__asyncValues:function(){return oe},__await:function(){return Se},__awaiter:function(){return le},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return ye},__createBinding:function(){return xe},__decorate:function(){return Ie},__exportStar:function(){return Te},__extends:function(){return pe},__generator:function(){return Re},__importDefault:function(){return Z},__importStar:function(){return F},__makeTemplateObject:function(){return fe},__metadata:function(){return se},__param:function(){return te},__read:function(){return He},__rest:function(){return he},__spread:function(){return tt},__spreadArrays:function(){return ke},__values:function(){return ce}});var B=z(52677),ae=z.n(B);var m=function(b,l){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var _ in f)f.hasOwnProperty(_)&&(p[_]=f[_])},m(b,l)};function pe(d,b){m(d,b);function l(){this.constructor=d}d.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}var V=function(){return V=Object.assign||function(l){for(var p,f=1,_=arguments.length;f<_;f++){p=arguments[f];for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&(l[O]=p[O])}return l},V.apply(this,arguments)};function he(d,b){var l={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&b.indexOf(p)<0&&(l[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(d);f<p.length;f++)b.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(d,p[f])&&(l[p[f]]=d[p[f]]);return l}function Ie(d,b,l,p){var f=arguments.length,_=f<3?b:p===null?p=Object.getOwnPropertyDescriptor(b,l):p,O;if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,b,l,p);else for(var C=d.length-1;C>=0;C--)(O=d[C])&&(_=(f<3?O(_):f>3?O(b,l,_):O(b,l))||_);return f>3&&_&&Object.defineProperty(b,l,_),_}function te(d,b){return function(l,p){b(l,p,d)}}function se(d,b){if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,b)}function le(d,b,l,p){function f(_){return _ instanceof l?_:new l(function(O){O(_)})}return new(l||(l=Promise))(function(_,O){function C($){try{S(p.next($))}catch(Pe){O(Pe)}}function W($){try{S(p.throw($))}catch(Pe){O(Pe)}}function S($){$.done?_($.value):f($.value).then(C,W)}S((p=p.apply(d,b||[])).next())})}function Re(d,b){var l={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},p,f,_,O;return O={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function C(S){return function($){return W([S,$])}}function W(S){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(_=S[0]&2?f.return:S[0]?f.throw||((_=f.return)&&_.call(f),0):f.next)&&!(_=_.call(f,S[1])).done)return _;switch(f=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return l.label++,{value:S[1],done:!1};case 5:l.label++,f=S[1],S=[0];continue;case 7:S=l.ops.pop(),l.trys.pop();continue;default:if(_=l.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){l=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){l.label=S[1];break}if(S[0]===6&&l.label<_[1]){l.label=_[1],_=S;break}if(_&&l.label<_[2]){l.label=_[2],l.ops.push(S);break}_[2]&&l.ops.pop(),l.trys.pop();continue}S=b.call(d,l)}catch($){S=[6,$],f=0}finally{p=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function xe(d,b,l,p){p===void 0&&(p=l),d[p]=b[l]}function Te(d,b){for(var l in d)l!=="default"&&!b.hasOwnProperty(l)&&(b[l]=d[l])}function ce(d){var b=typeof Symbol=="function"&&Symbol.iterator,l=b&&d[b],p=0;if(l)return l.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(d,b){var l=typeof Symbol=="function"&&d[Symbol.iterator];if(!l)return d;var p=l.call(d),f,_=[],O;try{for(;(b===void 0||b-- >0)&&!(f=p.next()).done;)_.push(f.value)}catch(C){O={error:C}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(O)throw O.error}}return _}function tt(){for(var d=[],b=0;b<arguments.length;b++)d=d.concat(He(arguments[b]));return d}function ke(){for(var d=0,b=0,l=arguments.length;b<l;b++)d+=arguments[b].length;for(var p=Array(d),f=0,b=0;b<l;b++)for(var _=arguments[b],O=0,C=_.length;O<C;O++,f++)p[f]=_[O];return p}function Se(d){return this instanceof Se?(this.v=d,this):new Se(d)}function ie(d,b,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l.apply(d,b||[]),f,_=[];return f={},O("next"),O("throw"),O("return"),f[Symbol.asyncIterator]=function(){return this},f;function O(ue){p[ue]&&(f[ue]=function(me){return new Promise(function(nt,sr){_.push([ue,me,nt,sr])>1||C(ue,me)})})}function C(ue,me){try{W(p[ue](me))}catch(nt){Pe(_[0][3],nt)}}function W(ue){ue.value instanceof Se?Promise.resolve(ue.value.v).then(S,$):Pe(_[0][2],ue)}function S(ue){C("next",ue)}function $(ue){C("throw",ue)}function Pe(ue,me){ue(me),_.shift(),_.length&&C(_[0][0],_[0][1])}}function X(d){var b,l;return b={},p("next"),p("throw",function(f){throw f}),p("return"),b[Symbol.iterator]=function(){return this},b;function p(f,_){b[f]=d[f]?function(O){return(l=!l)?{value:Se(d[f](O)),done:f==="return"}:_?_(O):O}:_}}function oe(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=d[Symbol.asyncIterator],l;return b?b.call(d):(d=typeof ce=="function"?ce(d):d[Symbol.iterator](),l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l);function p(_){l[_]=d[_]&&function(O){return new Promise(function(C,W){O=d[_](O),f(C,W,O.done,O.value)})}}function f(_,O,C,W){Promise.resolve(W).then(function(S){_({value:S,done:C})},O)}}function fe(d,b){return Object.defineProperty?Object.defineProperty(d,"raw",{value:b}):d.raw=b,d}function F(d){if(d&&d.__esModule)return d;var b={};if(d!=null)for(var l in d)Object.hasOwnProperty.call(d,l)&&(b[l]=d[l]);return b.default=d,b}function Z(d){return d&&d.__esModule?d:{default:d}}function re(d,b){if(!b.has(d))throw new TypeError("attempted to get private field on non-instance");return b.get(d)}function ye(d,b,l){if(!b.has(d))throw new TypeError("attempted to set private field on non-instance");return b.set(d,l),l}},63364:function(Le,j,z){"use strict";z.r(j),z.d(j,{__assign:function(){return V},__asyncDelegator:function(){return X},__asyncGenerator:function(){return ie},__asyncValues:function(){return oe},__await:function(){return Se},__awaiter:function(){return le},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return ye},__createBinding:function(){return xe},__decorate:function(){return Ie},__exportStar:function(){return Te},__extends:function(){return pe},__generator:function(){return Re},__importDefault:function(){return Z},__importStar:function(){return F},__makeTemplateObject:function(){return fe},__metadata:function(){return se},__param:function(){return te},__read:function(){return He},__rest:function(){return he},__spread:function(){return tt},__spreadArrays:function(){return ke},__values:function(){return ce}});var B=z(52677),ae=z.n(B);var m=function(b,l){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var _ in f)f.hasOwnProperty(_)&&(p[_]=f[_])},m(b,l)};function pe(d,b){m(d,b);function l(){this.constructor=d}d.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}var V=function(){return V=Object.assign||function(l){for(var p,f=1,_=arguments.length;f<_;f++){p=arguments[f];for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&(l[O]=p[O])}return l},V.apply(this,arguments)};function he(d,b){var l={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&b.indexOf(p)<0&&(l[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(d);f<p.length;f++)b.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(d,p[f])&&(l[p[f]]=d[p[f]]);return l}function Ie(d,b,l,p){var f=arguments.length,_=f<3?b:p===null?p=Object.getOwnPropertyDescriptor(b,l):p,O;if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,b,l,p);else for(var C=d.length-1;C>=0;C--)(O=d[C])&&(_=(f<3?O(_):f>3?O(b,l,_):O(b,l))||_);return f>3&&_&&Object.defineProperty(b,l,_),_}function te(d,b){return function(l,p){b(l,p,d)}}function se(d,b){if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,b)}function le(d,b,l,p){function f(_){return _ instanceof l?_:new l(function(O){O(_)})}return new(l||(l=Promise))(function(_,O){function C($){try{S(p.next($))}catch(Pe){O(Pe)}}function W($){try{S(p.throw($))}catch(Pe){O(Pe)}}function S($){$.done?_($.value):f($.value).then(C,W)}S((p=p.apply(d,b||[])).next())})}function Re(d,b){var l={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},p,f,_,O;return O={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function C(S){return function($){return W([S,$])}}function W(S){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(_=S[0]&2?f.return:S[0]?f.throw||((_=f.return)&&_.call(f),0):f.next)&&!(_=_.call(f,S[1])).done)return _;switch(f=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return l.label++,{value:S[1],done:!1};case 5:l.label++,f=S[1],S=[0];continue;case 7:S=l.ops.pop(),l.trys.pop();continue;default:if(_=l.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){l=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){l.label=S[1];break}if(S[0]===6&&l.label<_[1]){l.label=_[1],_=S;break}if(_&&l.label<_[2]){l.label=_[2],l.ops.push(S);break}_[2]&&l.ops.pop(),l.trys.pop();continue}S=b.call(d,l)}catch($){S=[6,$],f=0}finally{p=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function xe(d,b,l,p){p===void 0&&(p=l),d[p]=b[l]}function Te(d,b){for(var l in d)l!=="default"&&!b.hasOwnProperty(l)&&(b[l]=d[l])}function ce(d){var b=typeof Symbol=="function"&&Symbol.iterator,l=b&&d[b],p=0;if(l)return l.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(d,b){var l=typeof Symbol=="function"&&d[Symbol.iterator];if(!l)return d;var p=l.call(d),f,_=[],O;try{for(;(b===void 0||b-- >0)&&!(f=p.next()).done;)_.push(f.value)}catch(C){O={error:C}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(O)throw O.error}}return _}function tt(){for(var d=[],b=0;b<arguments.length;b++)d=d.concat(He(arguments[b]));return d}function ke(){for(var d=0,b=0,l=arguments.length;b<l;b++)d+=arguments[b].length;for(var p=Array(d),f=0,b=0;b<l;b++)for(var _=arguments[b],O=0,C=_.length;O<C;O++,f++)p[f]=_[O];return p}function Se(d){return this instanceof Se?(this.v=d,this):new Se(d)}function ie(d,b,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l.apply(d,b||[]),f,_=[];return f={},O("next"),O("throw"),O("return"),f[Symbol.asyncIterator]=function(){return this},f;function O(ue){p[ue]&&(f[ue]=function(me){return new Promise(function(nt,sr){_.push([ue,me,nt,sr])>1||C(ue,me)})})}function C(ue,me){try{W(p[ue](me))}catch(nt){Pe(_[0][3],nt)}}function W(ue){ue.value instanceof Se?Promise.resolve(ue.value.v).then(S,$):Pe(_[0][2],ue)}function S(ue){C("next",ue)}function $(ue){C("throw",ue)}function Pe(ue,me){ue(me),_.shift(),_.length&&C(_[0][0],_[0][1])}}function X(d){var b,l;return b={},p("next"),p("throw",function(f){throw f}),p("return"),b[Symbol.iterator]=function(){return this},b;function p(f,_){b[f]=d[f]?function(O){return(l=!l)?{value:Se(d[f](O)),done:f==="return"}:_?_(O):O}:_}}function oe(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=d[Symbol.asyncIterator],l;return b?b.call(d):(d=typeof ce=="function"?ce(d):d[Symbol.iterator](),l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l);function p(_){l[_]=d[_]&&function(O){return new Promise(function(C,W){O=d[_](O),f(C,W,O.done,O.value)})}}function f(_,O,C,W){Promise.resolve(W).then(function(S){_({value:S,done:C})},O)}}function fe(d,b){return Object.defineProperty?Object.defineProperty(d,"raw",{value:b}):d.raw=b,d}function F(d){if(d&&d.__esModule)return d;var b={};if(d!=null)for(var l in d)Object.hasOwnProperty.call(d,l)&&(b[l]=d[l]);return b.default=d,b}function Z(d){return d&&d.__esModule?d:{default:d}}function re(d,b){if(!b.has(d))throw new TypeError("attempted to get private field on non-instance");return b.get(d)}function ye(d,b,l){if(!b.has(d))throw new TypeError("attempted to set private field on non-instance");return b.set(d,l),l}},85906:function(Le,j,z){"use strict";z.r(j),z.d(j,{__assign:function(){return V},__asyncDelegator:function(){return X},__asyncGenerator:function(){return ie},__asyncValues:function(){return oe},__await:function(){return Se},__awaiter:function(){return le},__classPrivateFieldGet:function(){return re},__classPrivateFieldSet:function(){return ye},__createBinding:function(){return xe},__decorate:function(){return Ie},__exportStar:function(){return Te},__extends:function(){return pe},__generator:function(){return Re},__importDefault:function(){return Z},__importStar:function(){return F},__makeTemplateObject:function(){return fe},__metadata:function(){return se},__param:function(){return te},__read:function(){return He},__rest:function(){return he},__spread:function(){return tt},__spreadArrays:function(){return ke},__values:function(){return ce}});var B=z(52677),ae=z.n(B);var m=function(b,l){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(p,f){p.__proto__=f}||function(p,f){for(var _ in f)f.hasOwnProperty(_)&&(p[_]=f[_])},m(b,l)};function pe(d,b){m(d,b);function l(){this.constructor=d}d.prototype=b===null?Object.create(b):(l.prototype=b.prototype,new l)}var V=function(){return V=Object.assign||function(l){for(var p,f=1,_=arguments.length;f<_;f++){p=arguments[f];for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&(l[O]=p[O])}return l},V.apply(this,arguments)};function he(d,b){var l={};for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&b.indexOf(p)<0&&(l[p]=d[p]);if(d!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,p=Object.getOwnPropertySymbols(d);f<p.length;f++)b.indexOf(p[f])<0&&Object.prototype.propertyIsEnumerable.call(d,p[f])&&(l[p[f]]=d[p[f]]);return l}function Ie(d,b,l,p){var f=arguments.length,_=f<3?b:p===null?p=Object.getOwnPropertyDescriptor(b,l):p,O;if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.decorate=="function")_=Reflect.decorate(d,b,l,p);else for(var C=d.length-1;C>=0;C--)(O=d[C])&&(_=(f<3?O(_):f>3?O(b,l,_):O(b,l))||_);return f>3&&_&&Object.defineProperty(b,l,_),_}function te(d,b){return function(l,p){b(l,p,d)}}function se(d,b){if((typeof Reflect>"u"?"undefined":ae()(Reflect))==="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(d,b)}function le(d,b,l,p){function f(_){return _ instanceof l?_:new l(function(O){O(_)})}return new(l||(l=Promise))(function(_,O){function C($){try{S(p.next($))}catch(Pe){O(Pe)}}function W($){try{S(p.throw($))}catch(Pe){O(Pe)}}function S($){$.done?_($.value):f($.value).then(C,W)}S((p=p.apply(d,b||[])).next())})}function Re(d,b){var l={label:0,sent:function(){if(_[0]&1)throw _[1];return _[1]},trys:[],ops:[]},p,f,_,O;return O={next:C(0),throw:C(1),return:C(2)},typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function C(S){return function($){return W([S,$])}}function W(S){if(p)throw new TypeError("Generator is already executing.");for(;l;)try{if(p=1,f&&(_=S[0]&2?f.return:S[0]?f.throw||((_=f.return)&&_.call(f),0):f.next)&&!(_=_.call(f,S[1])).done)return _;switch(f=0,_&&(S=[S[0]&2,_.value]),S[0]){case 0:case 1:_=S;break;case 4:return l.label++,{value:S[1],done:!1};case 5:l.label++,f=S[1],S=[0];continue;case 7:S=l.ops.pop(),l.trys.pop();continue;default:if(_=l.trys,!(_=_.length>0&&_[_.length-1])&&(S[0]===6||S[0]===2)){l=0;continue}if(S[0]===3&&(!_||S[1]>_[0]&&S[1]<_[3])){l.label=S[1];break}if(S[0]===6&&l.label<_[1]){l.label=_[1],_=S;break}if(_&&l.label<_[2]){l.label=_[2],l.ops.push(S);break}_[2]&&l.ops.pop(),l.trys.pop();continue}S=b.call(d,l)}catch($){S=[6,$],f=0}finally{p=_=0}if(S[0]&5)throw S[1];return{value:S[0]?S[1]:void 0,done:!0}}}function xe(d,b,l,p){p===void 0&&(p=l),d[p]=b[l]}function Te(d,b){for(var l in d)l!=="default"&&!b.hasOwnProperty(l)&&(b[l]=d[l])}function ce(d){var b=typeof Symbol=="function"&&Symbol.iterator,l=b&&d[b],p=0;if(l)return l.call(d);if(d&&typeof d.length=="number")return{next:function(){return d&&p>=d.length&&(d=void 0),{value:d&&d[p++],done:!d}}};throw new TypeError(b?"Object is not iterable.":"Symbol.iterator is not defined.")}function He(d,b){var l=typeof Symbol=="function"&&d[Symbol.iterator];if(!l)return d;var p=l.call(d),f,_=[],O;try{for(;(b===void 0||b-- >0)&&!(f=p.next()).done;)_.push(f.value)}catch(C){O={error:C}}finally{try{f&&!f.done&&(l=p.return)&&l.call(p)}finally{if(O)throw O.error}}return _}function tt(){for(var d=[],b=0;b<arguments.length;b++)d=d.concat(He(arguments[b]));return d}function ke(){for(var d=0,b=0,l=arguments.length;b<l;b++)d+=arguments[b].length;for(var p=Array(d),f=0,b=0;b<l;b++)for(var _=arguments[b],O=0,C=_.length;O<C;O++,f++)p[f]=_[O];return p}function Se(d){return this instanceof Se?(this.v=d,this):new Se(d)}function ie(d,b,l){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var p=l.apply(d,b||[]),f,_=[];return f={},O("next"),O("throw"),O("return"),f[Symbol.asyncIterator]=function(){return this},f;function O(ue){p[ue]&&(f[ue]=function(me){return new Promise(function(nt,sr){_.push([ue,me,nt,sr])>1||C(ue,me)})})}function C(ue,me){try{W(p[ue](me))}catch(nt){Pe(_[0][3],nt)}}function W(ue){ue.value instanceof Se?Promise.resolve(ue.value.v).then(S,$):Pe(_[0][2],ue)}function S(ue){C("next",ue)}function $(ue){C("throw",ue)}function Pe(ue,me){ue(me),_.shift(),_.length&&C(_[0][0],_[0][1])}}function X(d){var b,l;return b={},p("next"),p("throw",function(f){throw f}),p("return"),b[Symbol.iterator]=function(){return this},b;function p(f,_){b[f]=d[f]?function(O){return(l=!l)?{value:Se(d[f](O)),done:f==="return"}:_?_(O):O}:_}}function oe(d){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var b=d[Symbol.asyncIterator],l;return b?b.call(d):(d=typeof ce=="function"?ce(d):d[Symbol.iterator](),l={},p("next"),p("throw"),p("return"),l[Symbol.asyncIterator]=function(){return this},l);function p(_){l[_]=d[_]&&function(O){return new Promise(function(C,W){O=d[_](O),f(C,W,O.done,O.value)})}}function f(_,O,C,W){Promise.resolve(W).then(function(S){_({value:S,done:C})},O)}}function fe(d,b){return Object.defineProperty?Object.defineProperty(d,"raw",{value:b}):d.raw=b,d}function F(d){if(d&&d.__esModule)return d;var b={};if(d!=null)for(var l in d)Object.hasOwnProperty.call(d,l)&&(b[l]=d[l]);return b.default=d,b}function Z(d){return d&&d.__esModule?d:{default:d}}function re(d,b){if(!b.has(d))throw new TypeError("attempted to get private field on non-instance");return b.get(d)}function ye(d,b,l){if(!b.has(d))throw new TypeError("attempted to set private field on non-instance");return b.set(d,l),l}},40926:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.isBrowserCryptoAvailable=j.getSubtleCrypto=j.getBrowerCrypto=void 0;function B(){return(z.g===null||z.g===void 0?void 0:z.g.crypto)||(z.g===null||z.g===void 0?void 0:z.g.msCrypto)||{}}j.getBrowerCrypto=B;function ae(){const pe=B();return pe.subtle||pe.webkitSubtle}j.getSubtleCrypto=ae;function m(){return!!B()&&!!ae()}j.isBrowserCryptoAvailable=m},88618:function(Le,j,z){"use strict";var B=z(34155);Object.defineProperty(j,"__esModule",{value:!0}),j.isBrowser=j.isNode=j.isReactNative=void 0;function ae(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product==="ReactNative"}j.isReactNative=ae;function m(){return typeof B<"u"&&typeof B.versions<"u"&&typeof B.versions.node<"u"}j.isNode=m;function pe(){return!ae()&&!m()}j.isBrowser=pe},1468:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0});const B=z(20933);B.__exportStar(z(40926),j),B.__exportStar(z(88618),j)},20882:function(Le,j,z){"use strict";z.d(j,{EthereumProvider:function(){return kp},OPTIONAL_EVENTS:function(){return Uu},OPTIONAL_METHODS:function(){return Mu}});var B=z(17187),ae=z.n(B),m=z(5015),pe=z(85150),V=z(90772),he=z(9107),Ie=z(38200);class te extends Ie.q{constructor(n){super(),this.opts=n,this.protocol="wc",this.version=2}}class se{constructor(n,r,o){this.core=n,this.logger=r}}class le extends Ie.q{constructor(n,r){super(),this.core=n,this.logger=r,this.records=new Map}}class Re{constructor(n,r){this.logger=n,this.core=r}}class xe extends Ie.q{constructor(n,r){super(),this.relayer=n,this.logger=r}}class Te extends Ie.q{constructor(n){super()}}class ce{constructor(n,r,o,a){this.core=n,this.logger=r,this.name=o}}class He{constructor(){this.map=new Map}}class tt extends Ie.q{constructor(n,r){super(),this.relayer=n,this.logger=r}}class ke{constructor(n,r){this.core=n,this.logger=r}}class Se extends Ie.q{constructor(n,r){super(),this.core=n,this.logger=r}}class ie{constructor(n,r){this.logger=n,this.core=r}}class X{constructor(n,r){this.projectId=n,this.logger=r}}class oe extends null{constructor(){super()}}class fe{constructor(n){this.opts=n,this.protocol="wc",this.version=2}}class F extends null{constructor(){super()}}class Z{constructor(n){this.client=n}}const re=y=>JSON.stringify(y,(n,r)=>typeof r=="bigint"?r.toString()+"n":r),ye=y=>{const n=/([\[:])?(\d{17,}|(?:[9](?:[1-9]07199254740991|0[1-9]7199254740991|00[8-9]199254740991|007[2-9]99254740991|007199[3-9]54740991|0071992[6-9]4740991|00719925[5-9]740991|007199254[8-9]40991|0071992547[5-9]0991|00719925474[1-9]991|00719925474099[2-9])))([,\}\]])/g,r=y.replace(n,'$1"$2n"$3');return JSON.parse(r,(o,a)=>typeof a=="string"&&a.match(/^\d+n$/)?BigInt(a.substring(0,a.length-1)):a)};function d(y){if(typeof y!="string")throw new Error(`Cannot safe json parse value of type ${typeof y}`);try{return ye(y)}catch{return y}}function b(y){return typeof y=="string"?y:re(y)||""}var l=z(31050),p=z(31416),f=z(66736);const _="EdDSA",O="JWT",C=".",W="base64url",S="utf8",$="utf8",Pe=":",ue="did",me="key",nt="base58btc",sr="z",ht="K36",H=32,k=32;var M=z(20605),h=z(92263),A=z(52217);function be(y){return safeJsonParse(toString(fromString(y,JWT_ENCODING),JSON_ENCODING))}function Fe(y){return(0,h.B)((0,A.m)(b(y),S),W)}function Je(y){const n=(0,A.m)(ht,nt),r=sr+(0,h.B)((0,M.z)([n,y]),nt);return[ue,me,r].join(Pe)}function yt(y){const[n,r,o]=y.split(DID_DELIMITER);if(n!==DID_PREFIX||r!==DID_METHOD)throw new Error('Issuer must be a DID with method "key"');if(o.slice(0,1)!==MULTICODEC_ED25519_BASE)throw new Error("Issuer must be a key in mulicodec format");const v=fromString(o.slice(1),MULTICODEC_ED25519_ENCODING);if(toString(v.slice(0,2),MULTICODEC_ED25519_ENCODING)!==MULTICODEC_ED25519_HEADER)throw new Error('Issuer must be a public key with type "Ed25519"');const L=v.slice(2);if(L.length!==MULTICODEC_ED25519_LENGTH)throw new Error("Issuer must be a public key with length 32 bytes");return L}function Ze(y){return(0,h.B)(y,W)}function st(y){return fromString(y,JWT_ENCODING)}function Ht(y){return(0,A.m)([Fe(y.header),Fe(y.payload)].join(C),$)}function lr(y){const n=toString(y,DATA_ENCODING).split(JWT_DELIMITER),r=be(n[0]),o=be(n[1]);return{header:r,payload:o}}function Qt(y){return[Fe(y.header),Fe(y.payload),Ze(y.signature)].join(C)}function Yt(y){const n=y.split(JWT_DELIMITER),r=be(n[0]),o=be(n[1]),a=st(n[2]),v=fromString(n.slice(0,2).join(JWT_DELIMITER),DATA_ENCODING);return{header:r,payload:o,signature:a,data:v}}function At(y=(0,p.randomBytes)(k)){return l._w(y)}async function Ct(y,n,r,o,a=(0,f.fromMiliseconds)(Date.now())){const v={alg:_,typ:O},I=Je(o.publicKey),L=a+r,K={iss:I,sub:y,aud:n,iat:a,exp:L},de=Ht({header:v,payload:K}),we=l.Xx(o.secretKey,de);return Qt({header:v,payload:K,signature:we})}async function Tt(y){const{header:n,payload:r,data:o,signature:a}=decodeJWT(y);if(n.alg!==JWT_IRIDIUM_ALG||n.typ!==JWT_IRIDIUM_TYP)throw new Error("JWT must use EdDSA algorithm");const v=decodeIss(r.iss);return ed25519.verify(v,o,a)}var lt=z(43014),at=z(37466);const ft="PARSE_ERROR",rt="INVALID_REQUEST",Vt="METHOD_NOT_FOUND",Xt="INVALID_PARAMS",or="INTERNAL_ERROR",er="SERVER_ERROR",ar=[-32700,-32600,-32601,-32602,-32603],Sr=null,cr={[ft]:{code:-32700,message:"Parse error"},[rt]:{code:-32600,message:"Invalid Request"},[Vt]:{code:-32601,message:"Method not found"},[Xt]:{code:-32602,message:"Invalid params"},[or]:{code:-32603,message:"Internal error"},[er]:{code:-32e3,message:"Server error"}},Fr=er;function gr(y){return y<=SERVER_ERROR_CODE_RANGE[0]&&y>=SERVER_ERROR_CODE_RANGE[1]}function Hr(y){return ar.includes(y)}function mi(y){return typeof y=="number"}function wi(y){return Object.keys(cr).includes(y)?cr[y]:cr[Fr]}function ci(y){const n=Object.values(cr).find(r=>r.code===y);return n||cr[Fr]}function bi(y){if(typeof y.error.code>"u")return{valid:!1,error:"Missing code for JSON-RPC error"};if(typeof y.error.message>"u")return{valid:!1,error:"Missing message for JSON-RPC error"};if(!mi(y.error.code))return{valid:!1,error:`Invalid error code type for JSON-RPC: ${y.error.code}`};if(Hr(y.error.code)){const n=ci(y.error.code);if(n.message!==STANDARD_ERROR_MAP[DEFAULT_ERROR].message&&y.error.message===n.message)return{valid:!1,error:`Invalid error code message for JSON-RPC: ${y.error.code}`}}return{valid:!0}}function St(y,n,r){return y.message.includes("getaddrinfo ENOTFOUND")||y.message.includes("connect ECONNREFUSED")?new Error(`Unavailable ${r} RPC url at ${n}`):y}var Dt=z(1468);const Ft=null;function dt(y=3){const n=Date.now()*Math.pow(10,y),r=Math.floor(Math.random()*Math.pow(10,y));return n+r}function jt(y=6){return BigInt(dt(y))}function vt(y,n,r){return{id:r||dt(),jsonrpc:"2.0",method:y,params:n}}function Nt(y,n){return{id:y,jsonrpc:"2.0",result:n}}function Ot(y,n,r){return{id:y,jsonrpc:"2.0",error:Kt(n,r)}}function Kt(y,n){return typeof y>"u"?wi(or):(typeof y=="string"&&(y=Object.assign(Object.assign({},wi(er)),{message:y})),typeof n<"u"&&(y.data=n),Hr(y.code)&&(y=ci(y.code)),y)}class Mt{}class Ut extends null{constructor(n){super()}}class pt extends Mt{constructor(){super()}}class kt extends pt{constructor(n){super()}}const Gt="^https?:",Wt="^wss?:";function Jt(y){const n=y.match(new RegExp(/^\w+:/,"gi"));if(!(!n||!n.length))return n[0]}function ds(y,n){const r=Jt(y);return typeof r>"u"?!1:new RegExp(n).test(r)}function Vr(y){return ds(y,Gt)}function ps(y){return ds(y,Wt)}function So(y){return new RegExp("wss?://localhost(:d{2,5})?").test(y)}function gs(y){return typeof y=="object"&&"id"in y&&"jsonrpc"in y&&y.jsonrpc==="2.0"}function Fn(y){return gs(y)&&"method"in y}function fn(y){return gs(y)&&(fr(y)||jr(y))}function fr(y){return"result"in y}function jr(y){return"error"in y}function Uc(y){return"error"in y&&y.valid===!1}class ui extends kt{constructor(n){super(n),this.events=new B.EventEmitter,this.hasRegisteredEventListeners=!1,this.connection=this.setConnection(n),this.connection.connected&&this.registerEventListeners()}async connect(n=this.connection){await this.open(n)}async disconnect(){await this.close()}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}off(n,r){this.events.off(n,r)}removeListener(n,r){this.events.removeListener(n,r)}async request(n,r){return this.requestStrict(vt(n.method,n.params||[],n.id||jt().toString()),r)}async requestStrict(n,r){return new Promise(async(o,a)=>{if(!this.connection.connected)try{await this.open()}catch(v){a(v)}this.events.on(`${n.id}`,v=>{jr(v)?a(v.error):o(v.result)});try{await this.connection.send(n,r)}catch(v){a(v)}})}setConnection(n=this.connection){return n}onPayload(n){this.events.emit("payload",n),fn(n)?this.events.emit(`${n.id}`,n):this.events.emit("message",{type:n.method,data:n.params})}onClose(n){n&&n.code===3e3&&this.events.emit("error",new Error(`WebSocket connection closed abnormally with code: ${n.code} ${n.reason?`(${n.reason})`:""}`)),this.events.emit("disconnect")}async open(n=this.connection){this.connection===n&&this.connection.connected||(this.connection.connected&&this.close(),typeof n=="string"&&(await this.connection.open(n),n=this.connection),this.connection=this.setConnection(n),await this.connection.open(),this.registerEventListeners(),this.events.emit("connect"))}async close(){await this.connection.close()}registerEventListeners(){this.hasRegisteredEventListeners||(this.connection.on("payload",n=>this.onPayload(n)),this.connection.on("close",n=>this.onClose(n)),this.connection.on("error",n=>this.events.emit("error",n)),this.connection.on("register_error",n=>this.onClose()),this.hasRegisteredEventListeners=!0)}}var zc=null,qc=null;const dn=()=>typeof WebSocket<"u"?WebSocket:typeof z.g<"u"&&typeof z.g.WebSocket<"u"?z.g.WebSocket:typeof window<"u"&&typeof window.WebSocket<"u"?window.WebSocket:typeof self<"u"&&typeof self.WebSocket<"u"?self.WebSocket:z(57026),Oo=()=>typeof WebSocket<"u"||typeof z.g<"u"&&typeof z.g.WebSocket<"u"||typeof window<"u"&&typeof window.WebSocket<"u"||typeof self<"u"&&typeof self.WebSocket<"u",$c=()=>typeof window<"u",ei=y=>y.split("?")[0],ys=10,Ro=dn();class Ao{constructor(n){if(this.url=n,this.events=new B.EventEmitter,this.registering=!1,!ps(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);this.url=n}get connected(){return typeof this.socket<"u"}get connecting(){return this.registering}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}off(n,r){this.events.off(n,r)}removeListener(n,r){this.events.removeListener(n,r)}async open(n=this.url){await this.register(n)}async close(){return new Promise((n,r)=>{if(typeof this.socket>"u"){r(new Error("Connection already closed"));return}this.socket.onclose=o=>{this.onClose(o),n()},this.socket.close()})}async send(n,r){typeof this.socket>"u"&&(this.socket=await this.register());try{this.socket.send(b(n))}catch(o){this.onError(n.id,o)}}register(n=this.url){if(!ps(n))throw new Error(`Provided URL is not compatible with WebSocket connection: ${n}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,a)=>{this.events.once("register_error",v=>{this.resetMaxListeners(),a(v)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.socket>"u")return a(new Error("WebSocket connection is missing or invalid"));o(this.socket)})})}return this.url=n,this.registering=!0,new Promise((r,o)=>{const a=(0,Dt.isReactNative)()?void 0:{rejectUnauthorized:!So(n)},v=new Ro(n,[],a);Oo()?v.onerror=I=>{const L=I;o(this.emitError(L.error))}:v.on("error",I=>{o(this.emitError(I))}),v.onopen=()=>{this.onOpen(v),r(v)}})}onOpen(n){n.onmessage=r=>this.onPayload(r),n.onclose=r=>this.onClose(r),this.socket=n,this.registering=!1,this.events.emit("open")}onClose(n){this.socket=void 0,this.registering=!1,this.events.emit("close",n)}onPayload(n){if(typeof n.data>"u")return;const r=typeof n.data=="string"?d(n.data):n.data;this.events.emit("payload",r)}onError(n,r){const o=this.parseError(r),a=o.message||o.toString(),v=Ot(n,a);this.events.emit("payload",v)}parseError(n,r=this.url){return St(n,ei(r),"WS")}resetMaxListeners(){this.events.getMaxListeners()>ys&&this.events.setMaxListeners(ys)}emitError(n){const r=this.parseError(new Error((n==null?void 0:n.message)||`WebSocket connection failed for host: ${ei(this.url)}`));return this.events.emit("register_error",r),r}}var Co=Ao,To=Co,Do=z(72307),pn=z.n(Do);function No(y,n){if(y.length>=255)throw new TypeError("Alphabet too long");for(var r=new Uint8Array(256),o=0;o<r.length;o++)r[o]=255;for(var a=0;a<y.length;a++){var v=y.charAt(a),I=v.charCodeAt(0);if(r[I]!==255)throw new TypeError(v+" is ambiguous");r[I]=a}var L=y.length,K=y.charAt(0),de=Math.log(L)/Math.log(256),we=Math.log(256)/Math.log(L);function Ae(Me){if(Me instanceof Uint8Array||(ArrayBuffer.isView(Me)?Me=new Uint8Array(Me.buffer,Me.byteOffset,Me.byteLength):Array.isArray(Me)&&(Me=Uint8Array.from(Me))),!(Me instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(Me.length===0)return"";for(var mt=0,Et=0,xt=0,wr=Me.length;xt!==wr&&Me[xt]===0;)xt++,mt++;for(var ot=(wr-xt)*we+1>>>0,Ye=new Uint8Array(ot);xt!==wr;){for(var It=Me[xt],br=0,qt=ot-1;(It!==0||br<Et)&&qt!==-1;qt--,br++)It+=256*Ye[qt]>>>0,Ye[qt]=It%L>>>0,It=It/L>>>0;if(It!==0)throw new Error("Non-zero carry");Et=br,xt++}for(var Er=ot-Et;Er!==ot&&Ye[Er]===0;)Er++;for(var zi=K.repeat(mt);Er<ot;++Er)zi+=y.charAt(Ye[Er]);return zi}function Oe(Me){if(typeof Me!="string")throw new TypeError("Expected String");if(Me.length===0)return new Uint8Array;var mt=0;if(Me[mt]!==" "){for(var Et=0,xt=0;Me[mt]===K;)Et++,mt++;for(var wr=(Me.length-mt)*de+1>>>0,ot=new Uint8Array(wr);Me[mt];){var Ye=r[Me.charCodeAt(mt)];if(Ye===255)return;for(var It=0,br=wr-1;(Ye!==0||It<xt)&&br!==-1;br--,It++)Ye+=L*ot[br]>>>0,ot[br]=Ye%256>>>0,Ye=Ye/256>>>0;if(Ye!==0)throw new Error("Non-zero carry");xt=It,mt++}if(Me[mt]!==" "){for(var qt=wr-xt;qt!==wr&&ot[qt]===0;)qt++;for(var Er=new Uint8Array(Et+(wr-qt)),zi=Et;qt!==wr;)Er[zi++]=ot[qt++];return Er}}}function Qe(Me){var mt=Oe(Me);if(mt)return mt;throw new Error(`Non-${n} character`)}return{encode:Ae,decodeUnsafe:Oe,decode:Qe}}var Zi=No,vs=Zi;const jn=y=>{if(y instanceof Uint8Array&&y.constructor.name==="Uint8Array")return y;if(y instanceof ArrayBuffer)return new Uint8Array(y);if(ArrayBuffer.isView(y))return new Uint8Array(y.buffer,y.byteOffset,y.byteLength);throw new Error("Unknown type, must be binary type")},Lo=y=>new TextEncoder().encode(y),Fo=y=>new TextDecoder().decode(y);class jo{constructor(n,r,o){this.name=n,this.prefix=r,this.baseEncode=o}encode(n){if(n instanceof Uint8Array)return`${this.prefix}${this.baseEncode(n)}`;throw Error("Unknown type, must be binary type")}}class Mo{constructor(n,r,o){if(this.name=n,this.prefix=r,r.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=r.codePointAt(0),this.baseDecode=o}decode(n){if(typeof n=="string"){if(n.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(n)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(n.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(n){return ms(this,n)}}class _s{constructor(n){this.decoders=n}or(n){return ms(this,n)}decode(n){const r=n[0],o=this.decoders[r];if(o)return o.decode(n);throw RangeError(`Unable to decode multibase string ${JSON.stringify(n)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const ms=(y,n)=>new _s({...y.decoders||{[y.prefix]:y},...n.decoders||{[n.prefix]:n}});class Uo{constructor(n,r,o,a){this.name=n,this.prefix=r,this.baseEncode=o,this.baseDecode=a,this.encoder=new jo(n,r,o),this.decoder=new Mo(n,r,a)}encode(n){return this.encoder.encode(n)}decode(n){return this.decoder.decode(n)}}const Qi=({name:y,prefix:n,encode:r,decode:o})=>new Uo(y,n,r,o),hi=({prefix:y,name:n,alphabet:r})=>{const{encode:o,decode:a}=vs(r,n);return Qi({prefix:y,name:n,encode:o,decode:v=>jn(a(v))})},ji=(y,n,r,o)=>{const a={};for(let we=0;we<n.length;++we)a[n[we]]=we;let v=y.length;for(;y[v-1]==="=";)--v;const I=new Uint8Array(v*r/8|0);let L=0,K=0,de=0;for(let we=0;we<v;++we){const Ae=a[y[we]];if(Ae===void 0)throw new SyntaxError(`Non-${o} character`);K=K<<r|Ae,L+=r,L>=8&&(L-=8,I[de++]=255&K>>L)}if(L>=r||255&K<<8-L)throw new SyntaxError("Unexpected end of data");return I},zo=(y,n,r)=>{const o=n[n.length-1]==="=",a=(1<<r)-1;let v="",I=0,L=0;for(let K=0;K<y.length;++K)for(L=L<<8|y[K],I+=8;I>r;)I-=r,v+=n[a&L>>I];if(I&&(v+=n[a&L<<r-I]),o)for(;v.length*r&7;)v+="=";return v},tr=({name:y,prefix:n,bitsPerChar:r,alphabet:o})=>Qi({prefix:n,name:y,encode(a){return zo(a,o,r)},decode(a){return ji(a,o,r,y)}}),li=Qi({prefix:"\0",name:"identity",encode:y=>Fo(y),decode:y=>Lo(y)});var qo=Object.freeze({__proto__:null,identity:li});const $o=tr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var Bo=Object.freeze({__proto__:null,base2:$o});const Ho=tr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var Vo=Object.freeze({__proto__:null,base8:Ho});const Ei=hi({prefix:"9",name:"base10",alphabet:"0123456789"});var ws=Object.freeze({__proto__:null,base10:Ei});const Ko=tr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),gn=tr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var ko=Object.freeze({__proto__:null,base16:Ko,base16upper:gn});const Mn=tr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),Go=tr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),bs=tr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),Es=tr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),xs=tr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),Yi=tr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),Is=tr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),Wo=tr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),Jo=tr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var Zo=Object.freeze({__proto__:null,base32:Mn,base32upper:Go,base32pad:bs,base32padupper:Es,base32hex:xs,base32hexupper:Yi,base32hexpad:Is,base32hexpadupper:Wo,base32z:Jo});const x=hi({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),T=hi({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var ee=Object.freeze({__proto__:null,base36:x,base36upper:T});const ve=hi({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),ct=hi({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var ze=Object.freeze({__proto__:null,base58btc:ve,base58flickr:ct});const bt=tr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),Zt=tr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),rr=tr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),_t=tr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var mr=Object.freeze({__proto__:null,base64:bt,base64pad:Zt,base64url:rr,base64urlpad:_t});const Or=Array.from("\u{1F680}\u{1FA90}\u2604\u{1F6F0}\u{1F30C}\u{1F311}\u{1F312}\u{1F313}\u{1F314}\u{1F315}\u{1F316}\u{1F317}\u{1F318}\u{1F30D}\u{1F30F}\u{1F30E}\u{1F409}\u2600\u{1F4BB}\u{1F5A5}\u{1F4BE}\u{1F4BF}\u{1F602}\u2764\u{1F60D}\u{1F923}\u{1F60A}\u{1F64F}\u{1F495}\u{1F62D}\u{1F618}\u{1F44D}\u{1F605}\u{1F44F}\u{1F601}\u{1F525}\u{1F970}\u{1F494}\u{1F496}\u{1F499}\u{1F622}\u{1F914}\u{1F606}\u{1F644}\u{1F4AA}\u{1F609}\u263A\u{1F44C}\u{1F917}\u{1F49C}\u{1F614}\u{1F60E}\u{1F607}\u{1F339}\u{1F926}\u{1F389}\u{1F49E}\u270C\u2728\u{1F937}\u{1F631}\u{1F60C}\u{1F338}\u{1F64C}\u{1F60B}\u{1F497}\u{1F49A}\u{1F60F}\u{1F49B}\u{1F642}\u{1F493}\u{1F929}\u{1F604}\u{1F600}\u{1F5A4}\u{1F603}\u{1F4AF}\u{1F648}\u{1F447}\u{1F3B6}\u{1F612}\u{1F92D}\u2763\u{1F61C}\u{1F48B}\u{1F440}\u{1F62A}\u{1F611}\u{1F4A5}\u{1F64B}\u{1F61E}\u{1F629}\u{1F621}\u{1F92A}\u{1F44A}\u{1F973}\u{1F625}\u{1F924}\u{1F449}\u{1F483}\u{1F633}\u270B\u{1F61A}\u{1F61D}\u{1F634}\u{1F31F}\u{1F62C}\u{1F643}\u{1F340}\u{1F337}\u{1F63B}\u{1F613}\u2B50\u2705\u{1F97A}\u{1F308}\u{1F608}\u{1F918}\u{1F4A6}\u2714\u{1F623}\u{1F3C3}\u{1F490}\u2639\u{1F38A}\u{1F498}\u{1F620}\u261D\u{1F615}\u{1F33A}\u{1F382}\u{1F33B}\u{1F610}\u{1F595}\u{1F49D}\u{1F64A}\u{1F639}\u{1F5E3}\u{1F4AB}\u{1F480}\u{1F451}\u{1F3B5}\u{1F91E}\u{1F61B}\u{1F534}\u{1F624}\u{1F33C}\u{1F62B}\u26BD\u{1F919}\u2615\u{1F3C6}\u{1F92B}\u{1F448}\u{1F62E}\u{1F646}\u{1F37B}\u{1F343}\u{1F436}\u{1F481}\u{1F632}\u{1F33F}\u{1F9E1}\u{1F381}\u26A1\u{1F31E}\u{1F388}\u274C\u270A\u{1F44B}\u{1F630}\u{1F928}\u{1F636}\u{1F91D}\u{1F6B6}\u{1F4B0}\u{1F353}\u{1F4A2}\u{1F91F}\u{1F641}\u{1F6A8}\u{1F4A8}\u{1F92C}\u2708\u{1F380}\u{1F37A}\u{1F913}\u{1F619}\u{1F49F}\u{1F331}\u{1F616}\u{1F476}\u{1F974}\u25B6\u27A1\u2753\u{1F48E}\u{1F4B8}\u2B07\u{1F628}\u{1F31A}\u{1F98B}\u{1F637}\u{1F57A}\u26A0\u{1F645}\u{1F61F}\u{1F635}\u{1F44E}\u{1F932}\u{1F920}\u{1F927}\u{1F4CC}\u{1F535}\u{1F485}\u{1F9D0}\u{1F43E}\u{1F352}\u{1F617}\u{1F911}\u{1F30A}\u{1F92F}\u{1F437}\u260E\u{1F4A7}\u{1F62F}\u{1F486}\u{1F446}\u{1F3A4}\u{1F647}\u{1F351}\u2744\u{1F334}\u{1F4A3}\u{1F438}\u{1F48C}\u{1F4CD}\u{1F940}\u{1F922}\u{1F445}\u{1F4A1}\u{1F4A9}\u{1F450}\u{1F4F8}\u{1F47B}\u{1F910}\u{1F92E}\u{1F3BC}\u{1F975}\u{1F6A9}\u{1F34E}\u{1F34A}\u{1F47C}\u{1F48D}\u{1F4E3}\u{1F942}"),ur=Or.reduce((y,n,r)=>(y[r]=n,y),[]),Rr=Or.reduce((y,n,r)=>(y[n.codePointAt(0)]=r,y),[]);function Ar(y){return y.reduce((n,r)=>(n+=ur[r],n),"")}function fi(y){const n=[];for(const r of y){const o=Rr[r.codePointAt(0)];if(o===void 0)throw new Error(`Non-base256emoji character: ${r}`);n.push(o)}return new Uint8Array(n)}const ti=Qi({prefix:"\u{1F680}",name:"base256emoji",encode:Ar,decode:fi});var xi=Object.freeze({__proto__:null,base256emoji:ti}),Ps=Bc,Xi=128,yn=127,bf=~yn,Ef=Math.pow(2,31);function Bc(y,n,r){n=n||[],r=r||0;for(var o=r;y>=Ef;)n[r++]=y&255|Xi,y/=128;for(;y&bf;)n[r++]=y&255|Xi,y>>>=7;return n[r]=y|0,Bc.bytes=r-o+1,n}var xf=Qo,If=128,Hc=127;function Qo(y,o){var r=0,o=o||0,a=0,v=o,I,L=y.length;do{if(v>=L)throw Qo.bytes=0,new RangeError("Could not decode varint");I=y[v++],r+=a<28?(I&Hc)<<a:(I&Hc)*Math.pow(2,a),a+=7}while(I>=If);return Qo.bytes=v-o,r}var Pf=Math.pow(2,7),Sf=Math.pow(2,14),Of=Math.pow(2,21),Rf=Math.pow(2,28),Af=Math.pow(2,35),Cf=Math.pow(2,42),Tf=Math.pow(2,49),Df=Math.pow(2,56),Nf=Math.pow(2,63),Lf=function(y){return y<Pf?1:y<Sf?2:y<Of?3:y<Rf?4:y<Af?5:y<Cf?6:y<Tf?7:y<Df?8:y<Nf?9:10},Ff={encode:Ps,decode:xf,encodingLength:Lf},Vc=Ff;const Kc=(y,n,r=0)=>(Vc.encode(y,n,r),n),kc=y=>Vc.encodingLength(y),Yo=(y,n)=>{const r=n.byteLength,o=kc(y),a=o+kc(r),v=new Uint8Array(a+r);return Kc(y,v,0),Kc(r,v,o),v.set(n,a),new jf(y,r,n,v)};class jf{constructor(n,r,o,a){this.code=n,this.size=r,this.digest=o,this.bytes=a}}const Gc=({name:y,code:n,encode:r})=>new Mf(y,n,r);class Mf{constructor(n,r,o){this.name=n,this.code=r,this.encode=o}digest(n){if(n instanceof Uint8Array){const r=this.encode(n);return r instanceof Uint8Array?Yo(this.code,r):r.then(o=>Yo(this.code,o))}else throw Error("Unknown type, must be binary type")}}const Wc=y=>async n=>new Uint8Array(await crypto.subtle.digest(y,n)),Uf=Gc({name:"sha2-256",code:18,encode:Wc("SHA-256")}),zf=Gc({name:"sha2-512",code:19,encode:Wc("SHA-512")});var qf=Object.freeze({__proto__:null,sha256:Uf,sha512:zf});const Jc=0,$f="identity",Zc=jn;var Bf=Object.freeze({__proto__:null,identity:{code:Jc,name:$f,encode:Zc,digest:y=>Yo(Jc,Zc(y))}});new TextEncoder,new TextDecoder;const Qc={...qo,...Bo,...Vo,...ws,...ko,...Zo,...ee,...ze,...mr,...xi};({...qf,...Bf});function Yc(y){return globalThis.Buffer!=null?new Uint8Array(y.buffer,y.byteOffset,y.byteLength):y}function Hf(y=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?Yc(globalThis.Buffer.allocUnsafe(y)):new Uint8Array(y)}function Xc(y,n,r,o){return{name:y,prefix:n,encoder:{name:y,prefix:n,encode:r},decoder:{decode:o}}}const eu=Xc("utf8","u",y=>"u"+new TextDecoder("utf8").decode(y),y=>new TextEncoder().encode(y.substring(1))),Xo=Xc("ascii","a",y=>{let n="a";for(let r=0;r<y.length;r++)n+=String.fromCharCode(y[r]);return n},y=>{y=y.substring(1);const n=Hf(y.length);for(let r=0;r<y.length;r++)n[r]=y.charCodeAt(r);return n}),Vf={utf8:eu,"utf-8":eu,hex:Qc.base16,latin1:Xo,ascii:Xo,binary:Xo,...Qc};function Kf(y,n="utf8"){const r=Vf[n];if(!r)throw new Error(`Unsupported encoding "${n}"`);return(n==="utf8"||n==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?Yc(globalThis.Buffer.from(y,"utf-8")):r.decoder.decode(`${r.prefix}${y}`)}const tu="wc",kf=2,ea="core",Mi=`${tu}@2:${ea}:`,Gf={name:ea,logger:"error"},Wf={database:":memory:"},Jf="crypto",ru="client_ed25519_seed",Zf=f.ONE_DAY,Qf="keychain",Yf="0.3",Xf="messages",ed="0.3",td=f.SIX_HOURS,rd="publisher",iu="irn",id="error",nu="wss://relay.walletconnect.com",su="wss://relay.walletconnect.org",nd="relayer",yr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},sd="_subscription",Ii={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},od=f.ONE_SECOND,Vw={database:":memory:"},ad="2.10.1",cd=1e4,ud="0.3",hd="WALLETCONNECT_CLIENT_ID",di={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},Kw=null,ld="subscription",fd="0.3",dd=f.FIVE_SECONDS*1e3,pd="pairing",gd="0.3",kw=null,Un={wc_pairingDelete:{req:{ttl:f.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:f.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:f.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:f.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:f.ONE_DAY,prompt:!1,tag:0},res:{ttl:f.ONE_DAY,prompt:!1,tag:0}}},zn={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},pi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},yd="history",vd="0.3",_d="expirer",Kr={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},md="0.3",Gw=null,ta="verify-api",Ss="https://verify.walletconnect.com",ou="https://verify.walletconnect.org";class wd{constructor(n,r){this.core=n,this.logger=r,this.keychain=new Map,this.name=Qf,this.version=Yf,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){const o=await this.getKeyChain();typeof o<"u"&&(this.keychain=o),this.initialized=!0}},this.has=o=>(this.isInitialized(),this.keychain.has(o)),this.set=async(o,a)=>{this.isInitialized(),this.keychain.set(o,a),await this.persist()},this.get=o=>{this.isInitialized();const a=this.keychain.get(o);if(typeof a>"u"){const{message:v}=(0,m.Z7)("NO_MATCHING_KEY",`${this.name}: ${o}`);throw new Error(v)}return a},this.del=async o=>{this.isInitialized(),this.keychain.delete(o),await this.persist()},this.core=n,this.logger=(0,he.generateChildLogger)(r,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setKeyChain(n){await this.core.storage.setItem(this.storageKey,(0,m.KC)(n))}async getKeyChain(){const n=await this.core.storage.getItem(this.storageKey);return typeof n<"u"?(0,m.IP)(n):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class bd{constructor(n,r,o){this.core=n,this.logger=r,this.name=Jf,this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=a=>(this.isInitialized(),this.keychain.has(a)),this.getClientId=async()=>{this.isInitialized();const a=await this.getClientSeed(),v=At(a);return Je(v.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const a=(0,m.Au)();return this.setPrivateKey(a.publicKey,a.privateKey)},this.signJWT=async a=>{this.isInitialized();const v=await this.getClientSeed(),I=At(v),L=(0,m.jd)();return await Ct(L,a,Zf,I)},this.generateSharedKey=(a,v,I)=>{this.isInitialized();const L=this.getPrivateKey(a),K=(0,m.m$)(L,v);return this.setSymKey(K,I)},this.setSymKey=async(a,v)=>{this.isInitialized();const I=v||(0,m.Ym)(a);return await this.keychain.set(I,a),I},this.deleteKeyPair=async a=>{this.isInitialized(),await this.keychain.del(a)},this.deleteSymKey=async a=>{this.isInitialized(),await this.keychain.del(a)},this.encode=async(a,v,I)=>{this.isInitialized();const L=(0,m.EN)(I),K=b(v);if((0,m.Q8)(L)){const Oe=L.senderPublicKey,Qe=L.receiverPublicKey;a=await this.generateSharedKey(Oe,Qe)}const de=this.getSymKey(a),{type:we,senderPublicKey:Ae}=L;return(0,m.HI)({type:we,symKey:de,message:K,senderPublicKey:Ae})},this.decode=async(a,v,I)=>{this.isInitialized();const L=(0,m.Ll)(v,I);if((0,m.Q8)(L)){const K=L.receiverPublicKey,de=L.senderPublicKey;a=await this.generateSharedKey(K,de)}try{const K=this.getSymKey(a),de=(0,m.pe)({symKey:K,encoded:v});return d(de)}catch(K){this.logger.error(`Failed to decode message from topic: '${a}', clientId: '${await this.getClientId()}'`),this.logger.error(K)}},this.getPayloadType=a=>{const v=(0,m.vB)(a);return(0,m.WG)(v.type)},this.getPayloadSenderPublicKey=a=>{const v=(0,m.vB)(a);return v.senderPublicKey?(0,at.BB)(v.senderPublicKey,m.AW):void 0},this.core=n,this.logger=(0,he.generateChildLogger)(r,this.name),this.keychain=o||new wd(this.core,this.logger)}get context(){return(0,he.getLoggerContext)(this.logger)}async setPrivateKey(n,r){return await this.keychain.set(n,r),n}getPrivateKey(n){return this.keychain.get(n)}async getClientSeed(){let n="";try{n=this.keychain.get(ru)}catch{n=(0,m.jd)(),await this.keychain.set(ru,n)}return Kf(n,"base16")}getSymKey(n){return this.keychain.get(n)}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Ed extends Re{constructor(n,r){super(n,r),this.logger=n,this.core=r,this.messages=new Map,this.name=Xf,this.version=ed,this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const o=await this.getRelayerMessages();typeof o<"u"&&(this.messages=o),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(o){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(o)}finally{this.initialized=!0}}},this.set=async(o,a)=>{this.isInitialized();const v=(0,m.rj)(a);let I=this.messages.get(o);return typeof I>"u"&&(I={}),typeof I[v]<"u"||(I[v]=a,this.messages.set(o,I),await this.persist()),v},this.get=o=>{this.isInitialized();let a=this.messages.get(o);return typeof a>"u"&&(a={}),a},this.has=(o,a)=>{this.isInitialized();const v=this.get(o),I=(0,m.rj)(a);return typeof v[I]<"u"},this.del=async o=>{this.isInitialized(),this.messages.delete(o),await this.persist()},this.logger=(0,he.generateChildLogger)(n,this.name),this.core=r}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}async setRelayerMessages(n){await this.core.storage.setItem(this.storageKey,(0,m.KC)(n))}async getRelayerMessages(){const n=await this.core.storage.getItem(this.storageKey);return typeof n<"u"?(0,m.IP)(n):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class xd extends xe{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.events=new B.EventEmitter,this.name=rd,this.queue=new Map,this.publishTimeout=(0,f.toMiliseconds)(f.TEN_SECONDS),this.needsTransportRestart=!1,this.publish=async(o,a,v)=>{var I;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:v}});try{const L=(v==null?void 0:v.ttl)||td,K=(0,m._H)(v),de=(v==null?void 0:v.prompt)||!1,we=(v==null?void 0:v.tag)||0,Ae=(v==null?void 0:v.id)||jt().toString(),Oe={topic:o,message:a,opts:{ttl:L,relay:K,prompt:de,tag:we,id:Ae}},Qe=setTimeout(()=>this.queue.set(Ae,Oe),this.publishTimeout);try{await await(0,m.hF)(this.rpcPublish(o,a,L,K,de,we,Ae),this.publishTimeout,"Failed to publish payload, please try again."),this.removeRequestFromQueue(Ae),this.relayer.events.emit(yr.publish,Oe)}catch(Me){if(this.logger.debug("Publishing Payload stalled"),this.needsTransportRestart=!0,(I=v==null?void 0:v.internal)!=null&&I.throwOnFailedPublish)throw this.removeRequestFromQueue(Ae),Me;return}finally{clearTimeout(Qe)}this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:o,message:a,opts:v}})}catch(L){throw this.logger.debug("Failed to Publish Payload"),this.logger.error(L),L}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.relayer=n,this.logger=(0,he.generateChildLogger)(r,this.name),this.registerEventListeners()}get context(){return(0,he.getLoggerContext)(this.logger)}rpcPublish(n,r,o,a,v,I,L){var K,de,we,Ae;const Oe={method:(0,m.cO)(a.protocol).publish,params:{topic:n,message:r,ttl:o,prompt:v,tag:I},id:L};return(0,m.o8)((K=Oe.params)==null?void 0:K.prompt)&&((de=Oe.params)==null||delete de.prompt),(0,m.o8)((we=Oe.params)==null?void 0:we.tag)&&((Ae=Oe.params)==null||delete Ae.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:Oe}),this.relayer.request(Oe)}removeRequestFromQueue(n){this.queue.delete(n)}checkQueue(){this.queue.forEach(async n=>{const{topic:r,message:o,opts:a}=n;await this.publish(r,o,a)})}registerEventListeners(){this.relayer.core.heartbeat.on(V.HEARTBEAT_EVENTS.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(yr.connection_stalled);return}this.checkQueue()}),this.relayer.on(yr.message_ack,n=>{this.removeRequestFromQueue(n.id.toString())})}}class Id{constructor(){this.map=new Map,this.set=(n,r)=>{const o=this.get(n);this.exists(n,r)||this.map.set(n,[...o,r])},this.get=n=>this.map.get(n)||[],this.exists=(n,r)=>this.get(n).includes(r),this.delete=(n,r)=>{if(typeof r>"u"){this.map.delete(n);return}if(!this.map.has(n))return;const o=this.get(n);if(!this.exists(n,r))return;const a=o.filter(v=>v!==r);if(!a.length){this.map.delete(n);return}this.map.set(n,a)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var Pd=Object.defineProperty,Sd=Object.defineProperties,Od=Object.getOwnPropertyDescriptors,au=Object.getOwnPropertySymbols,Rd=Object.prototype.hasOwnProperty,Ad=Object.prototype.propertyIsEnumerable,cu=(y,n,r)=>n in y?Pd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,qn=(y,n)=>{for(var r in n||(n={}))Rd.call(n,r)&&cu(y,r,n[r]);if(au)for(var r of au(n))Ad.call(n,r)&&cu(y,r,n[r]);return y},ra=(y,n)=>Sd(y,Od(n));class Cd extends tt{constructor(n,r){super(n,r),this.relayer=n,this.logger=r,this.subscriptions=new Map,this.topicMap=new Id,this.events=new B.EventEmitter,this.name=ld,this.version=fd,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=Mi,this.subscribeTimeout=1e4,this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}});try{const v=(0,m._H)(a),I={topic:o,relay:v};this.pending.set(o,I);const L=await this.rpcSubscribe(o,v);return this.onSubscribe(L,I),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:o,opts:a}}),L}catch(v){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(v),v}},this.unsubscribe=async(o,a)=>{await this.restartToComplete(),this.isInitialized(),typeof(a==null?void 0:a.id)<"u"?await this.unsubscribeById(o,a.id,a):await this.unsubscribeByTopic(o,a)},this.isSubscribed=async o=>this.topics.includes(o)?!0:await new Promise((a,v)=>{const I=new f.Watch;I.start(this.pendingSubscriptionWatchLabel);const L=setInterval(()=>{!this.pending.has(o)&&this.topics.includes(o)&&(clearInterval(L),I.stop(this.pendingSubscriptionWatchLabel),a(!0)),I.elapsed(this.pendingSubscriptionWatchLabel)>=dd&&(clearInterval(L),I.stop(this.pendingSubscriptionWatchLabel),v(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=n,this.logger=(0,he.generateChildLogger)(r,this.name),this.clientId=""}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(n,r){let o=!1;try{o=this.getSubscription(n).topic===r}catch{}return o}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(n,r){const o=this.topicMap.get(n);await Promise.all(o.map(async a=>await this.unsubscribeById(n,a,r)))}async unsubscribeById(n,r,o){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:r,opts:o}});try{const a=(0,m._H)(o);await this.rpcUnsubscribe(n,r,a);const v=(0,m.D6)("USER_DISCONNECTED",`${this.name}, ${n}`);await this.onUnsubscribe(n,r,v),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:n,id:r,opts:o}})}catch(a){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(a),a}}async rpcSubscribe(n,r){const o={method:(0,m.cO)(r.protocol).subscribe,params:{topic:n}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{await await(0,m.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(yr.connection_stalled)}return(0,m.rj)(n+this.clientId)}async rpcBatchSubscribe(n){if(!n.length)return;const r=n[0].relay,o={method:(0,m.cO)(r.protocol).batchSubscribe,params:{topics:n.map(a=>a.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:o});try{return await await(0,m.hF)(this.relayer.request(o),this.subscribeTimeout)}catch{this.logger.debug("Outgoing Relay Payload stalled"),this.relayer.events.emit(yr.connection_stalled)}}rpcUnsubscribe(n,r,o){const a={method:(0,m.cO)(o.protocol).unsubscribe,params:{topic:n,id:r}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:a}),this.relayer.request(a)}onSubscribe(n,r){this.setSubscription(n,ra(qn({},r),{id:n})),this.pending.delete(r.topic)}onBatchSubscribe(n){n.length&&n.forEach(r=>{this.setSubscription(r.id,qn({},r)),this.pending.delete(r.topic)})}async onUnsubscribe(n,r,o){this.events.removeAllListeners(r),this.hasSubscription(r,n)&&this.deleteSubscription(r,o),await this.relayer.messages.del(n)}async setRelayerSubscriptions(n){await this.relayer.core.storage.setItem(this.storageKey,n)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(n,r){this.subscriptions.has(n)||(this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:n,subscription:r}),this.addSubscription(n,r))}addSubscription(n,r){this.subscriptions.set(n,qn({},r)),this.topicMap.set(r.topic,n),this.events.emit(di.created,r)}getSubscription(n){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:n});const r=this.subscriptions.get(n);if(!r){const{message:o}=(0,m.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return r}deleteSubscription(n,r){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:n,reason:r});const o=this.getSubscription(n);this.subscriptions.delete(n),this.topicMap.delete(o.topic,n),this.events.emit(di.deleted,ra(qn({},o),{reason:r}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(di.sync)}async reset(){if(this.cached.length){const n=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let r=0;r<n;r++){const o=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchSubscribe(o)}}this.events.emit(di.resubscribed)}async restore(){try{const n=await this.getRelayerSubscriptions();if(typeof n>"u"||!n.length)return;if(this.subscriptions.size){const{message:r}=(0,m.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(n){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(n)}}async batchSubscribe(n){if(!n.length)return;const r=await this.rpcBatchSubscribe(n);(0,m.qt)(r)&&this.onBatchSubscribe(r.map((o,a)=>ra(qn({},n[a]),{id:o})))}async onConnect(){this.restartInProgress||(await this.restart(),this.onEnable())}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||this.relayer.transportExplicitlyClosed)return;const n=[];this.pending.forEach(r=>{n.push(r)}),await this.batchSubscribe(n)}registerEventListeners(){this.relayer.core.heartbeat.on(V.HEARTBEAT_EVENTS.pulse,async()=>{await this.checkPending()}),this.relayer.on(yr.connect,async()=>{await this.onConnect()}),this.relayer.on(yr.disconnect,()=>{this.onDisconnect()}),this.events.on(di.created,async n=>{const r=di.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),await this.persist()}),this.events.on(di.deleted,async n=>{const r=di.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}async restartToComplete(){this.restartInProgress&&await new Promise(n=>{const r=setInterval(()=>{this.restartInProgress||(clearInterval(r),n())},this.pollingInterval)})}}var Td=Object.defineProperty,uu=Object.getOwnPropertySymbols,Dd=Object.prototype.hasOwnProperty,Nd=Object.prototype.propertyIsEnumerable,hu=(y,n,r)=>n in y?Td(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,Ld=(y,n)=>{for(var r in n||(n={}))Dd.call(n,r)&&hu(y,r,n[r]);if(uu)for(var r of uu(n))Nd.call(n,r)&&hu(y,r,n[r]);return y};class Fd extends Te{constructor(n){super(n),this.protocol="wc",this.version=2,this.events=new B.EventEmitter,this.name=nd,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","socket stalled"],this.hasExperiencedNetworkDisruption=!1,this.request=async r=>{this.logger.debug("Publishing Request Payload");try{return await this.toEstablishConnection(),await this.provider.request(r)}catch(o){throw this.logger.debug("Failed to Publish Request"),this.logger.error(o),o}},this.onPayloadHandler=r=>{this.onProviderPayload(r)},this.onConnectHandler=()=>{this.events.emit(yr.connect)},this.onDisconnectHandler=()=>{this.onProviderDisconnect()},this.onProviderErrorHandler=r=>{this.logger.error(r),this.events.emit(yr.error,r),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Ii.payload,this.onPayloadHandler),this.provider.on(Ii.connect,this.onConnectHandler),this.provider.on(Ii.disconnect,this.onDisconnectHandler),this.provider.on(Ii.error,this.onProviderErrorHandler)},this.core=n.core,this.logger=typeof n.logger<"u"&&typeof n.logger!="string"?(0,he.generateChildLogger)(n.logger,this.name):(0,he.pino)((0,he.getDefaultLoggerOptions)({level:n.logger||id})),this.messages=new Ed(this.logger,n.core),this.subscriber=new Cd(this,this.logger),this.publisher=new xd(this,this.logger),this.relayUrl=(n==null?void 0:n.relayUrl)||nu,this.projectId=n.projectId,this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await this.createProvider(),await Promise.all([this.messages.init(),this.subscriber.init()]);try{await this.transportOpen()}catch{this.logger.warn(`Connection via ${this.relayUrl} failed, attempting to connect via failover domain ${su}...`),await this.restartTransport(su)}this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},cd)}get context(){return(0,he.getLoggerContext)(this.logger)}get connected(){return this.provider.connection.connected}get connecting(){return this.provider.connection.connecting}async publish(n,r,o){this.isInitialized(),await this.publisher.publish(n,r,o),await this.recordMessageEvent({topic:n,message:r,publishedAt:Date.now()})}async subscribe(n,r){var o;this.isInitialized();let a=((o=this.subscriber.topicMap.get(n))==null?void 0:o[0])||"";return a||(await Promise.all([new Promise(v=>{this.subscriber.once(di.created,I=>{I.topic===n&&v()})}),new Promise(async v=>{a=await this.subscriber.subscribe(n,r),v()})]),a)}async unsubscribe(n,r){this.isInitialized(),await this.subscriber.unsubscribe(n,r)}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}off(n,r){this.events.off(n,r)}removeListener(n,r){this.events.removeListener(n,r)}async transportClose(){this.transportExplicitlyClosed=!0,this.hasExperiencedNetworkDisruption&&this.connected?await(0,m.hF)(this.provider.disconnect(),1e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.connected&&await this.provider.disconnect()}async transportOpen(n){if(this.transportExplicitlyClosed=!1,await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress){n&&n!==this.relayUrl&&(this.relayUrl=n,await this.transportClose(),await this.createProvider()),this.connectionAttemptInProgress=!0;try{await Promise.all([new Promise(r=>{if(!this.initialized)return r();this.subscriber.once(di.resubscribed,()=>{r()})}),new Promise(async(r,o)=>{try{await(0,m.hF)(this.provider.connect(),1e4,`Socket stalled when trying to connect to ${this.relayUrl}`)}catch(a){o(a);return}r()})])}catch(r){this.logger.error(r);const o=r;if(!this.isConnectionStalled(o.message))throw r;this.provider.events.emit(Ii.disconnect)}finally{this.connectionAttemptInProgress=!1,this.hasExperiencedNetworkDisruption=!1}}}async restartTransport(n){await this.confirmOnlineStateOrThrow(),!this.connectionAttemptInProgress&&(this.relayUrl=n||this.relayUrl,await this.transportClose(),await this.createProvider(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await(0,m.Gg)())throw new Error("No internet connection detected. Please restart your network and try again.")}isConnectionStalled(n){return this.staleConnectionErrors.some(r=>n.includes(r))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const n=await this.core.crypto.signJWT(this.relayUrl);this.provider=new ui(new To((0,m.$0)({sdkVersion:ad,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:n,useOnCloseEvent:!0}))),this.registerProviderListeners()}async recordMessageEvent(n){const{topic:r,message:o}=n;await this.messages.set(r,o)}async shouldIgnoreMessageEvent(n){const{topic:r,message:o}=n;if(!o||o.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${o}`),!0;if(!await this.subscriber.isSubscribed(r))return this.logger.debug(`Ignoring message for non-subscribed topic ${r}`),!0;const a=this.messages.has(r,o);return a&&this.logger.debug(`Ignoring duplicate message: ${o}`),a}async onProviderPayload(n){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:n}),Fn(n)){if(!n.method.endsWith(sd))return;const r=n.params,{topic:o,message:a,publishedAt:v}=r.data,I={topic:o,message:a,publishedAt:v};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(Ld({type:"event",event:r.id},I)),this.events.emit(r.id,I),await this.acknowledgePayload(n),await this.onMessageEvent(I)}else fn(n)&&this.events.emit(yr.message_ack,n)}async onMessageEvent(n){await this.shouldIgnoreMessageEvent(n)||(this.events.emit(yr.message,n),await this.recordMessageEvent(n))}async acknowledgePayload(n){const r=Nt(n.id,!0);await this.provider.connection.send(r)}unregisterProviderListeners(){this.provider.off(Ii.payload,this.onPayloadHandler),this.provider.off(Ii.connect,this.onConnectHandler),this.provider.off(Ii.disconnect,this.onDisconnectHandler),this.provider.off(Ii.error,this.onProviderErrorHandler)}async registerEventListeners(){this.events.on(yr.connection_stalled,()=>{this.restartTransport().catch(r=>this.logger.error(r))});let n=await(0,m.Gg)();(0,m.uw)(async r=>{this.initialized&&n!==r&&(n=r,r?await this.restartTransport().catch(o=>this.logger.error(o)):(this.hasExperiencedNetworkDisruption=!0,await this.transportClose().catch(o=>this.logger.error(o))))})}onProviderDisconnect(){this.events.emit(yr.disconnect),this.attemptToReconnect()}attemptToReconnect(){this.transportExplicitlyClosed||(this.logger.info("attemptToReconnect called. Connecting..."),setTimeout(async()=>{await this.restartTransport().catch(n=>this.logger.error(n))},(0,f.toMiliseconds)(od)))}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}async toEstablishConnection(){if(await this.confirmOnlineStateOrThrow(),!this.connected){if(this.connectionAttemptInProgress)return await new Promise(n=>{const r=setInterval(()=>{this.connected&&(clearInterval(r),n())},this.connectionStatusPollingInterval)});await this.restartTransport()}}}var jd=Object.defineProperty,lu=Object.getOwnPropertySymbols,Md=Object.prototype.hasOwnProperty,Ud=Object.prototype.propertyIsEnumerable,fu=(y,n,r)=>n in y?jd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,du=(y,n)=>{for(var r in n||(n={}))Md.call(n,r)&&fu(y,r,n[r]);if(lu)for(var r of lu(n))Ud.call(n,r)&&fu(y,r,n[r]);return y};class Os extends ce{constructor(n,r,o,a=Mi,v=void 0){super(n,r,o,a),this.core=n,this.logger=r,this.name=o,this.map=new Map,this.version=ud,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(I=>{this.getKey&&I!==null&&!(0,m.o8)(I)?this.map.set(this.getKey(I),I):(0,m.xW)(I)?this.map.set(I.id,I):(0,m.h1)(I)&&this.map.set(I.topic,I)}),this.cached=[],this.initialized=!0)},this.set=async(I,L)=>{this.isInitialized(),this.map.has(I)?await this.update(I,L):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:I,value:L}),this.map.set(I,L),await this.persist())},this.get=I=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:I}),this.getData(I)),this.getAll=I=>(this.isInitialized(),I?this.values.filter(L=>Object.keys(I).every(K=>pn()(L[K],I[K]))):this.values),this.update=async(I,L)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:I,update:L});const K=du(du({},this.getData(I)),L);this.map.set(I,K),await this.persist()},this.delete=async(I,L)=>{this.isInitialized(),this.map.has(I)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:I,reason:L}),this.map.delete(I),await this.persist())},this.logger=(0,he.generateChildLogger)(r,this.name),this.storagePrefix=a,this.getKey=v}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}async setDataStore(n){await this.core.storage.setItem(this.storageKey,n)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(n){const r=this.map.get(n);if(!r){const{message:o}=(0,m.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return r}async persist(){await this.setDataStore(this.values)}async restore(){try{const n=await this.getDataStore();if(typeof n>"u"||!n.length)return;if(this.map.size){const{message:r}=(0,m.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(n){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(n)}}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class zd{constructor(n,r){this.core=n,this.logger=r,this.name=pd,this.version=gd,this.events=new(ae()),this.initialized=!1,this.storagePrefix=Mi,this.ignoredPayloadTypes=[m.rV],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:o})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...o])]},this.create=async()=>{this.isInitialized();const o=(0,m.jd)(),a=await this.core.crypto.setSymKey(o),v=(0,m.gn)(f.FIVE_MINUTES),I={protocol:iu},L={topic:a,expiry:v,relay:I,active:!1},K=(0,m.Bv)({protocol:this.core.protocol,version:this.core.version,topic:a,symKey:o,relay:I});return await this.pairings.set(a,L),await this.core.relayer.subscribe(a),this.core.expirer.set(a,v),{topic:a,uri:K}},this.pair=async o=>{this.isInitialized(),this.isValidPair(o);const{topic:a,symKey:v,relay:I}=(0,m.he)(o.uri);let L;if(this.pairings.keys.includes(a)&&(L=this.pairings.get(a),L.active))throw new Error(`Pairing already exists: ${a}. Please try again with a new connection URI.`);this.core.crypto.keychain.has(a)||(await this.core.crypto.setSymKey(v,a),await this.core.relayer.subscribe(a,{relay:I}));const K=(0,m.gn)(f.FIVE_MINUTES),de={topic:a,relay:I,expiry:K,active:!1};return await this.pairings.set(a,de),this.core.expirer.set(a,K),o.activatePairing&&await this.activate({topic:a}),this.events.emit(zn.create,de),de},this.activate=async({topic:o})=>{this.isInitialized();const a=(0,m.gn)(f.THIRTY_DAYS);await this.pairings.update(o,{active:!0,expiry:a}),this.core.expirer.set(o,a)},this.ping=async o=>{this.isInitialized(),await this.isValidPing(o);const{topic:a}=o;if(this.pairings.keys.includes(a)){const v=await this.sendRequest(a,"wc_pairingPing",{}),{done:I,resolve:L,reject:K}=(0,m.H1)();this.events.once((0,m.E0)("pairing_ping",v),({error:de})=>{de?K(de):L()}),await I()}},this.updateExpiry=async({topic:o,expiry:a})=>{this.isInitialized(),await this.pairings.update(o,{expiry:a})},this.updateMetadata=async({topic:o,metadata:a})=>{this.isInitialized(),await this.pairings.update(o,{peerMetadata:a})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async o=>{this.isInitialized(),await this.isValidDisconnect(o);const{topic:a}=o;this.pairings.keys.includes(a)&&(await this.sendRequest(a,"wc_pairingDelete",(0,m.D6)("USER_DISCONNECTED")),await this.deletePairing(a))},this.sendRequest=async(o,a,v)=>{const I=vt(a,v),L=await this.core.crypto.encode(o,I),K=Un[a].req;return this.core.history.set(o,I),this.core.relayer.publish(o,L,K),I.id},this.sendResult=async(o,a,v)=>{const I=Nt(o,v),L=await this.core.crypto.encode(a,I),K=await this.core.history.get(a,o),de=Un[K.request.method].res;await this.core.relayer.publish(a,L,de),await this.core.history.resolve(I)},this.sendError=async(o,a,v)=>{const I=Ot(o,v),L=await this.core.crypto.encode(a,I),K=await this.core.history.get(a,o),de=Un[K.request.method]?Un[K.request.method].res:Un.unregistered_method.res;await this.core.relayer.publish(a,L,de),await this.core.history.resolve(I)},this.deletePairing=async(o,a)=>{await this.core.relayer.unsubscribe(o),await Promise.all([this.pairings.delete(o,(0,m.D6)("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(o),a?Promise.resolve():this.core.expirer.del(o)])},this.cleanup=async()=>{const o=this.pairings.getAll().filter(a=>(0,m.Bw)(a.expiry));await Promise.all(o.map(a=>this.deletePairing(a.topic)))},this.onRelayEventRequest=o=>{const{topic:a,payload:v}=o;switch(v.method){case"wc_pairingPing":return this.onPairingPingRequest(a,v);case"wc_pairingDelete":return this.onPairingDeleteRequest(a,v);default:return this.onUnknownRpcMethodRequest(a,v)}},this.onRelayEventResponse=async o=>{const{topic:a,payload:v}=o,I=(await this.core.history.get(a,v.id)).request.method;switch(I){case"wc_pairingPing":return this.onPairingPingResponse(a,v);default:return this.onUnknownRpcMethodResponse(I)}},this.onPairingPingRequest=async(o,a)=>{const{id:v}=a;try{this.isValidPing({topic:o}),await this.sendResult(v,o,!0),this.events.emit(zn.ping,{id:v,topic:o})}catch(I){await this.sendError(v,o,I),this.logger.error(I)}},this.onPairingPingResponse=(o,a)=>{const{id:v}=a;setTimeout(()=>{fr(a)?this.events.emit((0,m.E0)("pairing_ping",v),{}):jr(a)&&this.events.emit((0,m.E0)("pairing_ping",v),{error:a.error})},500)},this.onPairingDeleteRequest=async(o,a)=>{const{id:v}=a;try{this.isValidDisconnect({topic:o}),await this.deletePairing(o),this.events.emit(zn.delete,{id:v,topic:o})}catch(I){await this.sendError(v,o,I),this.logger.error(I)}},this.onUnknownRpcMethodRequest=async(o,a)=>{const{id:v,method:I}=a;try{if(this.registeredMethods.includes(I))return;const L=(0,m.D6)("WC_METHOD_UNSUPPORTED",I);await this.sendError(v,o,L),this.logger.error(L)}catch(L){await this.sendError(v,o,L),this.logger.error(L)}},this.onUnknownRpcMethodResponse=o=>{this.registeredMethods.includes(o)||this.logger.error((0,m.D6)("WC_METHOD_UNSUPPORTED",o))},this.isValidPair=o=>{if(!(0,m.EJ)(o)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`pair() params: ${o}`);throw new Error(a)}if(!(0,m.jv)(o.uri)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`pair() uri: ${o.uri}`);throw new Error(a)}},this.isValidPing=async o=>{if(!(0,m.EJ)(o)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`ping() params: ${o}`);throw new Error(v)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidDisconnect=async o=>{if(!(0,m.EJ)(o)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`disconnect() params: ${o}`);throw new Error(v)}const{topic:a}=o;await this.isValidPairingTopic(a)},this.isValidPairingTopic=async o=>{if(!(0,m.M_)(o,!1)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${o}`);throw new Error(a)}if(!this.pairings.keys.includes(o)){const{message:a}=(0,m.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${o}`);throw new Error(a)}if((0,m.Bw)(this.pairings.get(o).expiry)){await this.deletePairing(o);const{message:a}=(0,m.Z7)("EXPIRED",`pairing topic: ${o}`);throw new Error(a)}},this.core=n,this.logger=(0,he.generateChildLogger)(r,this.name),this.pairings=new Os(this.core,this.logger,this.name,this.storagePrefix)}get context(){return(0,he.getLoggerContext)(this.logger)}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}registerRelayerEvents(){this.core.relayer.on(yr.message,async n=>{const{topic:r,message:o}=n;if(!this.pairings.keys.includes(r)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(o)))return;const a=await this.core.crypto.decode(r,o);try{Fn(a)?(this.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fn(a)&&(await this.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.core.history.delete(r,a.id))}catch(v){this.logger.error(v)}})}registerExpirerEvents(){this.core.expirer.on(Kr.expired,async n=>{const{topic:r}=(0,m.iP)(n.target);r&&this.pairings.keys.includes(r)&&(await this.deletePairing(r,!0),this.events.emit(zn.expire,{topic:r}))})}}class qd extends le{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.records=new Map,this.events=new B.EventEmitter,this.name=yd,this.version=vd,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.records.set(o.id,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(o,a,v)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:o,request:a,chainId:v}),this.records.has(a.id))return;const I={id:a.id,topic:o,request:{method:a.method,params:a.params||null},chainId:v,expiry:(0,m.gn)(f.THIRTY_DAYS)};this.records.set(I.id,I),this.events.emit(pi.created,I)},this.resolve=async o=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:o}),!this.records.has(o.id))return;const a=await this.getRecord(o.id);typeof a.response>"u"&&(a.response=jr(o)?{error:o.error}:{result:o.result},this.records.set(a.id,a),this.events.emit(pi.updated,a))},this.get=async(o,a)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:o,id:a}),await this.getRecord(a)),this.delete=(o,a)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:a}),this.values.forEach(v=>{if(v.topic===o){if(typeof a<"u"&&v.id!==a)return;this.records.delete(v.id),this.events.emit(pi.deleted,v)}})},this.exists=async(o,a)=>(this.isInitialized(),this.records.has(a)?(await this.getRecord(a)).topic===o:!1),this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,he.generateChildLogger)(r,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const n=[];return this.values.forEach(r=>{if(typeof r.response<"u")return;const o={topic:r.topic,request:vt(r.request.method,r.request.params,r.id),chainId:r.chainId};return n.push(o)}),n}async setJsonRpcRecords(n){await this.core.storage.setItem(this.storageKey,n)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(n){this.isInitialized();const r=this.records.get(n);if(!r){const{message:o}=(0,m.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw new Error(o)}return r}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(pi.sync)}async restore(){try{const n=await this.getJsonRpcRecords();if(typeof n>"u"||!n.length)return;if(this.records.size){const{message:r}=(0,m.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(n){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(n)}}registerEventListeners(){this.events.on(pi.created,n=>{const r=pi.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.events.on(pi.updated,n=>{const r=pi.updated;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.events.on(pi.deleted,n=>{const r=pi.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,record:n}),this.persist()}),this.core.heartbeat.on(V.HEARTBEAT_EVENTS.pulse,()=>{this.cleanup()})}cleanup(){try{this.records.forEach(n=>{(0,f.toMiliseconds)(n.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${n.id}`),this.delete(n.topic,n.id))})}catch(n){this.logger.warn(n)}}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class $d extends Se{constructor(n,r){super(n,r),this.core=n,this.logger=r,this.expirations=new Map,this.events=new B.EventEmitter,this.name=_d,this.version=md,this.cached=[],this.initialized=!1,this.storagePrefix=Mi,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(o=>this.expirations.set(o.target,o)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=o=>{try{const a=this.formatTarget(o);return typeof this.getExpiration(a)<"u"}catch{return!1}},this.set=(o,a)=>{this.isInitialized();const v=this.formatTarget(o),I={target:v,expiry:a};this.expirations.set(v,I),this.checkExpiry(v,I),this.events.emit(Kr.created,{target:v,expiration:I})},this.get=o=>{this.isInitialized();const a=this.formatTarget(o);return this.getExpiration(a)},this.del=o=>{if(this.isInitialized(),this.has(o)){const a=this.formatTarget(o),v=this.getExpiration(a);this.expirations.delete(a),this.events.emit(Kr.deleted,{target:a,expiration:v})}},this.on=(o,a)=>{this.events.on(o,a)},this.once=(o,a)=>{this.events.once(o,a)},this.off=(o,a)=>{this.events.off(o,a)},this.removeListener=(o,a)=>{this.events.removeListener(o,a)},this.logger=(0,he.generateChildLogger)(r,this.name)}get context(){return(0,he.getLoggerContext)(this.logger)}get storageKey(){return this.storagePrefix+this.version+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(n){if(typeof n=="string")return(0,m.Z4)(n);if(typeof n=="number")return(0,m.Gq)(n);const{message:r}=(0,m.Z7)("UNKNOWN_TYPE",`Target type: ${typeof n}`);throw new Error(r)}async setExpirations(n){await this.core.storage.setItem(this.storageKey,n)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Kr.sync)}async restore(){try{const n=await this.getExpirations();if(typeof n>"u"||!n.length)return;if(this.expirations.size){const{message:r}=(0,m.Z7)("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(r),new Error(r)}this.cached=n,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(n){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(n)}}getExpiration(n){const r=this.expirations.get(n);if(!r){const{message:o}=(0,m.Z7)("NO_MATCHING_KEY",`${this.name}: ${n}`);throw this.logger.error(o),new Error(o)}return r}checkExpiry(n,r){const{expiry:o}=r;(0,f.toMiliseconds)(o)-Date.now()<=0&&this.expire(n,r)}expire(n,r){this.expirations.delete(n),this.events.emit(Kr.expired,{target:n,expiration:r})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((n,r)=>this.checkExpiry(r,n))}registerEventListeners(){this.core.heartbeat.on(V.HEARTBEAT_EVENTS.pulse,()=>this.checkExpirations()),this.events.on(Kr.created,n=>{const r=Kr.created;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()}),this.events.on(Kr.expired,n=>{const r=Kr.expired;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()}),this.events.on(Kr.deleted,n=>{const r=Kr.deleted;this.logger.info(`Emitting ${r}`),this.logger.debug({type:"event",event:r,data:n}),this.persist()})}isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}}}class Bd extends X{constructor(n,r){super(n,r),this.projectId=n,this.logger=r,this.name=ta,this.initialized=!1,this.queue=[],this.verifyDisabled=!1,this.init=async o=>{if(this.verifyDisabled||(0,m.b$)()||!(0,m.jU)())return;const a=(o==null?void 0:o.verifyUrl)||Ss;this.verifyUrl!==a&&this.removeIframe(),this.verifyUrl=a;try{await this.createIframe()}catch(v){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(v)}if(!this.initialized){this.removeIframe(),this.verifyUrl=ou;try{await this.createIframe()}catch(v){this.logger.info(`Verify iframe failed to load: ${this.verifyUrl}`),this.logger.info(v),this.verifyDisabled=!0}}},this.register=async o=>{this.initialized?this.sendPost(o.attestationId):(this.addToQueue(o.attestationId),await this.init())},this.resolve=async o=>{if(this.isDevEnv)return"";const a=(o==null?void 0:o.verifyUrl)||Ss;let v;try{v=await this.fetchAttestation(o.attestationId,a)}catch(I){this.logger.info(`failed to resolve attestation: ${o.attestationId} from url: ${a}`),this.logger.info(I),v=await this.fetchAttestation(o.attestationId,ou)}return v},this.fetchAttestation=async(o,a)=>{this.logger.info(`resolving attestation: ${o} from url: ${a}`);const v=this.startAbortTimer(f.ONE_SECOND*2),I=await fetch(`${a}/attestation/${o}`,{signal:this.abortController.signal});return clearTimeout(v),I.status===200?await I.json():void 0},this.addToQueue=o=>{this.queue.push(o)},this.processQueue=()=>{this.queue.length!==0&&(this.queue.forEach(o=>this.sendPost(o)),this.queue=[])},this.sendPost=o=>{var a;try{if(!this.iframe)return;(a=this.iframe.contentWindow)==null||a.postMessage(o,"*"),this.logger.info(`postMessage sent: ${o} ${this.verifyUrl}`)}catch{}},this.createIframe=async()=>{let o;const a=v=>{v.data==="verify_ready"&&(this.initialized=!0,this.processQueue(),window.removeEventListener("message",a),o())};await Promise.race([new Promise(v=>{if(document.getElementById(ta))return v();window.addEventListener("message",a);const I=document.createElement("iframe");I.id=ta,I.src=`${this.verifyUrl}/${this.projectId}`,I.style.display="none",document.body.append(I),this.iframe=I,o=v}),new Promise((v,I)=>setTimeout(()=>{window.removeEventListener("message",a),I("verify iframe load timeout")},(0,f.toMiliseconds)(f.FIVE_SECONDS)))])},this.removeIframe=()=>{this.iframe&&(this.iframe.remove(),this.iframe=void 0,this.initialized=!1)},this.logger=(0,he.generateChildLogger)(r,this.name),this.verifyUrl=Ss,this.abortController=new AbortController,this.isDevEnv=(0,m.UG)()&&{NODE_ENV:"production",PUBLIC_PATH:"/"}.IS_VITEST}get context(){return(0,he.getLoggerContext)(this.logger)}startAbortTimer(n){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),(0,f.toMiliseconds)(n))}}var Hd=Object.defineProperty,pu=Object.getOwnPropertySymbols,Vd=Object.prototype.hasOwnProperty,Kd=Object.prototype.propertyIsEnumerable,gu=(y,n,r)=>n in y?Hd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,yu=(y,n)=>{for(var r in n||(n={}))Vd.call(n,r)&&gu(y,r,n[r]);if(pu)for(var r of pu(n))Kd.call(n,r)&&gu(y,r,n[r]);return y};class ia extends te{constructor(n){super(n),this.protocol=tu,this.version=kf,this.name=ea,this.events=new B.EventEmitter,this.initialized=!1,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.projectId=n==null?void 0:n.projectId,this.relayUrl=(n==null?void 0:n.relayUrl)||nu;const r=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:(n==null?void 0:n.logger)||Gf.logger}));this.logger=(0,he.generateChildLogger)(r,this.name),this.heartbeat=new V.HeartBeat,this.crypto=new bd(this,this.logger,n==null?void 0:n.keychain),this.history=new qd(this,this.logger),this.expirer=new $d(this,this.logger),this.storage=n!=null&&n.storage?n.storage:new pe.ZP(yu(yu({},Wf),n==null?void 0:n.storageOptions)),this.relayer=new Fd({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new zd(this,this.logger),this.verify=new Bd(this.projectId||"",this.logger)}static async init(n){const r=new ia(n);await r.initialize();const o=await r.crypto.getClientId();return await r.storage.setItem(hd,o),r}get context(){return(0,he.getLoggerContext)(this.logger)}async start(){this.initialized||await this.initialize()}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(n){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,n),this.logger.error(n.message),n}}}const kd=ia,vu="wc",_u=2,mu="client",na=`${vu}@${_u}:${mu}:`,sa={name:mu,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},Ww={session_proposal:"session_proposal",session_update:"session_update",session_extend:"session_extend",session_ping:"session_ping",session_delete:"session_delete",session_expire:"session_expire",session_request:"session_request",session_request_sent:"session_request_sent",session_event:"session_event",proposal_expire:"proposal_expire"},Jw={database:":memory:"},wu="WALLETCONNECT_DEEPLINK_CHOICE",Zw={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},Qw="history",Yw="0.3",Gd="proposal",Xw=null,bu="Proposal expired",Wd="session",Rs=f.SEVEN_DAYS,Jd="engine",$n={wc_sessionPropose:{req:{ttl:f.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:f.FIVE_MINUTES,prompt:!1,tag:1101}},wc_sessionSettle:{req:{ttl:f.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:f.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:f.ONE_DAY,prompt:!1,tag:1104},res:{ttl:f.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:f.ONE_DAY,prompt:!1,tag:1106},res:{ttl:f.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:f.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:f.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:f.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:f.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:f.ONE_DAY,prompt:!1,tag:1112},res:{ttl:f.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:f.THIRTY_SECONDS,prompt:!1,tag:1114},res:{ttl:f.THIRTY_SECONDS,prompt:!1,tag:1115}}},oa={min:f.FIVE_MINUTES,max:f.SEVEN_DAYS},Pi={idle:"IDLE",active:"ACTIVE"},Zd="request",Qd=["wc_sessionPropose","wc_sessionRequest","wc_authRequest"];var Yd=Object.defineProperty,Xd=Object.defineProperties,ep=Object.getOwnPropertyDescriptors,Eu=Object.getOwnPropertySymbols,tp=Object.prototype.hasOwnProperty,rp=Object.prototype.propertyIsEnumerable,xu=(y,n,r)=>n in y?Yd(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,Cr=(y,n)=>{for(var r in n||(n={}))tp.call(n,r)&&xu(y,r,n[r]);if(Eu)for(var r of Eu(n))rp.call(n,r)&&xu(y,r,n[r]);return y},Bn=(y,n)=>Xd(y,ep(n));class ip extends Z{constructor(n){super(n),this.name=Jd,this.events=new(ae()),this.initialized=!1,this.ignoredPayloadTypes=[m.rV],this.requestQueue={state:Pi.idle,queue:[]},this.sessionRequestQueue={state:Pi.idle,queue:[]},this.requestQueueDelay=f.ONE_SECOND,this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys($n)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},(0,f.toMiliseconds)(this.requestQueueDelay)))},this.connect=async r=>{await this.isInitialized();const o=Bn(Cr({},r),{requiredNamespaces:r.requiredNamespaces||{},optionalNamespaces:r.optionalNamespaces||{}});await this.isValidConnect(o);const{pairingTopic:a,requiredNamespaces:v,optionalNamespaces:I,sessionProperties:L,relays:K}=o;let de=a,we,Ae=!1;if(de&&(Ae=this.client.core.pairing.pairings.get(de).active),!de||!Ae){const{topic:ot,uri:Ye}=await this.client.core.pairing.create();de=ot,we=Ye}const Oe=await this.client.core.crypto.generateKeyPair(),Qe=Cr({requiredNamespaces:v,optionalNamespaces:I,relays:K??[{protocol:iu}],proposer:{publicKey:Oe,metadata:this.client.metadata}},L&&{sessionProperties:L}),{reject:Me,resolve:mt,done:Et}=(0,m.H1)(f.FIVE_MINUTES,bu);if(this.events.once((0,m.E0)("session_connect"),async({error:ot,session:Ye})=>{if(ot)Me(ot);else if(Ye){Ye.self.publicKey=Oe;const It=Bn(Cr({},Ye),{requiredNamespaces:Ye.requiredNamespaces,optionalNamespaces:Ye.optionalNamespaces});await this.client.session.set(Ye.topic,It),await this.setExpiry(Ye.topic,Ye.expiry),de&&await this.client.core.pairing.updateMetadata({topic:de,metadata:Ye.peer.metadata}),mt(It)}}),!de){const{message:ot}=(0,m.Z7)("NO_MATCHING_KEY",`connect() pairing topic: ${de}`);throw new Error(ot)}const xt=await this.sendRequest({topic:de,method:"wc_sessionPropose",params:Qe}),wr=(0,m.gn)(f.FIVE_MINUTES);return await this.setProposal(xt,Cr({id:xt,expiry:wr},Qe)),{uri:we,approval:Et}},this.pair=async r=>(await this.isInitialized(),await this.client.core.pairing.pair(r)),this.approve=async r=>{await this.isInitialized(),await this.isValidApprove(r);const{id:o,relayProtocol:a,namespaces:v,sessionProperties:I}=r,L=this.client.proposal.get(o);let{pairingTopic:K,proposer:de,requiredNamespaces:we,optionalNamespaces:Ae}=L;K=K||"",(0,m.L5)(we)||(we=(0,m.fc)(v,"approve()"));const Oe=await this.client.core.crypto.generateKeyPair(),Qe=de.publicKey,Me=await this.client.core.crypto.generateSharedKey(Oe,Qe);K&&o&&(await this.client.core.pairing.updateMetadata({topic:K,metadata:de.metadata}),await this.sendResult({id:o,topic:K,result:{relay:{protocol:a??"irn"},responderPublicKey:Oe}}),await this.client.proposal.delete(o,(0,m.D6)("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:K}));const mt=Cr({relay:{protocol:a??"irn"},namespaces:v,requiredNamespaces:we,optionalNamespaces:Ae,pairingTopic:K,controller:{publicKey:Oe,metadata:this.client.metadata},expiry:(0,m.gn)(Rs)},I&&{sessionProperties:I});await this.client.core.relayer.subscribe(Me),await this.sendRequest({topic:Me,method:"wc_sessionSettle",params:mt,throwOnFailedPublish:!0});const Et=Bn(Cr({},mt),{topic:Me,pairingTopic:K,acknowledged:!1,self:mt.controller,peer:{publicKey:de.publicKey,metadata:de.metadata},controller:Oe});return await this.client.session.set(Me,Et),await this.setExpiry(Me,(0,m.gn)(Rs)),{topic:Me,acknowledged:()=>new Promise(xt=>setTimeout(()=>xt(this.client.session.get(Me)),500))}},this.reject=async r=>{await this.isInitialized(),await this.isValidReject(r);const{id:o,reason:a}=r,{pairingTopic:v}=this.client.proposal.get(o);v&&(await this.sendError(o,v,a),await this.client.proposal.delete(o,(0,m.D6)("USER_DISCONNECTED")))},this.update=async r=>{await this.isInitialized(),await this.isValidUpdate(r);const{topic:o,namespaces:a}=r,v=await this.sendRequest({topic:o,method:"wc_sessionUpdate",params:{namespaces:a}}),{done:I,resolve:L,reject:K}=(0,m.H1)();return this.events.once((0,m.E0)("session_update",v),({error:de})=>{de?K(de):L()}),await this.client.session.update(o,{namespaces:a}),{acknowledged:I}},this.extend=async r=>{await this.isInitialized(),await this.isValidExtend(r);const{topic:o}=r,a=await this.sendRequest({topic:o,method:"wc_sessionExtend",params:{}}),{done:v,resolve:I,reject:L}=(0,m.H1)();return this.events.once((0,m.E0)("session_extend",a),({error:K})=>{K?L(K):I()}),await this.setExpiry(o,(0,m.gn)(Rs)),{acknowledged:v}},this.request=async r=>{await this.isInitialized(),await this.isValidRequest(r);const{chainId:o,request:a,topic:v,expiry:I}=r,L=dt(),{done:K,resolve:de,reject:we}=(0,m.H1)(I);return this.events.once((0,m.E0)("session_request",L),({error:Ae,result:Oe})=>{Ae?we(Ae):de(Oe)}),await Promise.all([new Promise(async Ae=>{await this.sendRequest({clientRpcId:L,topic:v,method:"wc_sessionRequest",params:{request:a,chainId:o},expiry:I,throwOnFailedPublish:!0}).catch(Oe=>we(Oe)),this.client.events.emit("session_request_sent",{topic:v,request:a,chainId:o,id:L}),Ae()}),new Promise(async Ae=>{const Oe=await this.client.core.storage.getItem(wu);(0,m.Hh)({id:L,topic:v,wcDeepLink:Oe}),Ae()}),K()]).then(Ae=>Ae[2])},this.respond=async r=>{await this.isInitialized(),await this.isValidRespond(r);const{topic:o,response:a}=r,{id:v}=a;fr(a)?await this.sendResult({id:v,topic:o,result:a.result,throwOnFailedPublish:!0}):jr(a)&&await this.sendError(v,o,a.error),this.cleanupAfterResponse(r)},this.ping=async r=>{await this.isInitialized(),await this.isValidPing(r);const{topic:o}=r;if(this.client.session.keys.includes(o)){const a=await this.sendRequest({topic:o,method:"wc_sessionPing",params:{}}),{done:v,resolve:I,reject:L}=(0,m.H1)();this.events.once((0,m.E0)("session_ping",a),({error:K})=>{K?L(K):I()}),await v()}else this.client.core.pairing.pairings.keys.includes(o)&&await this.client.core.pairing.ping({topic:o})},this.emit=async r=>{await this.isInitialized(),await this.isValidEmit(r);const{topic:o,event:a,chainId:v}=r;await this.sendRequest({topic:o,method:"wc_sessionEvent",params:{event:a,chainId:v}})},this.disconnect=async r=>{await this.isInitialized(),await this.isValidDisconnect(r);const{topic:o}=r;this.client.session.keys.includes(o)?(await this.sendRequest({topic:o,method:"wc_sessionDelete",params:(0,m.D6)("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession(o)):await this.client.core.pairing.disconnect({topic:o})},this.find=r=>(this.isInitialized(),this.client.session.getAll().filter(o=>(0,m.Ih)(o,r))),this.getPendingSessionRequests=()=>(this.isInitialized(),this.client.pendingRequest.getAll()),this.cleanupDuplicatePairings=async r=>{if(r.pairingTopic)try{const o=this.client.core.pairing.pairings.get(r.pairingTopic),a=this.client.core.pairing.pairings.getAll().filter(v=>{var I,L;return((I=v.peerMetadata)==null?void 0:I.url)&&((L=v.peerMetadata)==null?void 0:L.url)===r.peer.metadata.url&&v.topic&&v.topic!==o.topic});if(a.length===0)return;this.client.logger.info(`Cleaning up ${a.length} duplicate pairing(s)`),await Promise.all(a.map(v=>this.client.core.pairing.disconnect({topic:v.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(o){this.client.logger.error(o)}},this.deleteSession=async(r,o)=>{const{self:a}=this.client.session.get(r);await this.client.core.relayer.unsubscribe(r),this.client.session.delete(r,(0,m.D6)("USER_DISCONNECTED")),this.client.core.crypto.keychain.has(a.publicKey)&&await this.client.core.crypto.deleteKeyPair(a.publicKey),this.client.core.crypto.keychain.has(r)&&await this.client.core.crypto.deleteSymKey(r),o||this.client.core.expirer.del(r),this.client.core.storage.removeItem(wu).catch(v=>this.client.logger.warn(v))},this.deleteProposal=async(r,o)=>{await Promise.all([this.client.proposal.delete(r,(0,m.D6)("USER_DISCONNECTED")),o?Promise.resolve():this.client.core.expirer.del(r)])},this.deletePendingSessionRequest=async(r,o,a=!1)=>{await Promise.all([this.client.pendingRequest.delete(r,o),a?Promise.resolve():this.client.core.expirer.del(r)]),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(v=>v.id!==r),a&&(this.sessionRequestQueue.state=Pi.idle)},this.setExpiry=async(r,o)=>{this.client.session.keys.includes(r)&&await this.client.session.update(r,{expiry:o}),this.client.core.expirer.set(r,o)},this.setProposal=async(r,o)=>{await this.client.proposal.set(r,o),this.client.core.expirer.set(r,o.expiry)},this.setPendingSessionRequest=async r=>{const o=$n.wc_sessionRequest.req.ttl,{id:a,topic:v,params:I,verifyContext:L}=r;await this.client.pendingRequest.set(a,{id:a,topic:v,params:I,verifyContext:L}),o&&this.client.core.expirer.set(a,(0,m.gn)(o))},this.sendRequest=async r=>{const{topic:o,method:a,params:v,expiry:I,relayRpcId:L,clientRpcId:K,throwOnFailedPublish:de}=r,we=vt(a,v,K);if((0,m.jU)()&&Qd.includes(a)){const Qe=(0,m.rj)(JSON.stringify(we));this.client.core.verify.register({attestationId:Qe})}const Ae=await this.client.core.crypto.encode(o,we),Oe=$n[a].req;return I&&(Oe.ttl=I),L&&(Oe.id=L),this.client.core.history.set(o,we),de?(Oe.internal=Bn(Cr({},Oe.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(o,Ae,Oe)):this.client.core.relayer.publish(o,Ae,Oe).catch(Qe=>this.client.logger.error(Qe)),we.id},this.sendResult=async r=>{const{id:o,topic:a,result:v,throwOnFailedPublish:I}=r,L=Nt(o,v),K=await this.client.core.crypto.encode(a,L),de=await this.client.core.history.get(a,o),we=$n[de.request.method].res;I?(we.internal=Bn(Cr({},we.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(a,K,we)):this.client.core.relayer.publish(a,K,we).catch(Ae=>this.client.logger.error(Ae)),await this.client.core.history.resolve(L)},this.sendError=async(r,o,a)=>{const v=Ot(r,a),I=await this.client.core.crypto.encode(o,v),L=await this.client.core.history.get(o,r),K=$n[L.request.method].res;this.client.core.relayer.publish(o,I,K),await this.client.core.history.resolve(v)},this.cleanup=async()=>{const r=[],o=[];this.client.session.getAll().forEach(a=>{(0,m.Bw)(a.expiry)&&r.push(a.topic)}),this.client.proposal.getAll().forEach(a=>{(0,m.Bw)(a.expiry)&&o.push(a.id)}),await Promise.all([...r.map(a=>this.deleteSession(a)),...o.map(a=>this.deleteProposal(a))])},this.onRelayEventRequest=async r=>{this.requestQueue.queue.push(r),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===Pi.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=Pi.active;const r=this.requestQueue.queue.shift();if(r)try{this.processRequest(r),await new Promise(o=>setTimeout(o,300))}catch(o){this.client.logger.warn(o)}}this.requestQueue.state=Pi.idle},this.processRequest=r=>{const{topic:o,payload:a}=r,v=a.method;switch(v){case"wc_sessionPropose":return this.onSessionProposeRequest(o,a);case"wc_sessionSettle":return this.onSessionSettleRequest(o,a);case"wc_sessionUpdate":return this.onSessionUpdateRequest(o,a);case"wc_sessionExtend":return this.onSessionExtendRequest(o,a);case"wc_sessionPing":return this.onSessionPingRequest(o,a);case"wc_sessionDelete":return this.onSessionDeleteRequest(o,a);case"wc_sessionRequest":return this.onSessionRequest(o,a);case"wc_sessionEvent":return this.onSessionEventRequest(o,a);default:return this.client.logger.info(`Unsupported request method ${v}`)}},this.onRelayEventResponse=async r=>{const{topic:o,payload:a}=r,v=(await this.client.core.history.get(o,a.id)).request.method;switch(v){case"wc_sessionPropose":return this.onSessionProposeResponse(o,a);case"wc_sessionSettle":return this.onSessionSettleResponse(o,a);case"wc_sessionUpdate":return this.onSessionUpdateResponse(o,a);case"wc_sessionExtend":return this.onSessionExtendResponse(o,a);case"wc_sessionPing":return this.onSessionPingResponse(o,a);case"wc_sessionRequest":return this.onSessionRequestResponse(o,a);default:return this.client.logger.info(`Unsupported response method ${v}`)}},this.onRelayEventUnknownPayload=r=>{const{topic:o}=r,{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`Decoded payload on topic ${o} is not identifiable as a JSON-RPC request or a response.`);throw new Error(a)},this.onSessionProposeRequest=async(r,o)=>{const{params:a,id:v}=o;try{this.isValidConnect(Cr({},o.params));const I=(0,m.gn)(f.FIVE_MINUTES),L=Cr({id:v,pairingTopic:r,expiry:I},a);await this.setProposal(v,L);const K=(0,m.rj)(JSON.stringify(o)),de=await this.getVerifyContext(K,L.proposer.metadata);this.client.events.emit("session_proposal",{id:v,params:L,verifyContext:de})}catch(I){await this.sendError(v,r,I),this.client.logger.error(I)}},this.onSessionProposeResponse=async(r,o)=>{const{id:a}=o;if(fr(o)){const{result:v}=o;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:v});const I=this.client.proposal.get(a);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:I});const L=I.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:L});const K=v.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:K});const de=await this.client.core.crypto.generateSharedKey(L,K);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:de});const we=await this.client.core.relayer.subscribe(de);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:we}),await this.client.core.pairing.activate({topic:r})}else jr(o)&&(await this.client.proposal.delete(a,(0,m.D6)("USER_DISCONNECTED")),this.events.emit((0,m.E0)("session_connect"),{error:o.error}))},this.onSessionSettleRequest=async(r,o)=>{const{id:a,params:v}=o;try{this.isValidSessionSettleRequest(v);const{relay:I,controller:L,expiry:K,namespaces:de,requiredNamespaces:we,optionalNamespaces:Ae,sessionProperties:Oe,pairingTopic:Qe}=o.params,Me=Cr({topic:r,relay:I,expiry:K,namespaces:de,acknowledged:!0,pairingTopic:Qe,requiredNamespaces:we,optionalNamespaces:Ae,controller:L.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:L.publicKey,metadata:L.metadata}},Oe&&{sessionProperties:Oe});await this.sendResult({id:o.id,topic:r,result:!0}),this.events.emit((0,m.E0)("session_connect"),{session:Me}),this.cleanupDuplicatePairings(Me)}catch(I){await this.sendError(a,r,I),this.client.logger.error(I)}},this.onSessionSettleResponse=async(r,o)=>{const{id:a}=o;fr(o)?(await this.client.session.update(r,{acknowledged:!0}),this.events.emit((0,m.E0)("session_approve",a),{})):jr(o)&&(await this.client.session.delete(r,(0,m.D6)("USER_DISCONNECTED")),this.events.emit((0,m.E0)("session_approve",a),{error:o.error}))},this.onSessionUpdateRequest=async(r,o)=>{const{params:a,id:v}=o;try{const I=`${r}_session_update`,L=m.O6.get(I);if(L&&this.isRequestOutOfSync(L,v)){this.client.logger.info(`Discarding out of sync request - ${v}`);return}this.isValidUpdate(Cr({topic:r},a)),await this.client.session.update(r,{namespaces:a.namespaces}),await this.sendResult({id:v,topic:r,result:!0}),this.client.events.emit("session_update",{id:v,topic:r,params:a}),m.O6.set(I,v)}catch(I){await this.sendError(v,r,I),this.client.logger.error(I)}},this.isRequestOutOfSync=(r,o)=>parseInt(o.toString().slice(0,-3))<=parseInt(r.toString().slice(0,-3)),this.onSessionUpdateResponse=(r,o)=>{const{id:a}=o;fr(o)?this.events.emit((0,m.E0)("session_update",a),{}):jr(o)&&this.events.emit((0,m.E0)("session_update",a),{error:o.error})},this.onSessionExtendRequest=async(r,o)=>{const{id:a}=o;try{this.isValidExtend({topic:r}),await this.setExpiry(r,(0,m.gn)(Rs)),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_extend",{id:a,topic:r})}catch(v){await this.sendError(a,r,v),this.client.logger.error(v)}},this.onSessionExtendResponse=(r,o)=>{const{id:a}=o;fr(o)?this.events.emit((0,m.E0)("session_extend",a),{}):jr(o)&&this.events.emit((0,m.E0)("session_extend",a),{error:o.error})},this.onSessionPingRequest=async(r,o)=>{const{id:a}=o;try{this.isValidPing({topic:r}),await this.sendResult({id:a,topic:r,result:!0}),this.client.events.emit("session_ping",{id:a,topic:r})}catch(v){await this.sendError(a,r,v),this.client.logger.error(v)}},this.onSessionPingResponse=(r,o)=>{const{id:a}=o;setTimeout(()=>{fr(o)?this.events.emit((0,m.E0)("session_ping",a),{}):jr(o)&&this.events.emit((0,m.E0)("session_ping",a),{error:o.error})},500)},this.onSessionDeleteRequest=async(r,o)=>{const{id:a}=o;try{this.isValidDisconnect({topic:r,reason:o.params}),await Promise.all([new Promise(v=>{this.client.core.relayer.once(yr.publish,async()=>{v(await this.deleteSession(r))})}),this.sendResult({id:a,topic:r,result:!0})]),this.client.events.emit("session_delete",{id:a,topic:r})}catch(v){this.client.logger.error(v)}},this.onSessionRequest=async(r,o)=>{const{id:a,params:v}=o;try{this.isValidRequest(Cr({topic:r},v));const I=(0,m.rj)(JSON.stringify(vt("wc_sessionRequest",v,a))),L=this.client.session.get(r),K=await this.getVerifyContext(I,L.peer.metadata),de={id:a,topic:r,params:v,verifyContext:K};await this.setPendingSessionRequest(de),this.addSessionRequestToSessionRequestQueue(de),this.processSessionRequestQueue()}catch(I){await this.sendError(a,r,I),this.client.logger.error(I)}},this.onSessionRequestResponse=(r,o)=>{const{id:a}=o;fr(o)?this.events.emit((0,m.E0)("session_request",a),{result:o.result}):jr(o)&&this.events.emit((0,m.E0)("session_request",a),{error:o.error})},this.onSessionEventRequest=async(r,o)=>{const{id:a,params:v}=o;try{const I=`${r}_session_event_${v.event.name}`,L=m.O6.get(I);if(L&&this.isRequestOutOfSync(L,a)){this.client.logger.info(`Discarding out of sync request - ${a}`);return}this.isValidEmit(Cr({topic:r},v)),this.client.events.emit("session_event",{id:a,topic:r,params:v}),m.O6.set(I,a)}catch(I){await this.sendError(a,r,I),this.client.logger.error(I)}},this.addSessionRequestToSessionRequestQueue=r=>{this.sessionRequestQueue.queue.push(r)},this.cleanupAfterResponse=r=>{this.deletePendingSessionRequest(r.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=Pi.idle,this.processSessionRequestQueue()},(0,f.toMiliseconds)(this.requestQueueDelay))},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===Pi.active){this.client.logger.info("session request queue is already active.");return}const r=this.sessionRequestQueue.queue[0];if(!r){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=Pi.active,this.client.events.emit("session_request",r)}catch(o){this.client.logger.error(o)}},this.onPairingCreated=r=>{if(r.active)return;const o=this.client.proposal.getAll().find(a=>a.pairingTopic===r.topic);o&&this.onSessionProposeRequest(r.topic,vt("wc_sessionPropose",{requiredNamespaces:o.requiredNamespaces,optionalNamespaces:o.optionalNamespaces,relays:o.relays,proposer:o.proposer},o.id))},this.isValidConnect=async r=>{if(!(0,m.EJ)(r)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(r)}`);throw new Error(K)}const{pairingTopic:o,requiredNamespaces:a,optionalNamespaces:v,sessionProperties:I,relays:L}=r;if((0,m.o8)(o)||await this.isValidPairingTopic(o),!(0,m.PM)(L,!0)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`connect() relays: ${L}`);throw new Error(K)}!(0,m.o8)(a)&&(0,m.L5)(a)!==0&&this.validateNamespaces(a,"requiredNamespaces"),!(0,m.o8)(v)&&(0,m.L5)(v)!==0&&this.validateNamespaces(v,"optionalNamespaces"),(0,m.o8)(I)||this.validateSessionProps(I,"sessionProperties")},this.validateNamespaces=(r,o)=>{const a=(0,m.n)(r,"connect()",o);if(a)throw new Error(a.message)},this.isValidApprove=async r=>{if(!(0,m.EJ)(r))throw new Error((0,m.Z7)("MISSING_OR_INVALID",`approve() params: ${r}`).message);const{id:o,namespaces:a,relayProtocol:v,sessionProperties:I}=r;await this.isValidProposalId(o);const L=this.client.proposal.get(o),K=(0,m.in)(a,"approve()");if(K)throw new Error(K.message);const de=(0,m.rF)(L.requiredNamespaces,a,"approve()");if(de)throw new Error(de.message);if(!(0,m.M_)(v,!0)){const{message:we}=(0,m.Z7)("MISSING_OR_INVALID",`approve() relayProtocol: ${v}`);throw new Error(we)}(0,m.o8)(I)||this.validateSessionProps(I,"sessionProperties")},this.isValidReject=async r=>{if(!(0,m.EJ)(r)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`reject() params: ${r}`);throw new Error(v)}const{id:o,reason:a}=r;if(await this.isValidProposalId(o),!(0,m.$t)(a)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(a)}`);throw new Error(v)}},this.isValidSessionSettleRequest=r=>{if(!(0,m.EJ)(r)){const{message:de}=(0,m.Z7)("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${r}`);throw new Error(de)}const{relay:o,controller:a,namespaces:v,expiry:I}=r;if(!(0,m.Z2)(o)){const{message:de}=(0,m.Z7)("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(de)}const L=(0,m.Dd)(a,"onSessionSettleRequest()");if(L)throw new Error(L.message);const K=(0,m.in)(v,"onSessionSettleRequest()");if(K)throw new Error(K.message);if((0,m.Bw)(I)){const{message:de}=(0,m.Z7)("EXPIRED","onSessionSettleRequest()");throw new Error(de)}},this.isValidUpdate=async r=>{if(!(0,m.EJ)(r)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`update() params: ${r}`);throw new Error(K)}const{topic:o,namespaces:a}=r;await this.isValidSessionTopic(o);const v=this.client.session.get(o),I=(0,m.in)(a,"update()");if(I)throw new Error(I.message);const L=(0,m.rF)(v.requiredNamespaces,a,"update()");if(L)throw new Error(L.message)},this.isValidExtend=async r=>{if(!(0,m.EJ)(r)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`extend() params: ${r}`);throw new Error(a)}const{topic:o}=r;await this.isValidSessionTopic(o)},this.isValidRequest=async r=>{if(!(0,m.EJ)(r)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`request() params: ${r}`);throw new Error(K)}const{topic:o,request:a,chainId:v,expiry:I}=r;await this.isValidSessionTopic(o);const{namespaces:L}=this.client.session.get(o);if(!(0,m.p8)(L,v)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`request() chainId: ${v}`);throw new Error(K)}if(!(0,m.hH)(a)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`request() ${JSON.stringify(a)}`);throw new Error(K)}if(!(0,m.al)(L,v,a.method)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`request() method: ${a.method}`);throw new Error(K)}if(I&&!(0,m.ON)(I,oa)){const{message:K}=(0,m.Z7)("MISSING_OR_INVALID",`request() expiry: ${I}. Expiry must be a number (in seconds) between ${oa.min} and ${oa.max}`);throw new Error(K)}},this.isValidRespond=async r=>{if(!(0,m.EJ)(r)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`respond() params: ${r}`);throw new Error(v)}const{topic:o,response:a}=r;if(await this.isValidSessionTopic(o),!(0,m.JT)(a)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(a)}`);throw new Error(v)}},this.isValidPing=async r=>{if(!(0,m.EJ)(r)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`ping() params: ${r}`);throw new Error(a)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.isValidEmit=async r=>{if(!(0,m.EJ)(r)){const{message:L}=(0,m.Z7)("MISSING_OR_INVALID",`emit() params: ${r}`);throw new Error(L)}const{topic:o,event:a,chainId:v}=r;await this.isValidSessionTopic(o);const{namespaces:I}=this.client.session.get(o);if(!(0,m.p8)(I,v)){const{message:L}=(0,m.Z7)("MISSING_OR_INVALID",`emit() chainId: ${v}`);throw new Error(L)}if(!(0,m.nf)(a)){const{message:L}=(0,m.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(L)}if(!(0,m.sI)(I,v,a.name)){const{message:L}=(0,m.Z7)("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(a)}`);throw new Error(L)}},this.isValidDisconnect=async r=>{if(!(0,m.EJ)(r)){const{message:a}=(0,m.Z7)("MISSING_OR_INVALID",`disconnect() params: ${r}`);throw new Error(a)}const{topic:o}=r;await this.isValidSessionOrPairingTopic(o)},this.getVerifyContext=async(r,o)=>{const a={verified:{verifyUrl:o.verifyUrl||Ss,validation:"UNKNOWN",origin:o.url||""}};try{const v=await this.client.core.verify.resolve({attestationId:r,verifyUrl:o.verifyUrl});v&&(a.verified.origin=v.origin,a.verified.isScam=v.isScam,a.verified.validation=v.origin===new URL(o.url).origin?"VALID":"INVALID")}catch(v){this.client.logger.info(v)}return this.client.logger.info(`Verify context: ${JSON.stringify(a)}`),a},this.validateSessionProps=(r,o)=>{Object.values(r).forEach(a=>{if(!(0,m.M_)(a,!1)){const{message:v}=(0,m.Z7)("MISSING_OR_INVALID",`${o} must be in Record<string, string> format. Received: ${JSON.stringify(a)}`);throw new Error(v)}})}}async isInitialized(){if(!this.initialized){const{message:n}=(0,m.Z7)("NOT_INITIALIZED",this.name);throw new Error(n)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(yr.message,async n=>{const{topic:r,message:o}=n;if(this.ignoredPayloadTypes.includes(this.client.core.crypto.getPayloadType(o)))return;const a=await this.client.core.crypto.decode(r,o);try{Fn(a)?(this.client.core.history.set(r,a),this.onRelayEventRequest({topic:r,payload:a})):fn(a)?(await this.client.core.history.resolve(a),await this.onRelayEventResponse({topic:r,payload:a}),this.client.core.history.delete(r,a.id)):this.onRelayEventUnknownPayload({topic:r,payload:a})}catch(v){this.client.logger.error(v)}})}registerExpirerEvents(){this.client.core.expirer.on(Kr.expired,async n=>{const{topic:r,id:o}=(0,m.iP)(n.target);if(o&&this.client.pendingRequest.keys.includes(o))return await this.deletePendingSessionRequest(o,(0,m.Z7)("EXPIRED"),!0);r?this.client.session.keys.includes(r)&&(await this.deleteSession(r,!0),this.client.events.emit("session_expire",{topic:r})):o&&(await this.deleteProposal(o,!0),this.client.events.emit("proposal_expire",{id:o}))})}registerPairingEvents(){this.client.core.pairing.events.on(zn.create,n=>this.onPairingCreated(n))}isValidPairingTopic(n){if(!(0,m.M_)(n,!1)){const{message:r}=(0,m.Z7)("MISSING_OR_INVALID",`pairing topic should be a string: ${n}`);throw new Error(r)}if(!this.client.core.pairing.pairings.keys.includes(n)){const{message:r}=(0,m.Z7)("NO_MATCHING_KEY",`pairing topic doesn't exist: ${n}`);throw new Error(r)}if((0,m.Bw)(this.client.core.pairing.pairings.get(n).expiry)){const{message:r}=(0,m.Z7)("EXPIRED",`pairing topic: ${n}`);throw new Error(r)}}async isValidSessionTopic(n){if(!(0,m.M_)(n,!1)){const{message:r}=(0,m.Z7)("MISSING_OR_INVALID",`session topic should be a string: ${n}`);throw new Error(r)}if(!this.client.session.keys.includes(n)){const{message:r}=(0,m.Z7)("NO_MATCHING_KEY",`session topic doesn't exist: ${n}`);throw new Error(r)}if((0,m.Bw)(this.client.session.get(n).expiry)){await this.deleteSession(n);const{message:r}=(0,m.Z7)("EXPIRED",`session topic: ${n}`);throw new Error(r)}}async isValidSessionOrPairingTopic(n){if(this.client.session.keys.includes(n))await this.isValidSessionTopic(n);else if(this.client.core.pairing.pairings.keys.includes(n))this.isValidPairingTopic(n);else if((0,m.M_)(n,!1)){const{message:r}=(0,m.Z7)("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${n}`);throw new Error(r)}else{const{message:r}=(0,m.Z7)("MISSING_OR_INVALID",`session or pairing topic should be a string: ${n}`);throw new Error(r)}}async isValidProposalId(n){if(!(0,m.Q0)(n)){const{message:r}=(0,m.Z7)("MISSING_OR_INVALID",`proposal id should be a number: ${n}`);throw new Error(r)}if(!this.client.proposal.keys.includes(n)){const{message:r}=(0,m.Z7)("NO_MATCHING_KEY",`proposal id doesn't exist: ${n}`);throw new Error(r)}if((0,m.Bw)(this.client.proposal.get(n).expiry)){await this.deleteProposal(n);const{message:r}=(0,m.Z7)("EXPIRED",`proposal id: ${n}`);throw new Error(r)}}}class np extends Os{constructor(n,r){super(n,r,Gd,na),this.core=n,this.logger=r}}class sp extends Os{constructor(n,r){super(n,r,Wd,na),this.core=n,this.logger=r}}class op extends Os{constructor(n,r){super(n,r,Zd,na,o=>o.id),this.core=n,this.logger=r}}class aa extends fe{constructor(n){super(n),this.protocol=vu,this.version=_u,this.name=sa.name,this.events=new B.EventEmitter,this.on=(o,a)=>this.events.on(o,a),this.once=(o,a)=>this.events.once(o,a),this.off=(o,a)=>this.events.off(o,a),this.removeListener=(o,a)=>this.events.removeListener(o,a),this.removeAllListeners=o=>this.events.removeAllListeners(o),this.connect=async o=>{try{return await this.engine.connect(o)}catch(a){throw this.logger.error(a.message),a}},this.pair=async o=>{try{return await this.engine.pair(o)}catch(a){throw this.logger.error(a.message),a}},this.approve=async o=>{try{return await this.engine.approve(o)}catch(a){throw this.logger.error(a.message),a}},this.reject=async o=>{try{return await this.engine.reject(o)}catch(a){throw this.logger.error(a.message),a}},this.update=async o=>{try{return await this.engine.update(o)}catch(a){throw this.logger.error(a.message),a}},this.extend=async o=>{try{return await this.engine.extend(o)}catch(a){throw this.logger.error(a.message),a}},this.request=async o=>{try{return await this.engine.request(o)}catch(a){throw this.logger.error(a.message),a}},this.respond=async o=>{try{return await this.engine.respond(o)}catch(a){throw this.logger.error(a.message),a}},this.ping=async o=>{try{return await this.engine.ping(o)}catch(a){throw this.logger.error(a.message),a}},this.emit=async o=>{try{return await this.engine.emit(o)}catch(a){throw this.logger.error(a.message),a}},this.disconnect=async o=>{try{return await this.engine.disconnect(o)}catch(a){throw this.logger.error(a.message),a}},this.find=o=>{try{return this.engine.find(o)}catch(a){throw this.logger.error(a.message),a}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(o){throw this.logger.error(o.message),o}},this.name=(n==null?void 0:n.name)||sa.name,this.metadata=(n==null?void 0:n.metadata)||(0,m.D)();const r=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:(n==null?void 0:n.logger)||sa.logger}));this.core=(n==null?void 0:n.core)||new kd(n),this.logger=(0,he.generateChildLogger)(r,this.name),this.session=new sp(this.core,this.logger),this.proposal=new np(this.core,this.logger),this.pendingRequest=new op(this.core,this.logger),this.engine=new ip(this)}static async init(n){const r=new aa(n);return await r.initialize(),r}get context(){return(0,he.getLoggerContext)(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),this.core.verify.init({verifyUrl:this.metadata.verifyUrl}),this.logger.info("SignClient Initialization Success")}catch(n){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(n.message),n}}}const eb=null;var ap=z(54098),Iu=z.n(ap);const Pu={headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"},Su=10;class Ou{constructor(n,r=!1){if(this.url=n,this.disableProviderPing=r,this.events=new B.EventEmitter,this.isAvailable=!1,this.registering=!1,!Vr(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);this.url=n,this.disableProviderPing=r}get connected(){return this.isAvailable}get connecting(){return this.registering}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}off(n,r){this.events.off(n,r)}removeListener(n,r){this.events.removeListener(n,r)}async open(n=this.url){await this.register(n)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(n,r){this.isAvailable||await this.register();try{const o=b(n),v=await(await Iu()(this.url,Object.assign(Object.assign({},Pu),{body:o}))).json();this.onPayload({data:v})}catch(o){this.onError(n.id,o)}}async register(n=this.url){if(!Vr(n))throw new Error(`Provided URL is not compatible with HTTP connection: ${n}`);if(this.registering){const r=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=r||this.events.listenerCount("open")>=r)&&this.events.setMaxListeners(r+1),new Promise((o,a)=>{this.events.once("register_error",v=>{this.resetMaxListeners(),a(v)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return a(new Error("HTTP connection is missing or invalid"));o()})})}this.url=n,this.registering=!0;try{if(!this.disableProviderPing){const r=b({id:1,jsonrpc:"2.0",method:"test",params:[]});await Iu()(n,Object.assign(Object.assign({},Pu),{body:r}))}this.onOpen()}catch(r){const o=this.parseError(r);throw this.events.emit("register_error",o),this.onClose(),o}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(n){if(typeof n.data>"u")return;const r=typeof n.data=="string"?d(n.data):n.data;this.events.emit("payload",r)}onError(n,r){const o=this.parseError(r),a=o.message||o.toString(),v=Ot(n,a);this.events.emit("payload",v)}parseError(n,r=this.url){return St(n,r,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>Su&&this.events.setMaxListeners(Su)}}var cp=Ou,vn=cp;const Ru="error",up="wss://relay.walletconnect.com",hp="wc",lp="universal_provider",Au=`${hp}@2:${lp}:`,fp="https://rpc.walletconnect.com/v1/",Ui={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var Hn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof z.g<"u"?z.g:typeof self<"u"?self:{},ca={exports:{}};(function(y,n){(function(){var r,o="4.17.21",a=200,v="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",I="Expected a function",L="Invalid `variable` option passed into `_.template`",K="__lodash_hash_undefined__",de=500,we="__lodash_placeholder__",Ae=1,Oe=2,Qe=4,Me=1,mt=2,Et=1,xt=2,wr=4,ot=8,Ye=16,It=32,br=64,qt=128,Er=256,zi=512,Gp=30,Wp="...",Jp=800,Zp=16,Bu=1,Qp=2,Yp=3,tn=1/0,qi=9007199254740991,Xp=17976931348623157e292,Ds=0/0,gi=4294967295,eg=gi-1,tg=gi>>>1,rg=[["ary",qt],["bind",Et],["bindKey",xt],["curry",ot],["curryRight",Ye],["flip",zi],["partial",It],["partialRight",br],["rearg",Er]],mn="[object Arguments]",Ns="[object Array]",ig="[object AsyncFunction]",Kn="[object Boolean]",kn="[object Date]",ng="[object DOMException]",Ls="[object Error]",Fs="[object Function]",Hu="[object GeneratorFunction]",ri="[object Map]",Gn="[object Number]",sg="[object Null]",Si="[object Object]",Vu="[object Promise]",og="[object Proxy]",Wn="[object RegExp]",ii="[object Set]",Jn="[object String]",js="[object Symbol]",ag="[object Undefined]",Zn="[object WeakMap]",cg="[object WeakSet]",Qn="[object ArrayBuffer]",wn="[object DataView]",va="[object Float32Array]",_a="[object Float64Array]",ma="[object Int8Array]",wa="[object Int16Array]",ba="[object Int32Array]",Ea="[object Uint8Array]",xa="[object Uint8ClampedArray]",Ia="[object Uint16Array]",Pa="[object Uint32Array]",ug=/\b__p \+= '';/g,hg=/\b(__p \+=) '' \+/g,lg=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ku=/&(?:amp|lt|gt|quot|#39);/g,ku=/[&<>"']/g,fg=RegExp(Ku.source),dg=RegExp(ku.source),pg=/<%-([\s\S]+?)%>/g,gg=/<%([\s\S]+?)%>/g,Gu=/<%=([\s\S]+?)%>/g,yg=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,vg=/^\w*$/,_g=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Sa=/[\\^$.*+?()[\]{}|]/g,mg=RegExp(Sa.source),Oa=/^\s+/,wg=/\s/,bg=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Eg=/\{\n\/\* \[wrapped with (.+)\] \*/,xg=/,? & /,Ig=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Pg=/[()=,{}\[\]\/\s]/,Sg=/\\(\\)?/g,Og=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Wu=/\w*$/,Rg=/^[-+]0x[0-9a-f]+$/i,Ag=/^0b[01]+$/i,Cg=/^\[object .+?Constructor\]$/,Tg=/^0o[0-7]+$/i,Dg=/^(?:0|[1-9]\d*)$/,Ng=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ms=/($^)/,Lg=/['\n\r\u2028\u2029\\]/g,Us="\\ud800-\\udfff",Fg="\\u0300-\\u036f",jg="\\ufe20-\\ufe2f",Mg="\\u20d0-\\u20ff",Ju=Fg+jg+Mg,Zu="\\u2700-\\u27bf",Qu="a-z\\xdf-\\xf6\\xf8-\\xff",Ug="\\xac\\xb1\\xd7\\xf7",zg="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qg="\\u2000-\\u206f",$g=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Yu="A-Z\\xc0-\\xd6\\xd8-\\xde",Xu="\\ufe0e\\ufe0f",eh=Ug+zg+qg+$g,Ra="['\u2019]",Bg="["+Us+"]",th="["+eh+"]",zs="["+Ju+"]",rh="\\d+",Hg="["+Zu+"]",ih="["+Qu+"]",nh="[^"+Us+eh+rh+Zu+Qu+Yu+"]",Aa="\\ud83c[\\udffb-\\udfff]",Vg="(?:"+zs+"|"+Aa+")",sh="[^"+Us+"]",Ca="(?:\\ud83c[\\udde6-\\uddff]){2}",Ta="[\\ud800-\\udbff][\\udc00-\\udfff]",bn="["+Yu+"]",oh="\\u200d",ah="(?:"+ih+"|"+nh+")",Kg="(?:"+bn+"|"+nh+")",ch="(?:"+Ra+"(?:d|ll|m|re|s|t|ve))?",uh="(?:"+Ra+"(?:D|LL|M|RE|S|T|VE))?",hh=Vg+"?",lh="["+Xu+"]?",kg="(?:"+oh+"(?:"+[sh,Ca,Ta].join("|")+")"+lh+hh+")*",Gg="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Wg="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",fh=lh+hh+kg,Jg="(?:"+[Hg,Ca,Ta].join("|")+")"+fh,Zg="(?:"+[sh+zs+"?",zs,Ca,Ta,Bg].join("|")+")",Qg=RegExp(Ra,"g"),Yg=RegExp(zs,"g"),Da=RegExp(Aa+"(?="+Aa+")|"+Zg+fh,"g"),Xg=RegExp([bn+"?"+ih+"+"+ch+"(?="+[th,bn,"$"].join("|")+")",Kg+"+"+uh+"(?="+[th,bn+ah,"$"].join("|")+")",bn+"?"+ah+"+"+ch,bn+"+"+uh,Wg,Gg,rh,Jg].join("|"),"g"),e0=RegExp("["+oh+Us+Ju+Xu+"]"),t0=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,r0=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],i0=-1,wt={};wt[va]=wt[_a]=wt[ma]=wt[wa]=wt[ba]=wt[Ea]=wt[xa]=wt[Ia]=wt[Pa]=!0,wt[mn]=wt[Ns]=wt[Qn]=wt[Kn]=wt[wn]=wt[kn]=wt[Ls]=wt[Fs]=wt[ri]=wt[Gn]=wt[Si]=wt[Wn]=wt[ii]=wt[Jn]=wt[Zn]=!1;var gt={};gt[mn]=gt[Ns]=gt[Qn]=gt[wn]=gt[Kn]=gt[kn]=gt[va]=gt[_a]=gt[ma]=gt[wa]=gt[ba]=gt[ri]=gt[Gn]=gt[Si]=gt[Wn]=gt[ii]=gt[Jn]=gt[js]=gt[Ea]=gt[xa]=gt[Ia]=gt[Pa]=!0,gt[Ls]=gt[Fs]=gt[Zn]=!1;var n0={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},s0={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},o0={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},a0={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},c0=parseFloat,u0=parseInt,dh=typeof Hn=="object"&&Hn&&Hn.Object===Object&&Hn,h0=typeof self=="object"&&self&&self.Object===Object&&self,dr=dh||h0||Function("return this")(),Na=n&&!n.nodeType&&n,rn=Na&&!0&&y&&!y.nodeType&&y,ph=rn&&rn.exports===Na,La=ph&&dh.process,kr=function(){try{var D=rn&&rn.require&&rn.require("util").types;return D||La&&La.binding&&La.binding("util")}catch{}}(),gh=kr&&kr.isArrayBuffer,yh=kr&&kr.isDate,vh=kr&&kr.isMap,_h=kr&&kr.isRegExp,mh=kr&&kr.isSet,wh=kr&&kr.isTypedArray;function Mr(D,G,q){switch(q.length){case 0:return D.call(G);case 1:return D.call(G,q[0]);case 2:return D.call(G,q[0],q[1]);case 3:return D.call(G,q[0],q[1],q[2])}return D.apply(G,q)}function l0(D,G,q,_e){for(var Ue=-1,Xe=D==null?0:D.length;++Ue<Xe;){var ir=D[Ue];G(_e,ir,q(ir),D)}return _e}function Gr(D,G){for(var q=-1,_e=D==null?0:D.length;++q<_e&&G(D[q],q,D)!==!1;);return D}function f0(D,G){for(var q=D==null?0:D.length;q--&&G(D[q],q,D)!==!1;);return D}function bh(D,G){for(var q=-1,_e=D==null?0:D.length;++q<_e;)if(!G(D[q],q,D))return!1;return!0}function $i(D,G){for(var q=-1,_e=D==null?0:D.length,Ue=0,Xe=[];++q<_e;){var ir=D[q];G(ir,q,D)&&(Xe[Ue++]=ir)}return Xe}function qs(D,G){var q=D==null?0:D.length;return!!q&&En(D,G,0)>-1}function Fa(D,G,q){for(var _e=-1,Ue=D==null?0:D.length;++_e<Ue;)if(q(G,D[_e]))return!0;return!1}function Pt(D,G){for(var q=-1,_e=D==null?0:D.length,Ue=Array(_e);++q<_e;)Ue[q]=G(D[q],q,D);return Ue}function Bi(D,G){for(var q=-1,_e=G.length,Ue=D.length;++q<_e;)D[Ue+q]=G[q];return D}function ja(D,G,q,_e){var Ue=-1,Xe=D==null?0:D.length;for(_e&&Xe&&(q=D[++Ue]);++Ue<Xe;)q=G(q,D[Ue],Ue,D);return q}function d0(D,G,q,_e){var Ue=D==null?0:D.length;for(_e&&Ue&&(q=D[--Ue]);Ue--;)q=G(q,D[Ue],Ue,D);return q}function Ma(D,G){for(var q=-1,_e=D==null?0:D.length;++q<_e;)if(G(D[q],q,D))return!0;return!1}var p0=Ua("length");function g0(D){return D.split("")}function y0(D){return D.match(Ig)||[]}function Eh(D,G,q){var _e;return q(D,function(Ue,Xe,ir){if(G(Ue,Xe,ir))return _e=Xe,!1}),_e}function $s(D,G,q,_e){for(var Ue=D.length,Xe=q+(_e?1:-1);_e?Xe--:++Xe<Ue;)if(G(D[Xe],Xe,D))return Xe;return-1}function En(D,G,q){return G===G?R0(D,G,q):$s(D,xh,q)}function v0(D,G,q,_e){for(var Ue=q-1,Xe=D.length;++Ue<Xe;)if(_e(D[Ue],G))return Ue;return-1}function xh(D){return D!==D}function Ih(D,G){var q=D==null?0:D.length;return q?qa(D,G)/q:Ds}function Ua(D){return function(G){return G==null?r:G[D]}}function za(D){return function(G){return D==null?r:D[G]}}function Ph(D,G,q,_e,Ue){return Ue(D,function(Xe,ir,ut){q=_e?(_e=!1,Xe):G(q,Xe,ir,ut)}),q}function _0(D,G){var q=D.length;for(D.sort(G);q--;)D[q]=D[q].value;return D}function qa(D,G){for(var q,_e=-1,Ue=D.length;++_e<Ue;){var Xe=G(D[_e]);Xe!==r&&(q=q===r?Xe:q+Xe)}return q}function $a(D,G){for(var q=-1,_e=Array(D);++q<D;)_e[q]=G(q);return _e}function m0(D,G){return Pt(G,function(q){return[q,D[q]]})}function Sh(D){return D&&D.slice(0,Ch(D)+1).replace(Oa,"")}function Ur(D){return function(G){return D(G)}}function Ba(D,G){return Pt(G,function(q){return D[q]})}function Yn(D,G){return D.has(G)}function Oh(D,G){for(var q=-1,_e=D.length;++q<_e&&En(G,D[q],0)>-1;);return q}function Rh(D,G){for(var q=D.length;q--&&En(G,D[q],0)>-1;);return q}function w0(D,G){for(var q=D.length,_e=0;q--;)D[q]===G&&++_e;return _e}var b0=za(n0),E0=za(s0);function x0(D){return"\\"+a0[D]}function I0(D,G){return D==null?r:D[G]}function xn(D){return e0.test(D)}function P0(D){return t0.test(D)}function S0(D){for(var G,q=[];!(G=D.next()).done;)q.push(G.value);return q}function Ha(D){var G=-1,q=Array(D.size);return D.forEach(function(_e,Ue){q[++G]=[Ue,_e]}),q}function Ah(D,G){return function(q){return D(G(q))}}function Hi(D,G){for(var q=-1,_e=D.length,Ue=0,Xe=[];++q<_e;){var ir=D[q];(ir===G||ir===we)&&(D[q]=we,Xe[Ue++]=q)}return Xe}function Bs(D){var G=-1,q=Array(D.size);return D.forEach(function(_e){q[++G]=_e}),q}function O0(D){var G=-1,q=Array(D.size);return D.forEach(function(_e){q[++G]=[_e,_e]}),q}function R0(D,G,q){for(var _e=q-1,Ue=D.length;++_e<Ue;)if(D[_e]===G)return _e;return-1}function A0(D,G,q){for(var _e=q+1;_e--;)if(D[_e]===G)return _e;return _e}function In(D){return xn(D)?T0(D):p0(D)}function ni(D){return xn(D)?D0(D):g0(D)}function Ch(D){for(var G=D.length;G--&&wg.test(D.charAt(G)););return G}var C0=za(o0);function T0(D){for(var G=Da.lastIndex=0;Da.test(D);)++G;return G}function D0(D){return D.match(Da)||[]}function N0(D){return D.match(Xg)||[]}var L0=function D(G){G=G==null?dr:Pn.defaults(dr.Object(),G,Pn.pick(dr,r0));var q=G.Array,_e=G.Date,Ue=G.Error,Xe=G.Function,ir=G.Math,ut=G.Object,Va=G.RegExp,F0=G.String,Wr=G.TypeError,Hs=q.prototype,j0=Xe.prototype,Sn=ut.prototype,Vs=G["__core-js_shared__"],Ks=j0.toString,it=Sn.hasOwnProperty,M0=0,Th=function(){var e=/[^.]+$/.exec(Vs&&Vs.keys&&Vs.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),ks=Sn.toString,U0=Ks.call(ut),z0=dr._,q0=Va("^"+Ks.call(it).replace(Sa,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Gs=ph?G.Buffer:r,Vi=G.Symbol,Ws=G.Uint8Array,Dh=Gs?Gs.allocUnsafe:r,Js=Ah(ut.getPrototypeOf,ut),Nh=ut.create,Lh=Sn.propertyIsEnumerable,Zs=Hs.splice,Fh=Vi?Vi.isConcatSpreadable:r,Xn=Vi?Vi.iterator:r,nn=Vi?Vi.toStringTag:r,Qs=function(){try{var e=un(ut,"defineProperty");return e({},"",{}),e}catch{}}(),$0=G.clearTimeout!==dr.clearTimeout&&G.clearTimeout,B0=_e&&_e.now!==dr.Date.now&&_e.now,H0=G.setTimeout!==dr.setTimeout&&G.setTimeout,Ys=ir.ceil,Xs=ir.floor,Ka=ut.getOwnPropertySymbols,V0=Gs?Gs.isBuffer:r,jh=G.isFinite,K0=Hs.join,k0=Ah(ut.keys,ut),nr=ir.max,vr=ir.min,G0=_e.now,W0=G.parseInt,Mh=ir.random,J0=Hs.reverse,ka=un(G,"DataView"),es=un(G,"Map"),Ga=un(G,"Promise"),On=un(G,"Set"),ts=un(G,"WeakMap"),rs=un(ut,"create"),eo=ts&&new ts,Rn={},Z0=hn(ka),Q0=hn(es),Y0=hn(Ga),X0=hn(On),ey=hn(ts),to=Vi?Vi.prototype:r,is=to?to.valueOf:r,Uh=to?to.toString:r;function w(e){if(Lt(e)&&!qe(e)&&!(e instanceof Ge)){if(e instanceof Jr)return e;if(it.call(e,"__wrapped__"))return zl(e)}return new Jr(e)}var An=function(){function e(){}return function(t){if(!Rt(t))return{};if(Nh)return Nh(t);e.prototype=t;var s=new e;return e.prototype=r,s}}();function ro(){}function Jr(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=r}w.templateSettings={escape:pg,evaluate:gg,interpolate:Gu,variable:"",imports:{_:w}},w.prototype=ro.prototype,w.prototype.constructor=w,Jr.prototype=An(ro.prototype),Jr.prototype.constructor=Jr;function Ge(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=gi,this.__views__=[]}function ty(){var e=new Ge(this.__wrapped__);return e.__actions__=Tr(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Tr(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Tr(this.__views__),e}function ry(){if(this.__filtered__){var e=new Ge(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function iy(){var e=this.__wrapped__.value(),t=this.__dir__,s=qe(e),u=t<0,g=s?e.length:0,E=gv(0,g,this.__views__),P=E.start,R=E.end,N=R-P,Q=u?R:P-1,Y=this.__iteratees__,ne=Y.length,ge=0,Ee=vr(N,this.__takeCount__);if(!s||!u&&g==N&&Ee==N)return cl(e,this.__actions__);var De=[];e:for(;N--&&ge<Ee;){Q+=t;for(var Be=-1,Ne=e[Q];++Be<ne;){var Ke=Y[Be],We=Ke.iteratee,$r=Ke.type,Pr=We(Ne);if($r==Qp)Ne=Pr;else if(!Pr){if($r==Bu)continue e;break e}}De[ge++]=Ne}return De}Ge.prototype=An(ro.prototype),Ge.prototype.constructor=Ge;function sn(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function ny(){this.__data__=rs?rs(null):{},this.size=0}function sy(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function oy(e){var t=this.__data__;if(rs){var s=t[e];return s===K?r:s}return it.call(t,e)?t[e]:r}function ay(e){var t=this.__data__;return rs?t[e]!==r:it.call(t,e)}function cy(e,t){var s=this.__data__;return this.size+=this.has(e)?0:1,s[e]=rs&&t===r?K:t,this}sn.prototype.clear=ny,sn.prototype.delete=sy,sn.prototype.get=oy,sn.prototype.has=ay,sn.prototype.set=cy;function Oi(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function uy(){this.__data__=[],this.size=0}function hy(e){var t=this.__data__,s=io(t,e);if(s<0)return!1;var u=t.length-1;return s==u?t.pop():Zs.call(t,s,1),--this.size,!0}function ly(e){var t=this.__data__,s=io(t,e);return s<0?r:t[s][1]}function fy(e){return io(this.__data__,e)>-1}function dy(e,t){var s=this.__data__,u=io(s,e);return u<0?(++this.size,s.push([e,t])):s[u][1]=t,this}Oi.prototype.clear=uy,Oi.prototype.delete=hy,Oi.prototype.get=ly,Oi.prototype.has=fy,Oi.prototype.set=dy;function Ri(e){var t=-1,s=e==null?0:e.length;for(this.clear();++t<s;){var u=e[t];this.set(u[0],u[1])}}function py(){this.size=0,this.__data__={hash:new sn,map:new(es||Oi),string:new sn}}function gy(e){var t=yo(this,e).delete(e);return this.size-=t?1:0,t}function yy(e){return yo(this,e).get(e)}function vy(e){return yo(this,e).has(e)}function _y(e,t){var s=yo(this,e),u=s.size;return s.set(e,t),this.size+=s.size==u?0:1,this}Ri.prototype.clear=py,Ri.prototype.delete=gy,Ri.prototype.get=yy,Ri.prototype.has=vy,Ri.prototype.set=_y;function on(e){var t=-1,s=e==null?0:e.length;for(this.__data__=new Ri;++t<s;)this.add(e[t])}function my(e){return this.__data__.set(e,K),this}function wy(e){return this.__data__.has(e)}on.prototype.add=on.prototype.push=my,on.prototype.has=wy;function si(e){var t=this.__data__=new Oi(e);this.size=t.size}function by(){this.__data__=new Oi,this.size=0}function Ey(e){var t=this.__data__,s=t.delete(e);return this.size=t.size,s}function xy(e){return this.__data__.get(e)}function Iy(e){return this.__data__.has(e)}function Py(e,t){var s=this.__data__;if(s instanceof Oi){var u=s.__data__;if(!es||u.length<a-1)return u.push([e,t]),this.size=++s.size,this;s=this.__data__=new Ri(u)}return s.set(e,t),this.size=s.size,this}si.prototype.clear=by,si.prototype.delete=Ey,si.prototype.get=xy,si.prototype.has=Iy,si.prototype.set=Py;function zh(e,t){var s=qe(e),u=!s&&ln(e),g=!s&&!u&&Ji(e),E=!s&&!u&&!g&&Nn(e),P=s||u||g||E,R=P?$a(e.length,F0):[],N=R.length;for(var Q in e)(t||it.call(e,Q))&&!(P&&(Q=="length"||g&&(Q=="offset"||Q=="parent")||E&&(Q=="buffer"||Q=="byteLength"||Q=="byteOffset")||Di(Q,N)))&&R.push(Q);return R}function qh(e){var t=e.length;return t?e[nc(0,t-1)]:r}function Sy(e,t){return vo(Tr(e),an(t,0,e.length))}function Oy(e){return vo(Tr(e))}function Wa(e,t,s){(s!==r&&!oi(e[t],s)||s===r&&!(t in e))&&Ai(e,t,s)}function ns(e,t,s){var u=e[t];(!(it.call(e,t)&&oi(u,s))||s===r&&!(t in e))&&Ai(e,t,s)}function io(e,t){for(var s=e.length;s--;)if(oi(e[s][0],t))return s;return-1}function Ry(e,t,s,u){return Ki(e,function(g,E,P){t(u,g,s(g),P)}),u}function $h(e,t){return e&&vi(t,hr(t),e)}function Ay(e,t){return e&&vi(t,Nr(t),e)}function Ai(e,t,s){t=="__proto__"&&Qs?Qs(e,t,{configurable:!0,enumerable:!0,value:s,writable:!0}):e[t]=s}function Ja(e,t){for(var s=-1,u=t.length,g=q(u),E=e==null;++s<u;)g[s]=E?r:Ac(e,t[s]);return g}function an(e,t,s){return e===e&&(s!==r&&(e=e<=s?e:s),t!==r&&(e=e>=t?e:t)),e}function Zr(e,t,s,u,g,E){var P,R=t&Ae,N=t&Oe,Q=t&Qe;if(s&&(P=g?s(e,u,g,E):s(e)),P!==r)return P;if(!Rt(e))return e;var Y=qe(e);if(Y){if(P=vv(e),!R)return Tr(e,P)}else{var ne=_r(e),ge=ne==Fs||ne==Hu;if(Ji(e))return ll(e,R);if(ne==Si||ne==mn||ge&&!g){if(P=N||ge?{}:Cl(e),!R)return N?ov(e,Ay(P,e)):sv(e,$h(P,e))}else{if(!gt[ne])return g?e:{};P=_v(e,ne,R)}}E||(E=new si);var Ee=E.get(e);if(Ee)return Ee;E.set(e,P),of(e)?e.forEach(function(Ne){P.add(Zr(Ne,t,s,Ne,e,E))}):nf(e)&&e.forEach(function(Ne,Ke){P.set(Ke,Zr(Ne,t,s,Ke,e,E))});var De=Q?N?gc:pc:N?Nr:hr,Be=Y?r:De(e);return Gr(Be||e,function(Ne,Ke){Be&&(Ke=Ne,Ne=e[Ke]),ns(P,Ke,Zr(Ne,t,s,Ke,e,E))}),P}function Cy(e){var t=hr(e);return function(s){return Bh(s,e,t)}}function Bh(e,t,s){var u=s.length;if(e==null)return!u;for(e=ut(e);u--;){var g=s[u],E=t[g],P=e[g];if(P===r&&!(g in e)||!E(P))return!1}return!0}function Hh(e,t,s){if(typeof e!="function")throw new Wr(I);return ls(function(){e.apply(r,s)},t)}function ss(e,t,s,u){var g=-1,E=qs,P=!0,R=e.length,N=[],Q=t.length;if(!R)return N;s&&(t=Pt(t,Ur(s))),u?(E=Fa,P=!1):t.length>=a&&(E=Yn,P=!1,t=new on(t));e:for(;++g<R;){var Y=e[g],ne=s==null?Y:s(Y);if(Y=u||Y!==0?Y:0,P&&ne===ne){for(var ge=Q;ge--;)if(t[ge]===ne)continue e;N.push(Y)}else E(t,ne,u)||N.push(Y)}return N}var Ki=yl(yi),Vh=yl(Qa,!0);function Ty(e,t){var s=!0;return Ki(e,function(u,g,E){return s=!!t(u,g,E),s}),s}function no(e,t,s){for(var u=-1,g=e.length;++u<g;){var E=e[u],P=t(E);if(P!=null&&(R===r?P===P&&!qr(P):s(P,R)))var R=P,N=E}return N}function Dy(e,t,s,u){var g=e.length;for(s=$e(s),s<0&&(s=-s>g?0:g+s),u=u===r||u>g?g:$e(u),u<0&&(u+=g),u=s>u?0:cf(u);s<u;)e[s++]=t;return e}function Kh(e,t){var s=[];return Ki(e,function(u,g,E){t(u,g,E)&&s.push(u)}),s}function pr(e,t,s,u,g){var E=-1,P=e.length;for(s||(s=wv),g||(g=[]);++E<P;){var R=e[E];t>0&&s(R)?t>1?pr(R,t-1,s,u,g):Bi(g,R):u||(g[g.length]=R)}return g}var Za=vl(),kh=vl(!0);function yi(e,t){return e&&Za(e,t,hr)}function Qa(e,t){return e&&kh(e,t,hr)}function so(e,t){return $i(t,function(s){return Ni(e[s])})}function cn(e,t){t=Gi(t,e);for(var s=0,u=t.length;e!=null&&s<u;)e=e[_i(t[s++])];return s&&s==u?e:r}function Gh(e,t,s){var u=t(e);return qe(e)?u:Bi(u,s(e))}function xr(e){return e==null?e===r?ag:sg:nn&&nn in ut(e)?pv(e):Ov(e)}function Ya(e,t){return e>t}function Ny(e,t){return e!=null&&it.call(e,t)}function Ly(e,t){return e!=null&&t in ut(e)}function Fy(e,t,s){return e>=vr(t,s)&&e<nr(t,s)}function Xa(e,t,s){for(var u=s?Fa:qs,g=e[0].length,E=e.length,P=E,R=q(E),N=1/0,Q=[];P--;){var Y=e[P];P&&t&&(Y=Pt(Y,Ur(t))),N=vr(Y.length,N),R[P]=!s&&(t||g>=120&&Y.length>=120)?new on(P&&Y):r}Y=e[0];var ne=-1,ge=R[0];e:for(;++ne<g&&Q.length<N;){var Ee=Y[ne],De=t?t(Ee):Ee;if(Ee=s||Ee!==0?Ee:0,!(ge?Yn(ge,De):u(Q,De,s))){for(P=E;--P;){var Be=R[P];if(!(Be?Yn(Be,De):u(e[P],De,s)))continue e}ge&&ge.push(De),Q.push(Ee)}}return Q}function jy(e,t,s,u){return yi(e,function(g,E,P){t(u,s(g),E,P)}),u}function os(e,t,s){t=Gi(t,e),e=Ll(e,t);var u=e==null?e:e[_i(Yr(t))];return u==null?r:Mr(u,e,s)}function Wh(e){return Lt(e)&&xr(e)==mn}function My(e){return Lt(e)&&xr(e)==Qn}function Uy(e){return Lt(e)&&xr(e)==kn}function as(e,t,s,u,g){return e===t?!0:e==null||t==null||!Lt(e)&&!Lt(t)?e!==e&&t!==t:zy(e,t,s,u,as,g)}function zy(e,t,s,u,g,E){var P=qe(e),R=qe(t),N=P?Ns:_r(e),Q=R?Ns:_r(t);N=N==mn?Si:N,Q=Q==mn?Si:Q;var Y=N==Si,ne=Q==Si,ge=N==Q;if(ge&&Ji(e)){if(!Ji(t))return!1;P=!0,Y=!1}if(ge&&!Y)return E||(E=new si),P||Nn(e)?Ol(e,t,s,u,g,E):fv(e,t,N,s,u,g,E);if(!(s&Me)){var Ee=Y&&it.call(e,"__wrapped__"),De=ne&&it.call(t,"__wrapped__");if(Ee||De){var Be=Ee?e.value():e,Ne=De?t.value():t;return E||(E=new si),g(Be,Ne,s,u,E)}}return ge?(E||(E=new si),dv(e,t,s,u,g,E)):!1}function qy(e){return Lt(e)&&_r(e)==ri}function ec(e,t,s,u){var g=s.length,E=g,P=!u;if(e==null)return!E;for(e=ut(e);g--;){var R=s[g];if(P&&R[2]?R[1]!==e[R[0]]:!(R[0]in e))return!1}for(;++g<E;){R=s[g];var N=R[0],Q=e[N],Y=R[1];if(P&&R[2]){if(Q===r&&!(N in e))return!1}else{var ne=new si;if(u)var ge=u(Q,Y,N,e,t,ne);if(!(ge===r?as(Y,Q,Me|mt,u,ne):ge))return!1}}return!0}function Jh(e){if(!Rt(e)||Ev(e))return!1;var t=Ni(e)?q0:Cg;return t.test(hn(e))}function $y(e){return Lt(e)&&xr(e)==Wn}function By(e){return Lt(e)&&_r(e)==ii}function Hy(e){return Lt(e)&&xo(e.length)&&!!wt[xr(e)]}function Zh(e){return typeof e=="function"?e:e==null?Lr:typeof e=="object"?qe(e)?Xh(e[0],e[1]):Yh(e):mf(e)}function tc(e){if(!hs(e))return k0(e);var t=[];for(var s in ut(e))it.call(e,s)&&s!="constructor"&&t.push(s);return t}function Vy(e){if(!Rt(e))return Sv(e);var t=hs(e),s=[];for(var u in e)u=="constructor"&&(t||!it.call(e,u))||s.push(u);return s}function rc(e,t){return e<t}function Qh(e,t){var s=-1,u=Dr(e)?q(e.length):[];return Ki(e,function(g,E,P){u[++s]=t(g,E,P)}),u}function Yh(e){var t=vc(e);return t.length==1&&t[0][2]?Dl(t[0][0],t[0][1]):function(s){return s===e||ec(s,e,t)}}function Xh(e,t){return mc(e)&&Tl(t)?Dl(_i(e),t):function(s){var u=Ac(s,e);return u===r&&u===t?Cc(s,e):as(t,u,Me|mt)}}function oo(e,t,s,u,g){e!==t&&Za(t,function(E,P){if(g||(g=new si),Rt(E))Ky(e,t,P,s,oo,u,g);else{var R=u?u(bc(e,P),E,P+"",e,t,g):r;R===r&&(R=E),Wa(e,P,R)}},Nr)}function Ky(e,t,s,u,g,E,P){var R=bc(e,s),N=bc(t,s),Q=P.get(N);if(Q){Wa(e,s,Q);return}var Y=E?E(R,N,s+"",e,t,P):r,ne=Y===r;if(ne){var ge=qe(N),Ee=!ge&&Ji(N),De=!ge&&!Ee&&Nn(N);Y=N,ge||Ee||De?qe(R)?Y=R:$t(R)?Y=Tr(R):Ee?(ne=!1,Y=ll(N,!0)):De?(ne=!1,Y=fl(N,!0)):Y=[]:fs(N)||ln(N)?(Y=R,ln(R)?Y=uf(R):(!Rt(R)||Ni(R))&&(Y=Cl(N))):ne=!1}ne&&(P.set(N,Y),g(Y,N,u,E,P),P.delete(N)),Wa(e,s,Y)}function el(e,t){var s=e.length;if(s)return t+=t<0?s:0,Di(t,s)?e[t]:r}function tl(e,t,s){t.length?t=Pt(t,function(E){return qe(E)?function(P){return cn(P,E.length===1?E[0]:E)}:E}):t=[Lr];var u=-1;t=Pt(t,Ur(Ce()));var g=Qh(e,function(E,P,R){var N=Pt(t,function(Q){return Q(E)});return{criteria:N,index:++u,value:E}});return _0(g,function(E,P){return nv(E,P,s)})}function ky(e,t){return rl(e,t,function(s,u){return Cc(e,u)})}function rl(e,t,s){for(var u=-1,g=t.length,E={};++u<g;){var P=t[u],R=cn(e,P);s(R,P)&&cs(E,Gi(P,e),R)}return E}function Gy(e){return function(t){return cn(t,e)}}function ic(e,t,s,u){var g=u?v0:En,E=-1,P=t.length,R=e;for(e===t&&(t=Tr(t)),s&&(R=Pt(e,Ur(s)));++E<P;)for(var N=0,Q=t[E],Y=s?s(Q):Q;(N=g(R,Y,N,u))>-1;)R!==e&&Zs.call(R,N,1),Zs.call(e,N,1);return e}function il(e,t){for(var s=e?t.length:0,u=s-1;s--;){var g=t[s];if(s==u||g!==E){var E=g;Di(g)?Zs.call(e,g,1):ac(e,g)}}return e}function nc(e,t){return e+Xs(Mh()*(t-e+1))}function Wy(e,t,s,u){for(var g=-1,E=nr(Ys((t-e)/(s||1)),0),P=q(E);E--;)P[u?E:++g]=e,e+=s;return P}function sc(e,t){var s="";if(!e||t<1||t>qi)return s;do t%2&&(s+=e),t=Xs(t/2),t&&(e+=e);while(t);return s}function Ve(e,t){return Ec(Nl(e,t,Lr),e+"")}function Jy(e){return qh(Ln(e))}function Zy(e,t){var s=Ln(e);return vo(s,an(t,0,s.length))}function cs(e,t,s,u){if(!Rt(e))return e;t=Gi(t,e);for(var g=-1,E=t.length,P=E-1,R=e;R!=null&&++g<E;){var N=_i(t[g]),Q=s;if(N==="__proto__"||N==="constructor"||N==="prototype")return e;if(g!=P){var Y=R[N];Q=u?u(Y,N,R):r,Q===r&&(Q=Rt(Y)?Y:Di(t[g+1])?[]:{})}ns(R,N,Q),R=R[N]}return e}var nl=eo?function(e,t){return eo.set(e,t),e}:Lr,Qy=Qs?function(e,t){return Qs(e,"toString",{configurable:!0,enumerable:!1,value:Dc(t),writable:!0})}:Lr;function Yy(e){return vo(Ln(e))}function Qr(e,t,s){var u=-1,g=e.length;t<0&&(t=-t>g?0:g+t),s=s>g?g:s,s<0&&(s+=g),g=t>s?0:s-t>>>0,t>>>=0;for(var E=q(g);++u<g;)E[u]=e[u+t];return E}function Xy(e,t){var s;return Ki(e,function(u,g,E){return s=t(u,g,E),!s}),!!s}function ao(e,t,s){var u=0,g=e==null?u:e.length;if(typeof t=="number"&&t===t&&g<=tg){for(;u<g;){var E=u+g>>>1,P=e[E];P!==null&&!qr(P)&&(s?P<=t:P<t)?u=E+1:g=E}return g}return oc(e,t,Lr,s)}function oc(e,t,s,u){var g=0,E=e==null?0:e.length;if(E===0)return 0;t=s(t);for(var P=t!==t,R=t===null,N=qr(t),Q=t===r;g<E;){var Y=Xs((g+E)/2),ne=s(e[Y]),ge=ne!==r,Ee=ne===null,De=ne===ne,Be=qr(ne);if(P)var Ne=u||De;else Q?Ne=De&&(u||ge):R?Ne=De&&ge&&(u||!Ee):N?Ne=De&&ge&&!Ee&&(u||!Be):Ee||Be?Ne=!1:Ne=u?ne<=t:ne<t;Ne?g=Y+1:E=Y}return vr(E,eg)}function sl(e,t){for(var s=-1,u=e.length,g=0,E=[];++s<u;){var P=e[s],R=t?t(P):P;if(!s||!oi(R,N)){var N=R;E[g++]=P===0?0:P}}return E}function ol(e){return typeof e=="number"?e:qr(e)?Ds:+e}function zr(e){if(typeof e=="string")return e;if(qe(e))return Pt(e,zr)+"";if(qr(e))return Uh?Uh.call(e):"";var t=e+"";return t=="0"&&1/e==-tn?"-0":t}function ki(e,t,s){var u=-1,g=qs,E=e.length,P=!0,R=[],N=R;if(s)P=!1,g=Fa;else if(E>=a){var Q=t?null:hv(e);if(Q)return Bs(Q);P=!1,g=Yn,N=new on}else N=t?[]:R;e:for(;++u<E;){var Y=e[u],ne=t?t(Y):Y;if(Y=s||Y!==0?Y:0,P&&ne===ne){for(var ge=N.length;ge--;)if(N[ge]===ne)continue e;t&&N.push(ne),R.push(Y)}else g(N,ne,s)||(N!==R&&N.push(ne),R.push(Y))}return R}function ac(e,t){return t=Gi(t,e),e=Ll(e,t),e==null||delete e[_i(Yr(t))]}function al(e,t,s,u){return cs(e,t,s(cn(e,t)),u)}function co(e,t,s,u){for(var g=e.length,E=u?g:-1;(u?E--:++E<g)&&t(e[E],E,e););return s?Qr(e,u?0:E,u?E+1:g):Qr(e,u?E+1:0,u?g:E)}function cl(e,t){var s=e;return s instanceof Ge&&(s=s.value()),ja(t,function(u,g){return g.func.apply(g.thisArg,Bi([u],g.args))},s)}function cc(e,t,s){var u=e.length;if(u<2)return u?ki(e[0]):[];for(var g=-1,E=q(u);++g<u;)for(var P=e[g],R=-1;++R<u;)R!=g&&(E[g]=ss(E[g]||P,e[R],t,s));return ki(pr(E,1),t,s)}function ul(e,t,s){for(var u=-1,g=e.length,E=t.length,P={};++u<g;){var R=u<E?t[u]:r;s(P,e[u],R)}return P}function uc(e){return $t(e)?e:[]}function hc(e){return typeof e=="function"?e:Lr}function Gi(e,t){return qe(e)?e:mc(e,t)?[e]:Ul(et(e))}var ev=Ve;function Wi(e,t,s){var u=e.length;return s=s===r?u:s,!t&&s>=u?e:Qr(e,t,s)}var hl=$0||function(e){return dr.clearTimeout(e)};function ll(e,t){if(t)return e.slice();var s=e.length,u=Dh?Dh(s):new e.constructor(s);return e.copy(u),u}function lc(e){var t=new e.constructor(e.byteLength);return new Ws(t).set(new Ws(e)),t}function tv(e,t){var s=t?lc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.byteLength)}function rv(e){var t=new e.constructor(e.source,Wu.exec(e));return t.lastIndex=e.lastIndex,t}function iv(e){return is?ut(is.call(e)):{}}function fl(e,t){var s=t?lc(e.buffer):e.buffer;return new e.constructor(s,e.byteOffset,e.length)}function dl(e,t){if(e!==t){var s=e!==r,u=e===null,g=e===e,E=qr(e),P=t!==r,R=t===null,N=t===t,Q=qr(t);if(!R&&!Q&&!E&&e>t||E&&P&&N&&!R&&!Q||u&&P&&N||!s&&N||!g)return 1;if(!u&&!E&&!Q&&e<t||Q&&s&&g&&!u&&!E||R&&s&&g||!P&&g||!N)return-1}return 0}function nv(e,t,s){for(var u=-1,g=e.criteria,E=t.criteria,P=g.length,R=s.length;++u<P;){var N=dl(g[u],E[u]);if(N){if(u>=R)return N;var Q=s[u];return N*(Q=="desc"?-1:1)}}return e.index-t.index}function pl(e,t,s,u){for(var g=-1,E=e.length,P=s.length,R=-1,N=t.length,Q=nr(E-P,0),Y=q(N+Q),ne=!u;++R<N;)Y[R]=t[R];for(;++g<P;)(ne||g<E)&&(Y[s[g]]=e[g]);for(;Q--;)Y[R++]=e[g++];return Y}function gl(e,t,s,u){for(var g=-1,E=e.length,P=-1,R=s.length,N=-1,Q=t.length,Y=nr(E-R,0),ne=q(Y+Q),ge=!u;++g<Y;)ne[g]=e[g];for(var Ee=g;++N<Q;)ne[Ee+N]=t[N];for(;++P<R;)(ge||g<E)&&(ne[Ee+s[P]]=e[g++]);return ne}function Tr(e,t){var s=-1,u=e.length;for(t||(t=q(u));++s<u;)t[s]=e[s];return t}function vi(e,t,s,u){var g=!s;s||(s={});for(var E=-1,P=t.length;++E<P;){var R=t[E],N=u?u(s[R],e[R],R,s,e):r;N===r&&(N=e[R]),g?Ai(s,R,N):ns(s,R,N)}return s}function sv(e,t){return vi(e,_c(e),t)}function ov(e,t){return vi(e,Rl(e),t)}function uo(e,t){return function(s,u){var g=qe(s)?l0:Ry,E=t?t():{};return g(s,e,Ce(u,2),E)}}function Cn(e){return Ve(function(t,s){var u=-1,g=s.length,E=g>1?s[g-1]:r,P=g>2?s[2]:r;for(E=e.length>3&&typeof E=="function"?(g--,E):r,P&&Ir(s[0],s[1],P)&&(E=g<3?r:E,g=1),t=ut(t);++u<g;){var R=s[u];R&&e(t,R,u,E)}return t})}function yl(e,t){return function(s,u){if(s==null)return s;if(!Dr(s))return e(s,u);for(var g=s.length,E=t?g:-1,P=ut(s);(t?E--:++E<g)&&u(P[E],E,P)!==!1;);return s}}function vl(e){return function(t,s,u){for(var g=-1,E=ut(t),P=u(t),R=P.length;R--;){var N=P[e?R:++g];if(s(E[N],N,E)===!1)break}return t}}function av(e,t,s){var u=t&Et,g=us(e);function E(){var P=this&&this!==dr&&this instanceof E?g:e;return P.apply(u?s:this,arguments)}return E}function _l(e){return function(t){t=et(t);var s=xn(t)?ni(t):r,u=s?s[0]:t.charAt(0),g=s?Wi(s,1).join(""):t.slice(1);return u[e]()+g}}function Tn(e){return function(t){return ja(vf(yf(t).replace(Qg,"")),e,"")}}function us(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var s=An(e.prototype),u=e.apply(s,t);return Rt(u)?u:s}}function cv(e,t,s){var u=us(e);function g(){for(var E=arguments.length,P=q(E),R=E,N=Dn(g);R--;)P[R]=arguments[R];var Q=E<3&&P[0]!==N&&P[E-1]!==N?[]:Hi(P,N);if(E-=Q.length,E<s)return xl(e,t,ho,g.placeholder,r,P,Q,r,r,s-E);var Y=this&&this!==dr&&this instanceof g?u:e;return Mr(Y,this,P)}return g}function ml(e){return function(t,s,u){var g=ut(t);if(!Dr(t)){var E=Ce(s,3);t=hr(t),s=function(R){return E(g[R],R,g)}}var P=e(t,s,u);return P>-1?g[E?t[P]:P]:r}}function wl(e){return Ti(function(t){var s=t.length,u=s,g=Jr.prototype.thru;for(e&&t.reverse();u--;){var E=t[u];if(typeof E!="function")throw new Wr(I);if(g&&!P&&go(E)=="wrapper")var P=new Jr([],!0)}for(u=P?u:s;++u<s;){E=t[u];var R=go(E),N=R=="wrapper"?yc(E):r;N&&wc(N[0])&&N[1]==(qt|ot|It|Er)&&!N[4].length&&N[9]==1?P=P[go(N[0])].apply(P,N[3]):P=E.length==1&&wc(E)?P[R]():P.thru(E)}return function(){var Q=arguments,Y=Q[0];if(P&&Q.length==1&&qe(Y))return P.plant(Y).value();for(var ne=0,ge=s?t[ne].apply(this,Q):Y;++ne<s;)ge=t[ne].call(this,ge);return ge}})}function ho(e,t,s,u,g,E,P,R,N,Q){var Y=t&qt,ne=t&Et,ge=t&xt,Ee=t&(ot|Ye),De=t&zi,Be=ge?r:us(e);function Ne(){for(var Ke=arguments.length,We=q(Ke),$r=Ke;$r--;)We[$r]=arguments[$r];if(Ee)var Pr=Dn(Ne),Br=w0(We,Pr);if(u&&(We=pl(We,u,g,Ee)),E&&(We=gl(We,E,P,Ee)),Ke-=Br,Ee&&Ke<Q){var Bt=Hi(We,Pr);return xl(e,t,ho,Ne.placeholder,s,We,Bt,R,N,Q-Ke)}var ai=ne?s:this,Fi=ge?ai[e]:e;return Ke=We.length,R?We=Rv(We,R):De&&Ke>1&&We.reverse(),Y&&N<Ke&&(We.length=N),this&&this!==dr&&this instanceof Ne&&(Fi=Be||us(Fi)),Fi.apply(ai,We)}return Ne}function bl(e,t){return function(s,u){return jy(s,e,t(u),{})}}function lo(e,t){return function(s,u){var g;if(s===r&&u===r)return t;if(s!==r&&(g=s),u!==r){if(g===r)return u;typeof s=="string"||typeof u=="string"?(s=zr(s),u=zr(u)):(s=ol(s),u=ol(u)),g=e(s,u)}return g}}function fc(e){return Ti(function(t){return t=Pt(t,Ur(Ce())),Ve(function(s){var u=this;return e(t,function(g){return Mr(g,u,s)})})})}function fo(e,t){t=t===r?" ":zr(t);var s=t.length;if(s<2)return s?sc(t,e):t;var u=sc(t,Ys(e/In(t)));return xn(t)?Wi(ni(u),0,e).join(""):u.slice(0,e)}function uv(e,t,s,u){var g=t&Et,E=us(e);function P(){for(var R=-1,N=arguments.length,Q=-1,Y=u.length,ne=q(Y+N),ge=this&&this!==dr&&this instanceof P?E:e;++Q<Y;)ne[Q]=u[Q];for(;N--;)ne[Q++]=arguments[++R];return Mr(ge,g?s:this,ne)}return P}function El(e){return function(t,s,u){return u&&typeof u!="number"&&Ir(t,s,u)&&(s=u=r),t=Li(t),s===r?(s=t,t=0):s=Li(s),u=u===r?t<s?1:-1:Li(u),Wy(t,s,u,e)}}function po(e){return function(t,s){return typeof t=="string"&&typeof s=="string"||(t=Xr(t),s=Xr(s)),e(t,s)}}function xl(e,t,s,u,g,E,P,R,N,Q){var Y=t&ot,ne=Y?P:r,ge=Y?r:P,Ee=Y?E:r,De=Y?r:E;t|=Y?It:br,t&=~(Y?br:It),t&wr||(t&=~(Et|xt));var Be=[e,t,g,Ee,ne,De,ge,R,N,Q],Ne=s.apply(r,Be);return wc(e)&&Fl(Ne,Be),Ne.placeholder=u,jl(Ne,e,t)}function dc(e){var t=ir[e];return function(s,u){if(s=Xr(s),u=u==null?0:vr($e(u),292),u&&jh(s)){var g=(et(s)+"e").split("e"),E=t(g[0]+"e"+(+g[1]+u));return g=(et(E)+"e").split("e"),+(g[0]+"e"+(+g[1]-u))}return t(s)}}var hv=On&&1/Bs(new On([,-0]))[1]==tn?function(e){return new On(e)}:Fc;function Il(e){return function(t){var s=_r(t);return s==ri?Ha(t):s==ii?O0(t):m0(t,e(t))}}function Ci(e,t,s,u,g,E,P,R){var N=t&xt;if(!N&&typeof e!="function")throw new Wr(I);var Q=u?u.length:0;if(Q||(t&=~(It|br),u=g=r),P=P===r?P:nr($e(P),0),R=R===r?R:$e(R),Q-=g?g.length:0,t&br){var Y=u,ne=g;u=g=r}var ge=N?r:yc(e),Ee=[e,t,s,u,g,Y,ne,E,P,R];if(ge&&Pv(Ee,ge),e=Ee[0],t=Ee[1],s=Ee[2],u=Ee[3],g=Ee[4],R=Ee[9]=Ee[9]===r?N?0:e.length:nr(Ee[9]-Q,0),!R&&t&(ot|Ye)&&(t&=~(ot|Ye)),!t||t==Et)var De=av(e,t,s);else t==ot||t==Ye?De=cv(e,t,R):(t==It||t==(Et|It))&&!g.length?De=uv(e,t,s,u):De=ho.apply(r,Ee);var Be=ge?nl:Fl;return jl(Be(De,Ee),e,t)}function Pl(e,t,s,u){return e===r||oi(e,Sn[s])&&!it.call(u,s)?t:e}function Sl(e,t,s,u,g,E){return Rt(e)&&Rt(t)&&(E.set(t,e),oo(e,t,r,Sl,E),E.delete(t)),e}function lv(e){return fs(e)?r:e}function Ol(e,t,s,u,g,E){var P=s&Me,R=e.length,N=t.length;if(R!=N&&!(P&&N>R))return!1;var Q=E.get(e),Y=E.get(t);if(Q&&Y)return Q==t&&Y==e;var ne=-1,ge=!0,Ee=s&mt?new on:r;for(E.set(e,t),E.set(t,e);++ne<R;){var De=e[ne],Be=t[ne];if(u)var Ne=P?u(Be,De,ne,t,e,E):u(De,Be,ne,e,t,E);if(Ne!==r){if(Ne)continue;ge=!1;break}if(Ee){if(!Ma(t,function(Ke,We){if(!Yn(Ee,We)&&(De===Ke||g(De,Ke,s,u,E)))return Ee.push(We)})){ge=!1;break}}else if(!(De===Be||g(De,Be,s,u,E))){ge=!1;break}}return E.delete(e),E.delete(t),ge}function fv(e,t,s,u,g,E,P){switch(s){case wn:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case Qn:return!(e.byteLength!=t.byteLength||!E(new Ws(e),new Ws(t)));case Kn:case kn:case Gn:return oi(+e,+t);case Ls:return e.name==t.name&&e.message==t.message;case Wn:case Jn:return e==t+"";case ri:var R=Ha;case ii:var N=u&Me;if(R||(R=Bs),e.size!=t.size&&!N)return!1;var Q=P.get(e);if(Q)return Q==t;u|=mt,P.set(e,t);var Y=Ol(R(e),R(t),u,g,E,P);return P.delete(e),Y;case js:if(is)return is.call(e)==is.call(t)}return!1}function dv(e,t,s,u,g,E){var P=s&Me,R=pc(e),N=R.length,Q=pc(t),Y=Q.length;if(N!=Y&&!P)return!1;for(var ne=N;ne--;){var ge=R[ne];if(!(P?ge in t:it.call(t,ge)))return!1}var Ee=E.get(e),De=E.get(t);if(Ee&&De)return Ee==t&&De==e;var Be=!0;E.set(e,t),E.set(t,e);for(var Ne=P;++ne<N;){ge=R[ne];var Ke=e[ge],We=t[ge];if(u)var $r=P?u(We,Ke,ge,t,e,E):u(Ke,We,ge,e,t,E);if(!($r===r?Ke===We||g(Ke,We,s,u,E):$r)){Be=!1;break}Ne||(Ne=ge=="constructor")}if(Be&&!Ne){var Pr=e.constructor,Br=t.constructor;Pr!=Br&&"constructor"in e&&"constructor"in t&&!(typeof Pr=="function"&&Pr instanceof Pr&&typeof Br=="function"&&Br instanceof Br)&&(Be=!1)}return E.delete(e),E.delete(t),Be}function Ti(e){return Ec(Nl(e,r,Bl),e+"")}function pc(e){return Gh(e,hr,_c)}function gc(e){return Gh(e,Nr,Rl)}var yc=eo?function(e){return eo.get(e)}:Fc;function go(e){for(var t=e.name+"",s=Rn[t],u=it.call(Rn,t)?s.length:0;u--;){var g=s[u],E=g.func;if(E==null||E==e)return g.name}return t}function Dn(e){var t=it.call(w,"placeholder")?w:e;return t.placeholder}function Ce(){var e=w.iteratee||Nc;return e=e===Nc?Zh:e,arguments.length?e(arguments[0],arguments[1]):e}function yo(e,t){var s=e.__data__;return bv(t)?s[typeof t=="string"?"string":"hash"]:s.map}function vc(e){for(var t=hr(e),s=t.length;s--;){var u=t[s],g=e[u];t[s]=[u,g,Tl(g)]}return t}function un(e,t){var s=I0(e,t);return Jh(s)?s:r}function pv(e){var t=it.call(e,nn),s=e[nn];try{e[nn]=r;var u=!0}catch{}var g=ks.call(e);return u&&(t?e[nn]=s:delete e[nn]),g}var _c=Ka?function(e){return e==null?[]:(e=ut(e),$i(Ka(e),function(t){return Lh.call(e,t)}))}:jc,Rl=Ka?function(e){for(var t=[];e;)Bi(t,_c(e)),e=Js(e);return t}:jc,_r=xr;(ka&&_r(new ka(new ArrayBuffer(1)))!=wn||es&&_r(new es)!=ri||Ga&&_r(Ga.resolve())!=Vu||On&&_r(new On)!=ii||ts&&_r(new ts)!=Zn)&&(_r=function(e){var t=xr(e),s=t==Si?e.constructor:r,u=s?hn(s):"";if(u)switch(u){case Z0:return wn;case Q0:return ri;case Y0:return Vu;case X0:return ii;case ey:return Zn}return t});function gv(e,t,s){for(var u=-1,g=s.length;++u<g;){var E=s[u],P=E.size;switch(E.type){case"drop":e+=P;break;case"dropRight":t-=P;break;case"take":t=vr(t,e+P);break;case"takeRight":e=nr(e,t-P);break}}return{start:e,end:t}}function yv(e){var t=e.match(Eg);return t?t[1].split(xg):[]}function Al(e,t,s){t=Gi(t,e);for(var u=-1,g=t.length,E=!1;++u<g;){var P=_i(t[u]);if(!(E=e!=null&&s(e,P)))break;e=e[P]}return E||++u!=g?E:(g=e==null?0:e.length,!!g&&xo(g)&&Di(P,g)&&(qe(e)||ln(e)))}function vv(e){var t=e.length,s=new e.constructor(t);return t&&typeof e[0]=="string"&&it.call(e,"index")&&(s.index=e.index,s.input=e.input),s}function Cl(e){return typeof e.constructor=="function"&&!hs(e)?An(Js(e)):{}}function _v(e,t,s){var u=e.constructor;switch(t){case Qn:return lc(e);case Kn:case kn:return new u(+e);case wn:return tv(e,s);case va:case _a:case ma:case wa:case ba:case Ea:case xa:case Ia:case Pa:return fl(e,s);case ri:return new u;case Gn:case Jn:return new u(e);case Wn:return rv(e);case ii:return new u;case js:return iv(e)}}function mv(e,t){var s=t.length;if(!s)return e;var u=s-1;return t[u]=(s>1?"& ":"")+t[u],t=t.join(s>2?", ":" "),e.replace(bg,`{
/* [wrapped with `+t+`] */
`)}function wv(e){return qe(e)||ln(e)||!!(Fh&&e&&e[Fh])}function Di(e,t){var s=typeof e;return t=t??qi,!!t&&(s=="number"||s!="symbol"&&Dg.test(e))&&e>-1&&e%1==0&&e<t}function Ir(e,t,s){if(!Rt(s))return!1;var u=typeof t;return(u=="number"?Dr(s)&&Di(t,s.length):u=="string"&&t in s)?oi(s[t],e):!1}function mc(e,t){if(qe(e))return!1;var s=typeof e;return s=="number"||s=="symbol"||s=="boolean"||e==null||qr(e)?!0:vg.test(e)||!yg.test(e)||t!=null&&e in ut(t)}function bv(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function wc(e){var t=go(e),s=w[t];if(typeof s!="function"||!(t in Ge.prototype))return!1;if(e===s)return!0;var u=yc(s);return!!u&&e===u[0]}function Ev(e){return!!Th&&Th in e}var xv=Vs?Ni:Mc;function hs(e){var t=e&&e.constructor,s=typeof t=="function"&&t.prototype||Sn;return e===s}function Tl(e){return e===e&&!Rt(e)}function Dl(e,t){return function(s){return s==null?!1:s[e]===t&&(t!==r||e in ut(s))}}function Iv(e){var t=bo(e,function(u){return s.size===de&&s.clear(),u}),s=t.cache;return t}function Pv(e,t){var s=e[1],u=t[1],g=s|u,E=g<(Et|xt|qt),P=u==qt&&s==ot||u==qt&&s==Er&&e[7].length<=t[8]||u==(qt|Er)&&t[7].length<=t[8]&&s==ot;if(!(E||P))return e;u&Et&&(e[2]=t[2],g|=s&Et?0:wr);var R=t[3];if(R){var N=e[3];e[3]=N?pl(N,R,t[4]):R,e[4]=N?Hi(e[3],we):t[4]}return R=t[5],R&&(N=e[5],e[5]=N?gl(N,R,t[6]):R,e[6]=N?Hi(e[5],we):t[6]),R=t[7],R&&(e[7]=R),u&qt&&(e[8]=e[8]==null?t[8]:vr(e[8],t[8])),e[9]==null&&(e[9]=t[9]),e[0]=t[0],e[1]=g,e}function Sv(e){var t=[];if(e!=null)for(var s in ut(e))t.push(s);return t}function Ov(e){return ks.call(e)}function Nl(e,t,s){return t=nr(t===r?e.length-1:t,0),function(){for(var u=arguments,g=-1,E=nr(u.length-t,0),P=q(E);++g<E;)P[g]=u[t+g];g=-1;for(var R=q(t+1);++g<t;)R[g]=u[g];return R[t]=s(P),Mr(e,this,R)}}function Ll(e,t){return t.length<2?e:cn(e,Qr(t,0,-1))}function Rv(e,t){for(var s=e.length,u=vr(t.length,s),g=Tr(e);u--;){var E=t[u];e[u]=Di(E,s)?g[E]:r}return e}function bc(e,t){if(!(t==="constructor"&&typeof e[t]=="function")&&t!="__proto__")return e[t]}var Fl=Ml(nl),ls=H0||function(e,t){return dr.setTimeout(e,t)},Ec=Ml(Qy);function jl(e,t,s){var u=t+"";return Ec(e,mv(u,Av(yv(u),s)))}function Ml(e){var t=0,s=0;return function(){var u=G0(),g=Zp-(u-s);if(s=u,g>0){if(++t>=Jp)return arguments[0]}else t=0;return e.apply(r,arguments)}}function vo(e,t){var s=-1,u=e.length,g=u-1;for(t=t===r?u:t;++s<t;){var E=nc(s,g),P=e[E];e[E]=e[s],e[s]=P}return e.length=t,e}var Ul=Iv(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(_g,function(s,u,g,E){t.push(g?E.replace(Sg,"$1"):u||s)}),t});function _i(e){if(typeof e=="string"||qr(e))return e;var t=e+"";return t=="0"&&1/e==-tn?"-0":t}function hn(e){if(e!=null){try{return Ks.call(e)}catch{}try{return e+""}catch{}}return""}function Av(e,t){return Gr(rg,function(s){var u="_."+s[0];t&s[1]&&!qs(e,u)&&e.push(u)}),e.sort()}function zl(e){if(e instanceof Ge)return e.clone();var t=new Jr(e.__wrapped__,e.__chain__);return t.__actions__=Tr(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Cv(e,t,s){(s?Ir(e,t,s):t===r)?t=1:t=nr($e(t),0);var u=e==null?0:e.length;if(!u||t<1)return[];for(var g=0,E=0,P=q(Ys(u/t));g<u;)P[E++]=Qr(e,g,g+=t);return P}function Tv(e){for(var t=-1,s=e==null?0:e.length,u=0,g=[];++t<s;){var E=e[t];E&&(g[u++]=E)}return g}function Dv(){var e=arguments.length;if(!e)return[];for(var t=q(e-1),s=arguments[0],u=e;u--;)t[u-1]=arguments[u];return Bi(qe(s)?Tr(s):[s],pr(t,1))}var Nv=Ve(function(e,t){return $t(e)?ss(e,pr(t,1,$t,!0)):[]}),Lv=Ve(function(e,t){var s=Yr(t);return $t(s)&&(s=r),$t(e)?ss(e,pr(t,1,$t,!0),Ce(s,2)):[]}),Fv=Ve(function(e,t){var s=Yr(t);return $t(s)&&(s=r),$t(e)?ss(e,pr(t,1,$t,!0),r,s):[]});function jv(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===r?1:$e(t),Qr(e,t<0?0:t,u)):[]}function Mv(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===r?1:$e(t),t=u-t,Qr(e,0,t<0?0:t)):[]}function Uv(e,t){return e&&e.length?co(e,Ce(t,3),!0,!0):[]}function zv(e,t){return e&&e.length?co(e,Ce(t,3),!0):[]}function qv(e,t,s,u){var g=e==null?0:e.length;return g?(s&&typeof s!="number"&&Ir(e,t,s)&&(s=0,u=g),Dy(e,t,s,u)):[]}function ql(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var g=s==null?0:$e(s);return g<0&&(g=nr(u+g,0)),$s(e,Ce(t,3),g)}function $l(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var g=u-1;return s!==r&&(g=$e(s),g=s<0?nr(u+g,0):vr(g,u-1)),$s(e,Ce(t,3),g,!0)}function Bl(e){var t=e==null?0:e.length;return t?pr(e,1):[]}function $v(e){var t=e==null?0:e.length;return t?pr(e,tn):[]}function Bv(e,t){var s=e==null?0:e.length;return s?(t=t===r?1:$e(t),pr(e,t)):[]}function Hv(e){for(var t=-1,s=e==null?0:e.length,u={};++t<s;){var g=e[t];u[g[0]]=g[1]}return u}function Hl(e){return e&&e.length?e[0]:r}function Vv(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var g=s==null?0:$e(s);return g<0&&(g=nr(u+g,0)),En(e,t,g)}function Kv(e){var t=e==null?0:e.length;return t?Qr(e,0,-1):[]}var kv=Ve(function(e){var t=Pt(e,uc);return t.length&&t[0]===e[0]?Xa(t):[]}),Gv=Ve(function(e){var t=Yr(e),s=Pt(e,uc);return t===Yr(s)?t=r:s.pop(),s.length&&s[0]===e[0]?Xa(s,Ce(t,2)):[]}),Wv=Ve(function(e){var t=Yr(e),s=Pt(e,uc);return t=typeof t=="function"?t:r,t&&s.pop(),s.length&&s[0]===e[0]?Xa(s,r,t):[]});function Jv(e,t){return e==null?"":K0.call(e,t)}function Yr(e){var t=e==null?0:e.length;return t?e[t-1]:r}function Zv(e,t,s){var u=e==null?0:e.length;if(!u)return-1;var g=u;return s!==r&&(g=$e(s),g=g<0?nr(u+g,0):vr(g,u-1)),t===t?A0(e,t,g):$s(e,xh,g,!0)}function Qv(e,t){return e&&e.length?el(e,$e(t)):r}var Yv=Ve(Vl);function Vl(e,t){return e&&e.length&&t&&t.length?ic(e,t):e}function Xv(e,t,s){return e&&e.length&&t&&t.length?ic(e,t,Ce(s,2)):e}function e_(e,t,s){return e&&e.length&&t&&t.length?ic(e,t,r,s):e}var t_=Ti(function(e,t){var s=e==null?0:e.length,u=Ja(e,t);return il(e,Pt(t,function(g){return Di(g,s)?+g:g}).sort(dl)),u});function r_(e,t){var s=[];if(!(e&&e.length))return s;var u=-1,g=[],E=e.length;for(t=Ce(t,3);++u<E;){var P=e[u];t(P,u,e)&&(s.push(P),g.push(u))}return il(e,g),s}function xc(e){return e==null?e:J0.call(e)}function i_(e,t,s){var u=e==null?0:e.length;return u?(s&&typeof s!="number"&&Ir(e,t,s)?(t=0,s=u):(t=t==null?0:$e(t),s=s===r?u:$e(s)),Qr(e,t,s)):[]}function n_(e,t){return ao(e,t)}function s_(e,t,s){return oc(e,t,Ce(s,2))}function o_(e,t){var s=e==null?0:e.length;if(s){var u=ao(e,t);if(u<s&&oi(e[u],t))return u}return-1}function a_(e,t){return ao(e,t,!0)}function c_(e,t,s){return oc(e,t,Ce(s,2),!0)}function u_(e,t){var s=e==null?0:e.length;if(s){var u=ao(e,t,!0)-1;if(oi(e[u],t))return u}return-1}function h_(e){return e&&e.length?sl(e):[]}function l_(e,t){return e&&e.length?sl(e,Ce(t,2)):[]}function f_(e){var t=e==null?0:e.length;return t?Qr(e,1,t):[]}function d_(e,t,s){return e&&e.length?(t=s||t===r?1:$e(t),Qr(e,0,t<0?0:t)):[]}function p_(e,t,s){var u=e==null?0:e.length;return u?(t=s||t===r?1:$e(t),t=u-t,Qr(e,t<0?0:t,u)):[]}function g_(e,t){return e&&e.length?co(e,Ce(t,3),!1,!0):[]}function y_(e,t){return e&&e.length?co(e,Ce(t,3)):[]}var v_=Ve(function(e){return ki(pr(e,1,$t,!0))}),__=Ve(function(e){var t=Yr(e);return $t(t)&&(t=r),ki(pr(e,1,$t,!0),Ce(t,2))}),m_=Ve(function(e){var t=Yr(e);return t=typeof t=="function"?t:r,ki(pr(e,1,$t,!0),r,t)});function w_(e){return e&&e.length?ki(e):[]}function b_(e,t){return e&&e.length?ki(e,Ce(t,2)):[]}function E_(e,t){return t=typeof t=="function"?t:r,e&&e.length?ki(e,r,t):[]}function Ic(e){if(!(e&&e.length))return[];var t=0;return e=$i(e,function(s){if($t(s))return t=nr(s.length,t),!0}),$a(t,function(s){return Pt(e,Ua(s))})}function Kl(e,t){if(!(e&&e.length))return[];var s=Ic(e);return t==null?s:Pt(s,function(u){return Mr(t,r,u)})}var x_=Ve(function(e,t){return $t(e)?ss(e,t):[]}),I_=Ve(function(e){return cc($i(e,$t))}),P_=Ve(function(e){var t=Yr(e);return $t(t)&&(t=r),cc($i(e,$t),Ce(t,2))}),S_=Ve(function(e){var t=Yr(e);return t=typeof t=="function"?t:r,cc($i(e,$t),r,t)}),O_=Ve(Ic);function R_(e,t){return ul(e||[],t||[],ns)}function A_(e,t){return ul(e||[],t||[],cs)}var C_=Ve(function(e){var t=e.length,s=t>1?e[t-1]:r;return s=typeof s=="function"?(e.pop(),s):r,Kl(e,s)});function kl(e){var t=w(e);return t.__chain__=!0,t}function T_(e,t){return t(e),e}function _o(e,t){return t(e)}var D_=Ti(function(e){var t=e.length,s=t?e[0]:0,u=this.__wrapped__,g=function(E){return Ja(E,e)};return t>1||this.__actions__.length||!(u instanceof Ge)||!Di(s)?this.thru(g):(u=u.slice(s,+s+(t?1:0)),u.__actions__.push({func:_o,args:[g],thisArg:r}),new Jr(u,this.__chain__).thru(function(E){return t&&!E.length&&E.push(r),E}))});function N_(){return kl(this)}function L_(){return new Jr(this.value(),this.__chain__)}function F_(){this.__values__===r&&(this.__values__=af(this.value()));var e=this.__index__>=this.__values__.length,t=e?r:this.__values__[this.__index__++];return{done:e,value:t}}function j_(){return this}function M_(e){for(var t,s=this;s instanceof ro;){var u=zl(s);u.__index__=0,u.__values__=r,t?g.__wrapped__=u:t=u;var g=u;s=s.__wrapped__}return g.__wrapped__=e,t}function U_(){var e=this.__wrapped__;if(e instanceof Ge){var t=e;return this.__actions__.length&&(t=new Ge(this)),t=t.reverse(),t.__actions__.push({func:_o,args:[xc],thisArg:r}),new Jr(t,this.__chain__)}return this.thru(xc)}function z_(){return cl(this.__wrapped__,this.__actions__)}var q_=uo(function(e,t,s){it.call(e,s)?++e[s]:Ai(e,s,1)});function $_(e,t,s){var u=qe(e)?bh:Ty;return s&&Ir(e,t,s)&&(t=r),u(e,Ce(t,3))}function B_(e,t){var s=qe(e)?$i:Kh;return s(e,Ce(t,3))}var H_=ml(ql),V_=ml($l);function K_(e,t){return pr(mo(e,t),1)}function k_(e,t){return pr(mo(e,t),tn)}function G_(e,t,s){return s=s===r?1:$e(s),pr(mo(e,t),s)}function Gl(e,t){var s=qe(e)?Gr:Ki;return s(e,Ce(t,3))}function Wl(e,t){var s=qe(e)?f0:Vh;return s(e,Ce(t,3))}var W_=uo(function(e,t,s){it.call(e,s)?e[s].push(t):Ai(e,s,[t])});function J_(e,t,s,u){e=Dr(e)?e:Ln(e),s=s&&!u?$e(s):0;var g=e.length;return s<0&&(s=nr(g+s,0)),Io(e)?s<=g&&e.indexOf(t,s)>-1:!!g&&En(e,t,s)>-1}var Z_=Ve(function(e,t,s){var u=-1,g=typeof t=="function",E=Dr(e)?q(e.length):[];return Ki(e,function(P){E[++u]=g?Mr(t,P,s):os(P,t,s)}),E}),Q_=uo(function(e,t,s){Ai(e,s,t)});function mo(e,t){var s=qe(e)?Pt:Qh;return s(e,Ce(t,3))}function Y_(e,t,s,u){return e==null?[]:(qe(t)||(t=t==null?[]:[t]),s=u?r:s,qe(s)||(s=s==null?[]:[s]),tl(e,t,s))}var X_=uo(function(e,t,s){e[s?0:1].push(t)},function(){return[[],[]]});function em(e,t,s){var u=qe(e)?ja:Ph,g=arguments.length<3;return u(e,Ce(t,4),s,g,Ki)}function tm(e,t,s){var u=qe(e)?d0:Ph,g=arguments.length<3;return u(e,Ce(t,4),s,g,Vh)}function rm(e,t){var s=qe(e)?$i:Kh;return s(e,Eo(Ce(t,3)))}function im(e){var t=qe(e)?qh:Jy;return t(e)}function nm(e,t,s){(s?Ir(e,t,s):t===r)?t=1:t=$e(t);var u=qe(e)?Sy:Zy;return u(e,t)}function sm(e){var t=qe(e)?Oy:Yy;return t(e)}function om(e){if(e==null)return 0;if(Dr(e))return Io(e)?In(e):e.length;var t=_r(e);return t==ri||t==ii?e.size:tc(e).length}function am(e,t,s){var u=qe(e)?Ma:Xy;return s&&Ir(e,t,s)&&(t=r),u(e,Ce(t,3))}var cm=Ve(function(e,t){if(e==null)return[];var s=t.length;return s>1&&Ir(e,t[0],t[1])?t=[]:s>2&&Ir(t[0],t[1],t[2])&&(t=[t[0]]),tl(e,pr(t,1),[])}),wo=B0||function(){return dr.Date.now()};function um(e,t){if(typeof t!="function")throw new Wr(I);return e=$e(e),function(){if(--e<1)return t.apply(this,arguments)}}function Jl(e,t,s){return t=s?r:t,t=e&&t==null?e.length:t,Ci(e,qt,r,r,r,r,t)}function Zl(e,t){var s;if(typeof t!="function")throw new Wr(I);return e=$e(e),function(){return--e>0&&(s=t.apply(this,arguments)),e<=1&&(t=r),s}}var Pc=Ve(function(e,t,s){var u=Et;if(s.length){var g=Hi(s,Dn(Pc));u|=It}return Ci(e,u,t,s,g)}),Ql=Ve(function(e,t,s){var u=Et|xt;if(s.length){var g=Hi(s,Dn(Ql));u|=It}return Ci(t,u,e,s,g)});function Yl(e,t,s){t=s?r:t;var u=Ci(e,ot,r,r,r,r,r,t);return u.placeholder=Yl.placeholder,u}function Xl(e,t,s){t=s?r:t;var u=Ci(e,Ye,r,r,r,r,r,t);return u.placeholder=Xl.placeholder,u}function ef(e,t,s){var u,g,E,P,R,N,Q=0,Y=!1,ne=!1,ge=!0;if(typeof e!="function")throw new Wr(I);t=Xr(t)||0,Rt(s)&&(Y=!!s.leading,ne="maxWait"in s,E=ne?nr(Xr(s.maxWait)||0,t):E,ge="trailing"in s?!!s.trailing:ge);function Ee(Bt){var ai=u,Fi=g;return u=g=r,Q=Bt,P=e.apply(Fi,ai),P}function De(Bt){return Q=Bt,R=ls(Ke,t),Y?Ee(Bt):P}function Be(Bt){var ai=Bt-N,Fi=Bt-Q,wf=t-ai;return ne?vr(wf,E-Fi):wf}function Ne(Bt){var ai=Bt-N,Fi=Bt-Q;return N===r||ai>=t||ai<0||ne&&Fi>=E}function Ke(){var Bt=wo();if(Ne(Bt))return We(Bt);R=ls(Ke,Be(Bt))}function We(Bt){return R=r,ge&&u?Ee(Bt):(u=g=r,P)}function $r(){R!==r&&hl(R),Q=0,u=N=g=R=r}function Pr(){return R===r?P:We(wo())}function Br(){var Bt=wo(),ai=Ne(Bt);if(u=arguments,g=this,N=Bt,ai){if(R===r)return De(N);if(ne)return hl(R),R=ls(Ke,t),Ee(N)}return R===r&&(R=ls(Ke,t)),P}return Br.cancel=$r,Br.flush=Pr,Br}var hm=Ve(function(e,t){return Hh(e,1,t)}),lm=Ve(function(e,t,s){return Hh(e,Xr(t)||0,s)});function fm(e){return Ci(e,zi)}function bo(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new Wr(I);var s=function(){var u=arguments,g=t?t.apply(this,u):u[0],E=s.cache;if(E.has(g))return E.get(g);var P=e.apply(this,u);return s.cache=E.set(g,P)||E,P};return s.cache=new(bo.Cache||Ri),s}bo.Cache=Ri;function Eo(e){if(typeof e!="function")throw new Wr(I);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function dm(e){return Zl(2,e)}var pm=ev(function(e,t){t=t.length==1&&qe(t[0])?Pt(t[0],Ur(Ce())):Pt(pr(t,1),Ur(Ce()));var s=t.length;return Ve(function(u){for(var g=-1,E=vr(u.length,s);++g<E;)u[g]=t[g].call(this,u[g]);return Mr(e,this,u)})}),Sc=Ve(function(e,t){var s=Hi(t,Dn(Sc));return Ci(e,It,r,t,s)}),tf=Ve(function(e,t){var s=Hi(t,Dn(tf));return Ci(e,br,r,t,s)}),gm=Ti(function(e,t){return Ci(e,Er,r,r,r,t)});function ym(e,t){if(typeof e!="function")throw new Wr(I);return t=t===r?t:$e(t),Ve(e,t)}function vm(e,t){if(typeof e!="function")throw new Wr(I);return t=t==null?0:nr($e(t),0),Ve(function(s){var u=s[t],g=Wi(s,0,t);return u&&Bi(g,u),Mr(e,this,g)})}function _m(e,t,s){var u=!0,g=!0;if(typeof e!="function")throw new Wr(I);return Rt(s)&&(u="leading"in s?!!s.leading:u,g="trailing"in s?!!s.trailing:g),ef(e,t,{leading:u,maxWait:t,trailing:g})}function mm(e){return Jl(e,1)}function wm(e,t){return Sc(hc(t),e)}function bm(){if(!arguments.length)return[];var e=arguments[0];return qe(e)?e:[e]}function Em(e){return Zr(e,Qe)}function xm(e,t){return t=typeof t=="function"?t:r,Zr(e,Qe,t)}function Im(e){return Zr(e,Ae|Qe)}function Pm(e,t){return t=typeof t=="function"?t:r,Zr(e,Ae|Qe,t)}function Sm(e,t){return t==null||Bh(e,t,hr(t))}function oi(e,t){return e===t||e!==e&&t!==t}var Om=po(Ya),Rm=po(function(e,t){return e>=t}),ln=Wh(function(){return arguments}())?Wh:function(e){return Lt(e)&&it.call(e,"callee")&&!Lh.call(e,"callee")},qe=q.isArray,Am=gh?Ur(gh):My;function Dr(e){return e!=null&&xo(e.length)&&!Ni(e)}function $t(e){return Lt(e)&&Dr(e)}function Cm(e){return e===!0||e===!1||Lt(e)&&xr(e)==Kn}var Ji=V0||Mc,Tm=yh?Ur(yh):Uy;function Dm(e){return Lt(e)&&e.nodeType===1&&!fs(e)}function Nm(e){if(e==null)return!0;if(Dr(e)&&(qe(e)||typeof e=="string"||typeof e.splice=="function"||Ji(e)||Nn(e)||ln(e)))return!e.length;var t=_r(e);if(t==ri||t==ii)return!e.size;if(hs(e))return!tc(e).length;for(var s in e)if(it.call(e,s))return!1;return!0}function Lm(e,t){return as(e,t)}function Fm(e,t,s){s=typeof s=="function"?s:r;var u=s?s(e,t):r;return u===r?as(e,t,r,s):!!u}function Oc(e){if(!Lt(e))return!1;var t=xr(e);return t==Ls||t==ng||typeof e.message=="string"&&typeof e.name=="string"&&!fs(e)}function jm(e){return typeof e=="number"&&jh(e)}function Ni(e){if(!Rt(e))return!1;var t=xr(e);return t==Fs||t==Hu||t==ig||t==og}function rf(e){return typeof e=="number"&&e==$e(e)}function xo(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=qi}function Rt(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}function Lt(e){return e!=null&&typeof e=="object"}var nf=vh?Ur(vh):qy;function Mm(e,t){return e===t||ec(e,t,vc(t))}function Um(e,t,s){return s=typeof s=="function"?s:r,ec(e,t,vc(t),s)}function zm(e){return sf(e)&&e!=+e}function qm(e){if(xv(e))throw new Ue(v);return Jh(e)}function $m(e){return e===null}function Bm(e){return e==null}function sf(e){return typeof e=="number"||Lt(e)&&xr(e)==Gn}function fs(e){if(!Lt(e)||xr(e)!=Si)return!1;var t=Js(e);if(t===null)return!0;var s=it.call(t,"constructor")&&t.constructor;return typeof s=="function"&&s instanceof s&&Ks.call(s)==U0}var Rc=_h?Ur(_h):$y;function Hm(e){return rf(e)&&e>=-qi&&e<=qi}var of=mh?Ur(mh):By;function Io(e){return typeof e=="string"||!qe(e)&&Lt(e)&&xr(e)==Jn}function qr(e){return typeof e=="symbol"||Lt(e)&&xr(e)==js}var Nn=wh?Ur(wh):Hy;function Vm(e){return e===r}function Km(e){return Lt(e)&&_r(e)==Zn}function km(e){return Lt(e)&&xr(e)==cg}var Gm=po(rc),Wm=po(function(e,t){return e<=t});function af(e){if(!e)return[];if(Dr(e))return Io(e)?ni(e):Tr(e);if(Xn&&e[Xn])return S0(e[Xn]());var t=_r(e),s=t==ri?Ha:t==ii?Bs:Ln;return s(e)}function Li(e){if(!e)return e===0?e:0;if(e=Xr(e),e===tn||e===-tn){var t=e<0?-1:1;return t*Xp}return e===e?e:0}function $e(e){var t=Li(e),s=t%1;return t===t?s?t-s:t:0}function cf(e){return e?an($e(e),0,gi):0}function Xr(e){if(typeof e=="number")return e;if(qr(e))return Ds;if(Rt(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=Rt(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Sh(e);var s=Ag.test(e);return s||Tg.test(e)?u0(e.slice(2),s?2:8):Rg.test(e)?Ds:+e}function uf(e){return vi(e,Nr(e))}function Jm(e){return e?an($e(e),-qi,qi):e===0?e:0}function et(e){return e==null?"":zr(e)}var Zm=Cn(function(e,t){if(hs(t)||Dr(t)){vi(t,hr(t),e);return}for(var s in t)it.call(t,s)&&ns(e,s,t[s])}),hf=Cn(function(e,t){vi(t,Nr(t),e)}),Po=Cn(function(e,t,s,u){vi(t,Nr(t),e,u)}),Qm=Cn(function(e,t,s,u){vi(t,hr(t),e,u)}),Ym=Ti(Ja);function Xm(e,t){var s=An(e);return t==null?s:$h(s,t)}var e1=Ve(function(e,t){e=ut(e);var s=-1,u=t.length,g=u>2?t[2]:r;for(g&&Ir(t[0],t[1],g)&&(u=1);++s<u;)for(var E=t[s],P=Nr(E),R=-1,N=P.length;++R<N;){var Q=P[R],Y=e[Q];(Y===r||oi(Y,Sn[Q])&&!it.call(e,Q))&&(e[Q]=E[Q])}return e}),t1=Ve(function(e){return e.push(r,Sl),Mr(lf,r,e)});function r1(e,t){return Eh(e,Ce(t,3),yi)}function i1(e,t){return Eh(e,Ce(t,3),Qa)}function n1(e,t){return e==null?e:Za(e,Ce(t,3),Nr)}function s1(e,t){return e==null?e:kh(e,Ce(t,3),Nr)}function o1(e,t){return e&&yi(e,Ce(t,3))}function a1(e,t){return e&&Qa(e,Ce(t,3))}function c1(e){return e==null?[]:so(e,hr(e))}function u1(e){return e==null?[]:so(e,Nr(e))}function Ac(e,t,s){var u=e==null?r:cn(e,t);return u===r?s:u}function h1(e,t){return e!=null&&Al(e,t,Ny)}function Cc(e,t){return e!=null&&Al(e,t,Ly)}var l1=bl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=ks.call(t)),e[t]=s},Dc(Lr)),f1=bl(function(e,t,s){t!=null&&typeof t.toString!="function"&&(t=ks.call(t)),it.call(e,t)?e[t].push(s):e[t]=[s]},Ce),d1=Ve(os);function hr(e){return Dr(e)?zh(e):tc(e)}function Nr(e){return Dr(e)?zh(e,!0):Vy(e)}function p1(e,t){var s={};return t=Ce(t,3),yi(e,function(u,g,E){Ai(s,t(u,g,E),u)}),s}function g1(e,t){var s={};return t=Ce(t,3),yi(e,function(u,g,E){Ai(s,g,t(u,g,E))}),s}var y1=Cn(function(e,t,s){oo(e,t,s)}),lf=Cn(function(e,t,s,u){oo(e,t,s,u)}),v1=Ti(function(e,t){var s={};if(e==null)return s;var u=!1;t=Pt(t,function(E){return E=Gi(E,e),u||(u=E.length>1),E}),vi(e,gc(e),s),u&&(s=Zr(s,Ae|Oe|Qe,lv));for(var g=t.length;g--;)ac(s,t[g]);return s});function _1(e,t){return ff(e,Eo(Ce(t)))}var m1=Ti(function(e,t){return e==null?{}:ky(e,t)});function ff(e,t){if(e==null)return{};var s=Pt(gc(e),function(u){return[u]});return t=Ce(t),rl(e,s,function(u,g){return t(u,g[0])})}function w1(e,t,s){t=Gi(t,e);var u=-1,g=t.length;for(g||(g=1,e=r);++u<g;){var E=e==null?r:e[_i(t[u])];E===r&&(u=g,E=s),e=Ni(E)?E.call(e):E}return e}function b1(e,t,s){return e==null?e:cs(e,t,s)}function E1(e,t,s,u){return u=typeof u=="function"?u:r,e==null?e:cs(e,t,s,u)}var df=Il(hr),pf=Il(Nr);function x1(e,t,s){var u=qe(e),g=u||Ji(e)||Nn(e);if(t=Ce(t,4),s==null){var E=e&&e.constructor;g?s=u?new E:[]:Rt(e)?s=Ni(E)?An(Js(e)):{}:s={}}return(g?Gr:yi)(e,function(P,R,N){return t(s,P,R,N)}),s}function I1(e,t){return e==null?!0:ac(e,t)}function P1(e,t,s){return e==null?e:al(e,t,hc(s))}function S1(e,t,s,u){return u=typeof u=="function"?u:r,e==null?e:al(e,t,hc(s),u)}function Ln(e){return e==null?[]:Ba(e,hr(e))}function O1(e){return e==null?[]:Ba(e,Nr(e))}function R1(e,t,s){return s===r&&(s=t,t=r),s!==r&&(s=Xr(s),s=s===s?s:0),t!==r&&(t=Xr(t),t=t===t?t:0),an(Xr(e),t,s)}function A1(e,t,s){return t=Li(t),s===r?(s=t,t=0):s=Li(s),e=Xr(e),Fy(e,t,s)}function C1(e,t,s){if(s&&typeof s!="boolean"&&Ir(e,t,s)&&(t=s=r),s===r&&(typeof t=="boolean"?(s=t,t=r):typeof e=="boolean"&&(s=e,e=r)),e===r&&t===r?(e=0,t=1):(e=Li(e),t===r?(t=e,e=0):t=Li(t)),e>t){var u=e;e=t,t=u}if(s||e%1||t%1){var g=Mh();return vr(e+g*(t-e+c0("1e-"+((g+"").length-1))),t)}return nc(e,t)}var T1=Tn(function(e,t,s){return t=t.toLowerCase(),e+(s?gf(t):t)});function gf(e){return Tc(et(e).toLowerCase())}function yf(e){return e=et(e),e&&e.replace(Ng,b0).replace(Yg,"")}function D1(e,t,s){e=et(e),t=zr(t);var u=e.length;s=s===r?u:an($e(s),0,u);var g=s;return s-=t.length,s>=0&&e.slice(s,g)==t}function N1(e){return e=et(e),e&&dg.test(e)?e.replace(ku,E0):e}function L1(e){return e=et(e),e&&mg.test(e)?e.replace(Sa,"\\$&"):e}var F1=Tn(function(e,t,s){return e+(s?"-":"")+t.toLowerCase()}),j1=Tn(function(e,t,s){return e+(s?" ":"")+t.toLowerCase()}),M1=_l("toLowerCase");function U1(e,t,s){e=et(e),t=$e(t);var u=t?In(e):0;if(!t||u>=t)return e;var g=(t-u)/2;return fo(Xs(g),s)+e+fo(Ys(g),s)}function z1(e,t,s){e=et(e),t=$e(t);var u=t?In(e):0;return t&&u<t?e+fo(t-u,s):e}function q1(e,t,s){e=et(e),t=$e(t);var u=t?In(e):0;return t&&u<t?fo(t-u,s)+e:e}function $1(e,t,s){return s||t==null?t=0:t&&(t=+t),W0(et(e).replace(Oa,""),t||0)}function B1(e,t,s){return(s?Ir(e,t,s):t===r)?t=1:t=$e(t),sc(et(e),t)}function H1(){var e=arguments,t=et(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var V1=Tn(function(e,t,s){return e+(s?"_":"")+t.toLowerCase()});function K1(e,t,s){return s&&typeof s!="number"&&Ir(e,t,s)&&(t=s=r),s=s===r?gi:s>>>0,s?(e=et(e),e&&(typeof t=="string"||t!=null&&!Rc(t))&&(t=zr(t),!t&&xn(e))?Wi(ni(e),0,s):e.split(t,s)):[]}var k1=Tn(function(e,t,s){return e+(s?" ":"")+Tc(t)});function G1(e,t,s){return e=et(e),s=s==null?0:an($e(s),0,e.length),t=zr(t),e.slice(s,s+t.length)==t}function W1(e,t,s){var u=w.templateSettings;s&&Ir(e,t,s)&&(t=r),e=et(e),t=Po({},t,u,Pl);var g=Po({},t.imports,u.imports,Pl),E=hr(g),P=Ba(g,E),R,N,Q=0,Y=t.interpolate||Ms,ne="__p += '",ge=Va((t.escape||Ms).source+"|"+Y.source+"|"+(Y===Gu?Og:Ms).source+"|"+(t.evaluate||Ms).source+"|$","g"),Ee="//# sourceURL="+(it.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++i0+"]")+`
`;e.replace(ge,function(Ne,Ke,We,$r,Pr,Br){return We||(We=$r),ne+=e.slice(Q,Br).replace(Lg,x0),Ke&&(R=!0,ne+=`' +
__e(`+Ke+`) +
'`),Pr&&(N=!0,ne+=`';
`+Pr+`;
__p += '`),We&&(ne+=`' +
((__t = (`+We+`)) == null ? '' : __t) +
'`),Q=Br+Ne.length,Ne}),ne+=`';
`;var De=it.call(t,"variable")&&t.variable;if(!De)ne=`with (obj) {
`+ne+`
}
`;else if(Pg.test(De))throw new Ue(L);ne=(N?ne.replace(ug,""):ne).replace(hg,"$1").replace(lg,"$1;"),ne="function("+(De||"obj")+`) {
`+(De?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(N?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ne+`return __p
}`;var Be=_f(function(){return Xe(E,Ee+"return "+ne).apply(r,P)});if(Be.source=ne,Oc(Be))throw Be;return Be}function J1(e){return et(e).toLowerCase()}function Z1(e){return et(e).toUpperCase()}function Q1(e,t,s){if(e=et(e),e&&(s||t===r))return Sh(e);if(!e||!(t=zr(t)))return e;var u=ni(e),g=ni(t),E=Oh(u,g),P=Rh(u,g)+1;return Wi(u,E,P).join("")}function Y1(e,t,s){if(e=et(e),e&&(s||t===r))return e.slice(0,Ch(e)+1);if(!e||!(t=zr(t)))return e;var u=ni(e),g=Rh(u,ni(t))+1;return Wi(u,0,g).join("")}function X1(e,t,s){if(e=et(e),e&&(s||t===r))return e.replace(Oa,"");if(!e||!(t=zr(t)))return e;var u=ni(e),g=Oh(u,ni(t));return Wi(u,g).join("")}function ew(e,t){var s=Gp,u=Wp;if(Rt(t)){var g="separator"in t?t.separator:g;s="length"in t?$e(t.length):s,u="omission"in t?zr(t.omission):u}e=et(e);var E=e.length;if(xn(e)){var P=ni(e);E=P.length}if(s>=E)return e;var R=s-In(u);if(R<1)return u;var N=P?Wi(P,0,R).join(""):e.slice(0,R);if(g===r)return N+u;if(P&&(R+=N.length-R),Rc(g)){if(e.slice(R).search(g)){var Q,Y=N;for(g.global||(g=Va(g.source,et(Wu.exec(g))+"g")),g.lastIndex=0;Q=g.exec(Y);)var ne=Q.index;N=N.slice(0,ne===r?R:ne)}}else if(e.indexOf(zr(g),R)!=R){var ge=N.lastIndexOf(g);ge>-1&&(N=N.slice(0,ge))}return N+u}function tw(e){return e=et(e),e&&fg.test(e)?e.replace(Ku,C0):e}var rw=Tn(function(e,t,s){return e+(s?" ":"")+t.toUpperCase()}),Tc=_l("toUpperCase");function vf(e,t,s){return e=et(e),t=s?r:t,t===r?P0(e)?N0(e):y0(e):e.match(t)||[]}var _f=Ve(function(e,t){try{return Mr(e,r,t)}catch(s){return Oc(s)?s:new Ue(s)}}),iw=Ti(function(e,t){return Gr(t,function(s){s=_i(s),Ai(e,s,Pc(e[s],e))}),e});function nw(e){var t=e==null?0:e.length,s=Ce();return e=t?Pt(e,function(u){if(typeof u[1]!="function")throw new Wr(I);return[s(u[0]),u[1]]}):[],Ve(function(u){for(var g=-1;++g<t;){var E=e[g];if(Mr(E[0],this,u))return Mr(E[1],this,u)}})}function sw(e){return Cy(Zr(e,Ae))}function Dc(e){return function(){return e}}function ow(e,t){return e==null||e!==e?t:e}var aw=wl(),cw=wl(!0);function Lr(e){return e}function Nc(e){return Zh(typeof e=="function"?e:Zr(e,Ae))}function uw(e){return Yh(Zr(e,Ae))}function hw(e,t){return Xh(e,Zr(t,Ae))}var lw=Ve(function(e,t){return function(s){return os(s,e,t)}}),fw=Ve(function(e,t){return function(s){return os(e,s,t)}});function Lc(e,t,s){var u=hr(t),g=so(t,u);s==null&&!(Rt(t)&&(g.length||!u.length))&&(s=t,t=e,e=this,g=so(t,hr(t)));var E=!(Rt(s)&&"chain"in s)||!!s.chain,P=Ni(e);return Gr(g,function(R){var N=t[R];e[R]=N,P&&(e.prototype[R]=function(){var Q=this.__chain__;if(E||Q){var Y=e(this.__wrapped__),ne=Y.__actions__=Tr(this.__actions__);return ne.push({func:N,args:arguments,thisArg:e}),Y.__chain__=Q,Y}return N.apply(e,Bi([this.value()],arguments))})}),e}function dw(){return dr._===this&&(dr._=z0),this}function Fc(){}function pw(e){return e=$e(e),Ve(function(t){return el(t,e)})}var gw=fc(Pt),yw=fc(bh),vw=fc(Ma);function mf(e){return mc(e)?Ua(_i(e)):Gy(e)}function _w(e){return function(t){return e==null?r:cn(e,t)}}var mw=El(),ww=El(!0);function jc(){return[]}function Mc(){return!1}function bw(){return{}}function Ew(){return""}function xw(){return!0}function Iw(e,t){if(e=$e(e),e<1||e>qi)return[];var s=gi,u=vr(e,gi);t=Ce(t),e-=gi;for(var g=$a(u,t);++s<e;)t(s);return g}function Pw(e){return qe(e)?Pt(e,_i):qr(e)?[e]:Tr(Ul(et(e)))}function Sw(e){var t=++M0;return et(e)+t}var Ow=lo(function(e,t){return e+t},0),Rw=dc("ceil"),Aw=lo(function(e,t){return e/t},1),Cw=dc("floor");function Tw(e){return e&&e.length?no(e,Lr,Ya):r}function Dw(e,t){return e&&e.length?no(e,Ce(t,2),Ya):r}function Nw(e){return Ih(e,Lr)}function Lw(e,t){return Ih(e,Ce(t,2))}function Fw(e){return e&&e.length?no(e,Lr,rc):r}function jw(e,t){return e&&e.length?no(e,Ce(t,2),rc):r}var Mw=lo(function(e,t){return e*t},1),Uw=dc("round"),zw=lo(function(e,t){return e-t},0);function qw(e){return e&&e.length?qa(e,Lr):0}function $w(e,t){return e&&e.length?qa(e,Ce(t,2)):0}return w.after=um,w.ary=Jl,w.assign=Zm,w.assignIn=hf,w.assignInWith=Po,w.assignWith=Qm,w.at=Ym,w.before=Zl,w.bind=Pc,w.bindAll=iw,w.bindKey=Ql,w.castArray=bm,w.chain=kl,w.chunk=Cv,w.compact=Tv,w.concat=Dv,w.cond=nw,w.conforms=sw,w.constant=Dc,w.countBy=q_,w.create=Xm,w.curry=Yl,w.curryRight=Xl,w.debounce=ef,w.defaults=e1,w.defaultsDeep=t1,w.defer=hm,w.delay=lm,w.difference=Nv,w.differenceBy=Lv,w.differenceWith=Fv,w.drop=jv,w.dropRight=Mv,w.dropRightWhile=Uv,w.dropWhile=zv,w.fill=qv,w.filter=B_,w.flatMap=K_,w.flatMapDeep=k_,w.flatMapDepth=G_,w.flatten=Bl,w.flattenDeep=$v,w.flattenDepth=Bv,w.flip=fm,w.flow=aw,w.flowRight=cw,w.fromPairs=Hv,w.functions=c1,w.functionsIn=u1,w.groupBy=W_,w.initial=Kv,w.intersection=kv,w.intersectionBy=Gv,w.intersectionWith=Wv,w.invert=l1,w.invertBy=f1,w.invokeMap=Z_,w.iteratee=Nc,w.keyBy=Q_,w.keys=hr,w.keysIn=Nr,w.map=mo,w.mapKeys=p1,w.mapValues=g1,w.matches=uw,w.matchesProperty=hw,w.memoize=bo,w.merge=y1,w.mergeWith=lf,w.method=lw,w.methodOf=fw,w.mixin=Lc,w.negate=Eo,w.nthArg=pw,w.omit=v1,w.omitBy=_1,w.once=dm,w.orderBy=Y_,w.over=gw,w.overArgs=pm,w.overEvery=yw,w.overSome=vw,w.partial=Sc,w.partialRight=tf,w.partition=X_,w.pick=m1,w.pickBy=ff,w.property=mf,w.propertyOf=_w,w.pull=Yv,w.pullAll=Vl,w.pullAllBy=Xv,w.pullAllWith=e_,w.pullAt=t_,w.range=mw,w.rangeRight=ww,w.rearg=gm,w.reject=rm,w.remove=r_,w.rest=ym,w.reverse=xc,w.sampleSize=nm,w.set=b1,w.setWith=E1,w.shuffle=sm,w.slice=i_,w.sortBy=cm,w.sortedUniq=h_,w.sortedUniqBy=l_,w.split=K1,w.spread=vm,w.tail=f_,w.take=d_,w.takeRight=p_,w.takeRightWhile=g_,w.takeWhile=y_,w.tap=T_,w.throttle=_m,w.thru=_o,w.toArray=af,w.toPairs=df,w.toPairsIn=pf,w.toPath=Pw,w.toPlainObject=uf,w.transform=x1,w.unary=mm,w.union=v_,w.unionBy=__,w.unionWith=m_,w.uniq=w_,w.uniqBy=b_,w.uniqWith=E_,w.unset=I1,w.unzip=Ic,w.unzipWith=Kl,w.update=P1,w.updateWith=S1,w.values=Ln,w.valuesIn=O1,w.without=x_,w.words=vf,w.wrap=wm,w.xor=I_,w.xorBy=P_,w.xorWith=S_,w.zip=O_,w.zipObject=R_,w.zipObjectDeep=A_,w.zipWith=C_,w.entries=df,w.entriesIn=pf,w.extend=hf,w.extendWith=Po,Lc(w,w),w.add=Ow,w.attempt=_f,w.camelCase=T1,w.capitalize=gf,w.ceil=Rw,w.clamp=R1,w.clone=Em,w.cloneDeep=Im,w.cloneDeepWith=Pm,w.cloneWith=xm,w.conformsTo=Sm,w.deburr=yf,w.defaultTo=ow,w.divide=Aw,w.endsWith=D1,w.eq=oi,w.escape=N1,w.escapeRegExp=L1,w.every=$_,w.find=H_,w.findIndex=ql,w.findKey=r1,w.findLast=V_,w.findLastIndex=$l,w.findLastKey=i1,w.floor=Cw,w.forEach=Gl,w.forEachRight=Wl,w.forIn=n1,w.forInRight=s1,w.forOwn=o1,w.forOwnRight=a1,w.get=Ac,w.gt=Om,w.gte=Rm,w.has=h1,w.hasIn=Cc,w.head=Hl,w.identity=Lr,w.includes=J_,w.indexOf=Vv,w.inRange=A1,w.invoke=d1,w.isArguments=ln,w.isArray=qe,w.isArrayBuffer=Am,w.isArrayLike=Dr,w.isArrayLikeObject=$t,w.isBoolean=Cm,w.isBuffer=Ji,w.isDate=Tm,w.isElement=Dm,w.isEmpty=Nm,w.isEqual=Lm,w.isEqualWith=Fm,w.isError=Oc,w.isFinite=jm,w.isFunction=Ni,w.isInteger=rf,w.isLength=xo,w.isMap=nf,w.isMatch=Mm,w.isMatchWith=Um,w.isNaN=zm,w.isNative=qm,w.isNil=Bm,w.isNull=$m,w.isNumber=sf,w.isObject=Rt,w.isObjectLike=Lt,w.isPlainObject=fs,w.isRegExp=Rc,w.isSafeInteger=Hm,w.isSet=of,w.isString=Io,w.isSymbol=qr,w.isTypedArray=Nn,w.isUndefined=Vm,w.isWeakMap=Km,w.isWeakSet=km,w.join=Jv,w.kebabCase=F1,w.last=Yr,w.lastIndexOf=Zv,w.lowerCase=j1,w.lowerFirst=M1,w.lt=Gm,w.lte=Wm,w.max=Tw,w.maxBy=Dw,w.mean=Nw,w.meanBy=Lw,w.min=Fw,w.minBy=jw,w.stubArray=jc,w.stubFalse=Mc,w.stubObject=bw,w.stubString=Ew,w.stubTrue=xw,w.multiply=Mw,w.nth=Qv,w.noConflict=dw,w.noop=Fc,w.now=wo,w.pad=U1,w.padEnd=z1,w.padStart=q1,w.parseInt=$1,w.random=C1,w.reduce=em,w.reduceRight=tm,w.repeat=B1,w.replace=H1,w.result=w1,w.round=Uw,w.runInContext=D,w.sample=im,w.size=om,w.snakeCase=V1,w.some=am,w.sortedIndex=n_,w.sortedIndexBy=s_,w.sortedIndexOf=o_,w.sortedLastIndex=a_,w.sortedLastIndexBy=c_,w.sortedLastIndexOf=u_,w.startCase=k1,w.startsWith=G1,w.subtract=zw,w.sum=qw,w.sumBy=$w,w.template=W1,w.times=Iw,w.toFinite=Li,w.toInteger=$e,w.toLength=cf,w.toLower=J1,w.toNumber=Xr,w.toSafeInteger=Jm,w.toString=et,w.toUpper=Z1,w.trim=Q1,w.trimEnd=Y1,w.trimStart=X1,w.truncate=ew,w.unescape=tw,w.uniqueId=Sw,w.upperCase=rw,w.upperFirst=Tc,w.each=Gl,w.eachRight=Wl,w.first=Hl,Lc(w,function(){var e={};return yi(w,function(t,s){it.call(w.prototype,s)||(e[s]=t)}),e}(),{chain:!1}),w.VERSION=o,Gr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){w[e].placeholder=w}),Gr(["drop","take"],function(e,t){Ge.prototype[e]=function(s){s=s===r?1:nr($e(s),0);var u=this.__filtered__&&!t?new Ge(this):this.clone();return u.__filtered__?u.__takeCount__=vr(s,u.__takeCount__):u.__views__.push({size:vr(s,gi),type:e+(u.__dir__<0?"Right":"")}),u},Ge.prototype[e+"Right"]=function(s){return this.reverse()[e](s).reverse()}}),Gr(["filter","map","takeWhile"],function(e,t){var s=t+1,u=s==Bu||s==Yp;Ge.prototype[e]=function(g){var E=this.clone();return E.__iteratees__.push({iteratee:Ce(g,3),type:s}),E.__filtered__=E.__filtered__||u,E}}),Gr(["head","last"],function(e,t){var s="take"+(t?"Right":"");Ge.prototype[e]=function(){return this[s](1).value()[0]}}),Gr(["initial","tail"],function(e,t){var s="drop"+(t?"":"Right");Ge.prototype[e]=function(){return this.__filtered__?new Ge(this):this[s](1)}}),Ge.prototype.compact=function(){return this.filter(Lr)},Ge.prototype.find=function(e){return this.filter(e).head()},Ge.prototype.findLast=function(e){return this.reverse().find(e)},Ge.prototype.invokeMap=Ve(function(e,t){return typeof e=="function"?new Ge(this):this.map(function(s){return os(s,e,t)})}),Ge.prototype.reject=function(e){return this.filter(Eo(Ce(e)))},Ge.prototype.slice=function(e,t){e=$e(e);var s=this;return s.__filtered__&&(e>0||t<0)?new Ge(s):(e<0?s=s.takeRight(-e):e&&(s=s.drop(e)),t!==r&&(t=$e(t),s=t<0?s.dropRight(-t):s.take(t-e)),s)},Ge.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Ge.prototype.toArray=function(){return this.take(gi)},yi(Ge.prototype,function(e,t){var s=/^(?:filter|find|map|reject)|While$/.test(t),u=/^(?:head|last)$/.test(t),g=w[u?"take"+(t=="last"?"Right":""):t],E=u||/^find/.test(t);g&&(w.prototype[t]=function(){var P=this.__wrapped__,R=u?[1]:arguments,N=P instanceof Ge,Q=R[0],Y=N||qe(P),ne=function(Ke){var We=g.apply(w,Bi([Ke],R));return u&&ge?We[0]:We};Y&&s&&typeof Q=="function"&&Q.length!=1&&(N=Y=!1);var ge=this.__chain__,Ee=!!this.__actions__.length,De=E&&!ge,Be=N&&!Ee;if(!E&&Y){P=Be?P:new Ge(this);var Ne=e.apply(P,R);return Ne.__actions__.push({func:_o,args:[ne],thisArg:r}),new Jr(Ne,ge)}return De&&Be?e.apply(this,R):(Ne=this.thru(ne),De?u?Ne.value()[0]:Ne.value():Ne)})}),Gr(["pop","push","shift","sort","splice","unshift"],function(e){var t=Hs[e],s=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",u=/^(?:pop|shift)$/.test(e);w.prototype[e]=function(){var g=arguments;if(u&&!this.__chain__){var E=this.value();return t.apply(qe(E)?E:[],g)}return this[s](function(P){return t.apply(qe(P)?P:[],g)})}}),yi(Ge.prototype,function(e,t){var s=w[t];if(s){var u=s.name+"";it.call(Rn,u)||(Rn[u]=[]),Rn[u].push({name:t,func:s})}}),Rn[ho(r,xt).name]=[{name:"wrapper",func:r}],Ge.prototype.clone=ty,Ge.prototype.reverse=ry,Ge.prototype.value=iy,w.prototype.at=D_,w.prototype.chain=N_,w.prototype.commit=L_,w.prototype.next=F_,w.prototype.plant=M_,w.prototype.reverse=U_,w.prototype.toJSON=w.prototype.valueOf=w.prototype.value=z_,w.prototype.first=w.prototype.head,Xn&&(w.prototype[Xn]=j_),w},Pn=L0();rn?((rn.exports=Pn)._=Pn,Na._=Pn):dr._=Pn}).call(Hn)})(ca,ca.exports);var dp=Object.defineProperty,pp=Object.defineProperties,gp=Object.getOwnPropertyDescriptors,Cu=Object.getOwnPropertySymbols,yp=Object.prototype.hasOwnProperty,vp=Object.prototype.propertyIsEnumerable,Tu=(y,n,r)=>n in y?dp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,As=(y,n)=>{for(var r in n||(n={}))yp.call(n,r)&&Tu(y,r,n[r]);if(Cu)for(var r of Cu(n))vp.call(n,r)&&Tu(y,r,n[r]);return y},_p=(y,n)=>pp(y,gp(n));function _n(y,n,r){var o;const a=(0,m.DQ)(y);return((o=n.rpcMap)==null?void 0:o[a.reference])||`${fp}?chainId=${a.namespace}:${a.reference}&projectId=${r}`}function en(y){return y.includes(":")?y.split(":")[1]:y}function Du(y){return y.map(n=>`${n.split(":")[0]}:${n.split(":")[1]}`)}function mp(y,n){const r=Object.keys(n.namespaces).filter(a=>a.includes(y));if(!r.length)return[];const o=[];return r.forEach(a=>{const v=n.namespaces[a].accounts;o.push(...v)}),o}function wp(y={},n={}){const r=Nu(y),o=Nu(n);return ca.exports.merge(r,o)}function Nu(y){var n,r,o,a;const v={};if(!(0,m.L5)(y))return v;for(const[I,L]of Object.entries(y)){const K=(0,m.gp)(I)?[I]:L.chains,de=L.methods||[],we=L.events||[],Ae=L.rpcMap||{},Oe=(0,m.M)(I);v[Oe]=_p(As(As({},v[Oe]),L),{chains:(0,m.eG)(K,(n=v[Oe])==null?void 0:n.chains),methods:(0,m.eG)(de,(r=v[Oe])==null?void 0:r.methods),events:(0,m.eG)(we,(o=v[Oe])==null?void 0:o.events),rpcMap:As(As({},Ae),(a=v[Oe])==null?void 0:a.rpcMap)})}return v}function bp(y){return y.includes(":")?y.split(":")[2]:y}function Ep(y){const n={};for(const[r,o]of Object.entries(y)){const a=o.methods||[],v=o.events||[],I=o.accounts||[],L=(0,m.gp)(r)?[r]:o.chains?o.chains:Du(o.accounts);n[r]={chains:L,methods:a,events:v,accounts:I}}return n}function ua(y){return typeof y=="number"?y:y.includes("0x")?parseInt(y,16):y.includes(":")?Number(y.split(":")[1]):Number(y)}const Lu={},zt=y=>Lu[y],ha=(y,n)=>{Lu[y]=n};class xp{constructor(n){this.name="polkadot",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getAccounts(){const n=this.namespace.accounts;return n?n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2])||[]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=en(r);n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||_n(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}class Ip{constructor(n){this.name="eip155",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(n){switch(n.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(n);case"eth_chainId":return parseInt(this.getDefaultChain())}return this.namespace.methods.includes(n.request.method)?await this.client.request(n):this.getHttpProvider().request(n.request)}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(parseInt(n),r),this.chainId=parseInt(n),this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}createHttpProvider(n,r){const o=r||_n(`${this.name}:${n}`,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new Ou(o,zt("disableProviderPing")))}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=parseInt(en(r));n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}getHttpProvider(){const n=this.chainId,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}async handleSwitchChain(n){var r,o;let a=n.request.params?(r=n.request.params[0])==null?void 0:r.chainId:"0x0";a=a.startsWith("0x")?a:`0x${a}`;const v=parseInt(a,16);if(this.isChainApproved(v))this.setDefaultChain(`${v}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:n.topic,request:{method:n.request.method,params:[{chainId:a}]},chainId:(o=this.namespace.chains)==null?void 0:o[0]}),this.setDefaultChain(`${v}`);else throw new Error(`Failed to switch to chain 'eip155:${v}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(n){return this.namespace.chains.includes(`${this.name}:${n}`)}}class Pp{constructor(n){this.name="solana",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=en(r);n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||_n(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}class Sp{constructor(n){this.name="cosmos",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=en(r);n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||_n(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}class Op{constructor(n){this.name="cip34",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{const o=this.getCardanoRPCUrl(r),a=en(r);n[a]=this.createHttpProvider(a,o)}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}getCardanoRPCUrl(n){const r=this.namespace.rpcMap;if(r)return r[n]}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||this.getCardanoRPCUrl(n);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}class Rp{constructor(n){this.name="elrond",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=en(r);n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||_n(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}class Ap{constructor(n){this.name="multiversx",this.namespace=n.namespace,this.events=zt("events"),this.client=zt("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(n){this.namespace=Object.assign(this.namespace,n)}requestAccounts(){return this.getAccounts()}request(n){return this.namespace.methods.includes(n.request.method)?this.client.request(n):this.getHttpProvider().request(n.request)}setDefaultChain(n,r){this.httpProviders[n]||this.setHttpProvider(n,r),this.chainId=n,this.events.emit(Ui.DEFAULT_CHAIN_CHANGED,`${this.name}:${n}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const n=this.namespace.chains[0];if(!n)throw new Error("ChainId not found");return n.split(":")[1]}getAccounts(){const n=this.namespace.accounts;return n?[...new Set(n.filter(r=>r.split(":")[1]===this.chainId.toString()).map(r=>r.split(":")[2]))]:[]}createHttpProviders(){const n={};return this.namespace.chains.forEach(r=>{var o;const a=en(r);n[a]=this.createHttpProvider(a,(o=this.namespace.rpcMap)==null?void 0:o[r])}),n}getHttpProvider(){const n=`${this.name}:${this.chainId}`,r=this.httpProviders[n];if(typeof r>"u")throw new Error(`JSON-RPC provider for ${n} not found`);return r}setHttpProvider(n,r){const o=this.createHttpProvider(n,r);o&&(this.httpProviders[n]=o)}createHttpProvider(n,r){const o=r||_n(n,this.namespace,this.client.core.projectId);if(!o)throw new Error(`No RPC url provided for chainId: ${n}`);return new ui(new vn(o,zt("disableProviderPing")))}}var Cp=Object.defineProperty,Tp=Object.defineProperties,Dp=Object.getOwnPropertyDescriptors,Fu=Object.getOwnPropertySymbols,Np=Object.prototype.hasOwnProperty,Lp=Object.prototype.propertyIsEnumerable,ju=(y,n,r)=>n in y?Cp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,Cs=(y,n)=>{for(var r in n||(n={}))Np.call(n,r)&&ju(y,r,n[r]);if(Fu)for(var r of Fu(n))Lp.call(n,r)&&ju(y,r,n[r]);return y},la=(y,n)=>Tp(y,Dp(n));class fa{constructor(n){this.events=new(ae()),this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=n,this.logger=typeof(n==null?void 0:n.logger)<"u"&&typeof(n==null?void 0:n.logger)!="string"?n.logger:(0,he.pino)((0,he.getDefaultLoggerOptions)({level:(n==null?void 0:n.logger)||Ru})),this.disableProviderPing=(n==null?void 0:n.disableProviderPing)||!1}static async init(n){const r=new fa(n);return await r.initialize(),r}async request(n,r){const[o,a]=this.validateChain(r);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(o).request({request:Cs({},n),chainId:`${o}:${a}`,topic:this.session.topic})}sendAsync(n,r,o){this.request(n,o).then(a=>r(null,a)).catch(a=>r(a,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var n;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(n=this.session)==null?void 0:n.topic,reason:(0,m.D6)("USER_DISCONNECTED")}),await this.cleanup()}async connect(n){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(n),await this.cleanupPendingPairings(),!n.skipPairing)return await this.pair(n.pairingTopic)}on(n,r){this.events.on(n,r)}once(n,r){this.events.once(n,r)}removeListener(n,r){this.events.removeListener(n,r)}off(n,r){this.events.off(n,r)}get isWalletConnect(){return!0}async pair(n){this.shouldAbortPairingAttempt=!1;let r=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(r>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:o,approval:a}=await this.client.connect({pairingTopic:n,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});o&&(this.uri=o,this.events.emit("display_uri",o)),await a().then(v=>{this.session=v,this.namespaces||(this.namespaces=Ep(v.namespaces),this.persist("namespaces",this.namespaces))}).catch(v=>{if(v.message!==bu)throw v;r++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(n,r){try{if(!this.session)return;const[o,a]=this.validateChain(n);this.getProvider(o).setDefaultChain(a,r)}catch(o){if(!/Please call connect/.test(o.message))throw o}}async cleanupPendingPairings(n={}){this.logger.info("Cleaning up inactive pairings...");const r=this.client.pairing.getAll();if((0,m.qt)(r)){for(const o of r)n.deletePairings?this.client.core.expirer.set(o.topic,0):await this.client.core.relayer.subscriber.unsubscribe(o.topic);this.logger.info(`Inactive pairings cleared: ${r.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const n=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[n]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await aa.init({logger:this.providerOpts.logger||Ru,relayUrl:this.providerOpts.relayUrl||up,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const n=[...new Set(Object.keys(this.session.namespaces).map(r=>(0,m.M)(r)))];ha("client",this.client),ha("events",this.events),ha("disableProviderPing",this.disableProviderPing),n.forEach(r=>{if(!this.session)return;const o=mp(r,this.session),a=Du(o),v=wp(this.namespaces,this.optionalNamespaces),I=la(Cs({},v[r]),{accounts:o,chains:a});switch(r){case"eip155":this.rpcProviders[r]=new Ip({namespace:I});break;case"solana":this.rpcProviders[r]=new Pp({namespace:I});break;case"cosmos":this.rpcProviders[r]=new Sp({namespace:I});break;case"polkadot":this.rpcProviders[r]=new xp({namespace:I});break;case"cip34":this.rpcProviders[r]=new Op({namespace:I});break;case"elrond":this.rpcProviders[r]=new Rp({namespace:I});break;case"multiversx":this.rpcProviders[r]=new Ap({namespace:I});break}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",n=>{this.events.emit("session_ping",n)}),this.client.on("session_event",n=>{const{params:r}=n,{event:o}=r;if(o.name==="accountsChanged"){const a=o.data;a&&(0,m.qt)(a)&&this.events.emit("accountsChanged",a.map(bp))}else if(o.name==="chainChanged"){const a=r.chainId,v=r.event.data,I=(0,m.M)(a),L=ua(a)!==ua(v)?`${I}:${ua(v)}`:a;this.onChainChanged(L)}else this.events.emit(o.name,o.data);this.events.emit("session_event",n)}),this.client.on("session_update",({topic:n,params:r})=>{var o;const{namespaces:a}=r,v=(o=this.client)==null?void 0:o.session.get(n);this.session=la(Cs({},v),{namespaces:a}),this.onSessionUpdate(),this.events.emit("session_update",{topic:n,params:r})}),this.client.on("session_delete",async n=>{await this.cleanup(),this.events.emit("session_delete",n),this.events.emit("disconnect",la(Cs({},(0,m.D6)("USER_DISCONNECTED")),{data:n.topic}))}),this.on(Ui.DEFAULT_CHAIN_CHANGED,n=>{this.onChainChanged(n,!0)})}getProvider(n){if(!this.rpcProviders[n])throw new Error(`Provider not found: ${n}`);return this.rpcProviders[n]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(n=>{var r;this.getProvider(n).updateNamespace((r=this.session)==null?void 0:r.namespaces[n])})}setNamespaces(n){const{namespaces:r,optionalNamespaces:o,sessionProperties:a}=n;r&&Object.keys(r).length&&(this.namespaces=r),o&&Object.keys(o).length&&(this.optionalNamespaces=o),this.sessionProperties=a,this.persist("namespaces",r),this.persist("optionalNamespaces",o)}validateChain(n){const[r,o]=(n==null?void 0:n.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[r,o];if(r&&!Object.keys(this.namespaces||{}).map(I=>(0,m.M)(I)).includes(r))throw new Error(`Namespace '${r}' is not configured. Please call connect() first with namespace config.`);if(r&&o)return[r,o];const a=(0,m.M)(Object.keys(this.namespaces)[0]),v=this.rpcProviders[a].getDefaultChain();return[a,v]}async requestAccounts(){const[n]=this.validateChain();return await this.getProvider(n).requestAccounts()}onChainChanged(n,r=!1){var o;if(!this.namespaces)return;const[a,v]=this.validateChain(n);r||this.getProvider(a).setDefaultChain(v),((o=this.namespaces[a])!=null?o:this.namespaces[`${a}:${v}`]).defaultChain=v,this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",v)}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(n,r){this.client.core.storage.setItem(`${Au}/${n}`,r)}async getFromStore(n){return await this.client.core.storage.getItem(`${Au}/${n}`)}}const Fp=fa,jp="wc",Mp="ethereum_provider",Up=`${jp}@2:${Mp}:`,zp="https://rpc.walletconnect.com/v1/",da=["eth_sendTransaction","personal_sign"],Mu=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode"],pa=["chainChanged","accountsChanged"],Uu=["chainChanged","accountsChanged","message","disconnect","connect"];var qp=Object.defineProperty,$p=Object.defineProperties,Bp=Object.getOwnPropertyDescriptors,zu=Object.getOwnPropertySymbols,Hp=Object.prototype.hasOwnProperty,Vp=Object.prototype.propertyIsEnumerable,qu=(y,n,r)=>n in y?qp(y,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):y[n]=r,Vn=(y,n)=>{for(var r in n||(n={}))Hp.call(n,r)&&qu(y,r,n[r]);if(zu)for(var r of zu(n))Vp.call(n,r)&&qu(y,r,n[r]);return y},$u=(y,n)=>$p(y,Bp(n));function Ts(y){return Number(y[0].split(":")[1])}function ga(y){return`0x${y.toString(16)}`}function Kp(y){const{chains:n,optionalChains:r,methods:o,optionalMethods:a,events:v,optionalEvents:I,rpcMap:L}=y;if(!(0,m.qt)(n))throw new Error("Invalid chains");const K={chains:n,methods:o||da,events:v||pa,rpcMap:Vn({},n.length?{[Ts(n)]:L[Ts(n)]}:{})},de=v==null?void 0:v.filter(Qe=>!pa.includes(Qe)),we=o==null?void 0:o.filter(Qe=>!da.includes(Qe));if(!r&&!I&&!a&&!(de!=null&&de.length)&&!(we!=null&&we.length))return{required:n.length?K:void 0};const Ae=(de==null?void 0:de.length)&&(we==null?void 0:we.length)||!r,Oe={chains:[...new Set(Ae?K.chains.concat(r||[]):r)],methods:[...new Set(K.methods.concat(a!=null&&a.length?a:Mu))],events:[...new Set(K.events.concat(I!=null&&I.length?I:Uu))],rpcMap:L};return{required:n.length?K:void 0,optional:r.length?Oe:void 0}}class ya{constructor(){this.events=new B.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=Up,this.on=(n,r)=>(this.events.on(n,r),this),this.once=(n,r)=>(this.events.once(n,r),this),this.removeListener=(n,r)=>(this.events.removeListener(n,r),this),this.off=(n,r)=>(this.events.off(n,r),this),this.parseAccount=n=>this.isCompatibleChainId(n)?this.parseAccountId(n).address:n,this.signer={},this.rpc={}}static async init(n){const r=new ya;return await r.initialize(n),r}async request(n){return await this.signer.request(n,this.formatChainId(this.chainId))}sendAsync(n,r){this.signer.sendAsync(n,r,this.formatChainId(this.chainId))}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(n){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(n);const{required:r,optional:o}=Kp(this.rpc);try{const a=await new Promise(async(I,L)=>{var K;this.rpc.showQrModal&&((K=this.modal)==null||K.subscribeModal(de=>{!de.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),L(new Error("Connection request reset. Please try again.")))})),await this.signer.connect($u(Vn({namespaces:Vn({},r&&{[this.namespace]:r})},o&&{optionalNamespaces:{[this.namespace]:o}}),{pairingTopic:n==null?void 0:n.pairingTopic})).then(de=>{I(de)}).catch(de=>{L(new Error(de.message))})});if(!a)return;const v=(0,m.gu)(a.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:v),this.setAccounts(v),this.events.emit("connect",{chainId:ga(this.chainId)})}catch(a){throw this.signer.logger.error(a),a}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",n=>{const{params:r}=n,{event:o}=r;o.name==="accountsChanged"?(this.accounts=this.parseAccounts(o.data),this.events.emit("accountsChanged",this.accounts)):o.name==="chainChanged"?this.setChainId(this.formatChainId(o.data)):this.events.emit(o.name,o.data),this.events.emit("session_event",n)}),this.signer.on("chainChanged",n=>{const r=parseInt(n);this.chainId=r,this.events.emit("chainChanged",ga(this.chainId)),this.persist()}),this.signer.on("session_update",n=>{this.events.emit("session_update",n)}),this.signer.on("session_delete",n=>{this.reset(),this.events.emit("session_delete",n),this.events.emit("disconnect",$u(Vn({},(0,m.D6)("USER_DISCONNECTED")),{data:n.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",n=>{var r,o;this.rpc.showQrModal&&((r=this.modal)==null||r.closeModal(),(o=this.modal)==null||o.openModal({uri:n})),this.events.emit("display_uri",n)})}switchEthereumChain(n){this.request({method:"wallet_switchEthereumChain",params:[{chainId:n.toString(16)}]})}isCompatibleChainId(n){return typeof n=="string"?n.startsWith(`${this.namespace}:`):!1}formatChainId(n){return`${this.namespace}:${n}`}parseChainId(n){return Number(n.split(":")[1])}setChainIds(n){const r=n.filter(o=>this.isCompatibleChainId(o)).map(o=>this.parseChainId(o));r.length&&(this.chainId=r[0],this.events.emit("chainChanged",ga(this.chainId)),this.persist())}setChainId(n){if(this.isCompatibleChainId(n)){const r=this.parseChainId(n);this.chainId=r,this.switchEthereumChain(r)}}parseAccountId(n){const[r,o,a]=n.split(":");return{chainId:`${r}:${o}`,address:a}}setAccounts(n){this.accounts=n.filter(r=>this.parseChainId(this.parseAccountId(r).chainId)===this.chainId).map(r=>this.parseAccountId(r).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(n){var r,o;const a=(r=n==null?void 0:n.chains)!=null?r:[],v=(o=n==null?void 0:n.optionalChains)!=null?o:[],I=a.concat(v);if(!I.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const L=a.length?(n==null?void 0:n.methods)||da:[],K=a.length?(n==null?void 0:n.events)||pa:[],de=(n==null?void 0:n.optionalMethods)||[],we=(n==null?void 0:n.optionalEvents)||[],Ae=(n==null?void 0:n.rpcMap)||this.buildRpcMap(I,n.projectId),Oe=(n==null?void 0:n.qrModalOptions)||void 0;return{chains:a==null?void 0:a.map(Qe=>this.formatChainId(Qe)),optionalChains:v.map(Qe=>this.formatChainId(Qe)),methods:L,events:K,optionalMethods:de,optionalEvents:we,rpcMap:Ae,showQrModal:!!(n!=null&&n.showQrModal),qrModalOptions:Oe,projectId:n.projectId,metadata:n.metadata}}buildRpcMap(n,r){const o={};return n.forEach(a=>{o[a]=this.getRpcUrl(a,r)}),o}async initialize(n){if(this.rpc=this.getRpcConfig(n),this.chainId=this.rpc.chains.length?Ts(this.rpc.chains):Ts(this.rpc.optionalChains),this.signer=await Fp.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:n.disableProviderPing,relayUrl:n.relayUrl,storageOptions:n.storageOptions}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let r;try{const{WalletConnectModal:o}=await z.e(343).then(z.bind(z,59343));r=o}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(r)try{this.modal=new r(Vn({walletConnectVersion:2,projectId:this.rpc.projectId,standaloneChains:this.rpc.chains},this.rpc.qrModalOptions))}catch(o){throw this.signer.logger.error(o),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(n){if(!n)return;const{chains:r,optionalChains:o,rpcMap:a}=n;r&&(0,m.qt)(r)&&(this.rpc.chains=r.map(v=>this.formatChainId(v)),r.forEach(v=>{this.rpc.rpcMap[v]=(a==null?void 0:a[v])||this.getRpcUrl(v)})),o&&(0,m.qt)(o)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=o==null?void 0:o.map(v=>this.formatChainId(v)),o.forEach(v=>{this.rpc.rpcMap[v]=(a==null?void 0:a[v])||this.getRpcUrl(v)}))}getRpcUrl(n,r){var o;return((o=this.rpc.rpcMap)==null?void 0:o[n])||`${zp}?chainId=eip155:${n}&projectId=${r||this.rpc.projectId}`}async loadPersistedSession(){if(!this.session)return;const n=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),r=this.session.namespaces[`${this.namespace}:${n}`]?this.session.namespaces[`${this.namespace}:${n}`]:this.session.namespaces[this.namespace];this.setChainIds(n?[this.formatChainId(n)]:r==null?void 0:r.accounts),this.setAccounts(r==null?void 0:r.accounts)}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(n){return typeof n=="string"||n instanceof String?[this.parseAccount(n)]:n.map(r=>this.parseAccount(r))}}const kp=ya},38200:function(Le,j,z){"use strict";z.d(j,{q:function(){return B}});class B{}},30997:function(Le,j,z){"use strict";z.r(j),z.d(j,{IEvents:function(){return B.q}});var B=z(38200)},32568:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.HEARTBEAT_EVENTS=j.HEARTBEAT_INTERVAL=void 0;const B=z(66736);j.HEARTBEAT_INTERVAL=B.FIVE_SECONDS,j.HEARTBEAT_EVENTS={pulse:"heartbeat_pulse"}},53401:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),z(57875).__exportStar(z(32568),j)},38969:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.HeartBeat=void 0;const B=z(57875),ae=z(17187),m=z(66736),pe=z(1614),V=z(53401);class he extends pe.IHeartBeat{constructor(te){super(te),this.events=new ae.EventEmitter,this.interval=V.HEARTBEAT_INTERVAL,this.interval=(te==null?void 0:te.interval)||V.HEARTBEAT_INTERVAL}static init(te){return B.__awaiter(this,void 0,void 0,function*(){const se=new he(te);return yield se.init(),se})}init(){return B.__awaiter(this,void 0,void 0,function*(){yield this.initialize()})}stop(){clearInterval(this.intervalRef)}on(te,se){this.events.on(te,se)}once(te,se){this.events.once(te,se)}off(te,se){this.events.off(te,se)}removeListener(te,se){this.events.removeListener(te,se)}initialize(){return B.__awaiter(this,void 0,void 0,function*(){this.intervalRef=setInterval(()=>this.pulse(),m.toMiliseconds(this.interval))})}pulse(){this.events.emit(V.HEARTBEAT_EVENTS.pulse)}}j.HeartBeat=he},90772:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0});const B=z(57875);B.__exportStar(z(38969),j),B.__exportStar(z(1614),j),B.__exportStar(z(53401),j)},44174:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.IHeartBeat=void 0;const B=z(30997);class ae extends B.IEvents{constructor(pe){super()}}j.IHeartBeat=ae},1614:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),z(57875).__exportStar(z(44174),j)},85150:function(Le,j,z){"use strict";var B;B={value:!0},B=void 0;const ae=z(63364),m=z(63954),pe=ae.__importDefault(z(30653)),V=z(59728);class he{constructor(){this.localStorage=pe.default}getKeys(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.keys(this.localStorage)})}getEntries(){return ae.__awaiter(this,void 0,void 0,function*(){return Object.entries(this.localStorage).map(V.parseEntry)})}getItem(te){return ae.__awaiter(this,void 0,void 0,function*(){const se=this.localStorage.getItem(te);if(se!==null)return m.safeJsonParse(se)})}setItem(te,se){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.setItem(te,m.safeJsonStringify(se))})}removeItem(te){return ae.__awaiter(this,void 0,void 0,function*(){this.localStorage.removeItem(te)})}}B=he,j.ZP=he},30653:function(Le,j,z){"use strict";(function(){"use strict";let B;function ae(){}B=ae,B.prototype.getItem=function(m){return this.hasOwnProperty(m)?String(this[m]):null},B.prototype.setItem=function(m,pe){this[m]=String(pe)},B.prototype.removeItem=function(m){delete this[m]},B.prototype.clear=function(){const m=this;Object.keys(m).forEach(function(pe){m[pe]=void 0,delete m[pe]})},B.prototype.key=function(m){return m=m||0,Object.keys(this)[m]},B.prototype.__defineGetter__("length",function(){return Object.keys(this).length}),typeof z.g<"u"&&z.g.localStorage?Le.exports=z.g.localStorage:typeof window<"u"&&window.localStorage?Le.exports=window.localStorage:Le.exports=new ae})()},59728:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0});const B=z(63364);B.__exportStar(z(39076),j),B.__exportStar(z(20496),j)},39076:function(Le,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.IKeyValueStorage=void 0;class z{}j.IKeyValueStorage=z},20496:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.parseEntry=void 0;const B=z(63954);function ae(m){var pe;return[m[0],B.safeJsonParse((pe=m[1])!==null&&pe!==void 0?pe:"")]}j.parseEntry=ae},65727:function(Le,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.PINO_CUSTOM_CONTEXT_KEY=j.PINO_LOGGER_DEFAULTS=void 0,j.PINO_LOGGER_DEFAULTS={level:"info"},j.PINO_CUSTOM_CONTEXT_KEY="custom_context"},9107:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.pino=void 0;const B=z(85906),ae=B.__importDefault(z(36559));Object.defineProperty(j,"pino",{enumerable:!0,get:function(){return ae.default}}),B.__exportStar(z(65727),j),B.__exportStar(z(58048),j)},58048:function(Le,j,z){"use strict";Object.defineProperty(j,"__esModule",{value:!0}),j.generateChildLogger=j.formatChildLoggerContext=j.getLoggerContext=j.setBrowserLoggerContext=j.getBrowserLoggerContext=j.getDefaultLoggerOptions=void 0;const B=z(65727);function ae(te){return Object.assign(Object.assign({},te),{level:(te==null?void 0:te.level)||B.PINO_LOGGER_DEFAULTS.level})}j.getDefaultLoggerOptions=ae;function m(te,se=B.PINO_CUSTOM_CONTEXT_KEY){return te[se]||""}j.getBrowserLoggerContext=m;function pe(te,se,le=B.PINO_CUSTOM_CONTEXT_KEY){return te[le]=se,te}j.setBrowserLoggerContext=pe;function V(te,se=B.PINO_CUSTOM_CONTEXT_KEY){let le="";return typeof te.bindings>"u"?le=m(te,se):le=te.bindings().context||"",le}j.getLoggerContext=V;function he(te,se,le=B.PINO_CUSTOM_CONTEXT_KEY){const Re=V(te,le);return Re.trim()?`${Re}/${se}`:se}j.formatChildLoggerContext=he;function Ie(te,se,le=B.PINO_CUSTOM_CONTEXT_KEY){const Re=he(te,se,le),xe=te.child({context:Re});return pe(xe,Re,le)}j.generateChildLogger=Ie},43014:function(){},54098:function(Le,j){var z=typeof self<"u"?self:this,B=function(){function m(){this.fetch=!1,this.DOMException=z.DOMException}return m.prototype=z,new m}();(function(m){var pe=function(V){var he={searchParams:"URLSearchParams"in m,iterable:"Symbol"in m&&"iterator"in Symbol,blob:"FileReader"in m&&"Blob"in m&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in m,arrayBuffer:"ArrayBuffer"in m};function Ie(l){return l&&DataView.prototype.isPrototypeOf(l)}if(he.arrayBuffer)var te=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],se=ArrayBuffer.isView||function(l){return l&&te.indexOf(Object.prototype.toString.call(l))>-1};function le(l){if(typeof l!="string"&&(l=String(l)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(l))throw new TypeError("Invalid character in header field name");return l.toLowerCase()}function Re(l){return typeof l!="string"&&(l=String(l)),l}function xe(l){var p={next:function(){var f=l.shift();return{done:f===void 0,value:f}}};return he.iterable&&(p[Symbol.iterator]=function(){return p}),p}function Te(l){this.map={},l instanceof Te?l.forEach(function(p,f){this.append(f,p)},this):Array.isArray(l)?l.forEach(function(p){this.append(p[0],p[1])},this):l&&Object.getOwnPropertyNames(l).forEach(function(p){this.append(p,l[p])},this)}Te.prototype.append=function(l,p){l=le(l),p=Re(p);var f=this.map[l];this.map[l]=f?f+", "+p:p},Te.prototype.delete=function(l){delete this.map[le(l)]},Te.prototype.get=function(l){return l=le(l),this.has(l)?this.map[l]:null},Te.prototype.has=function(l){return this.map.hasOwnProperty(le(l))},Te.prototype.set=function(l,p){this.map[le(l)]=Re(p)},Te.prototype.forEach=function(l,p){for(var f in this.map)this.map.hasOwnProperty(f)&&l.call(p,this.map[f],f,this)},Te.prototype.keys=function(){var l=[];return this.forEach(function(p,f){l.push(f)}),xe(l)},Te.prototype.values=function(){var l=[];return this.forEach(function(p){l.push(p)}),xe(l)},Te.prototype.entries=function(){var l=[];return this.forEach(function(p,f){l.push([f,p])}),xe(l)},he.iterable&&(Te.prototype[Symbol.iterator]=Te.prototype.entries);function ce(l){if(l.bodyUsed)return Promise.reject(new TypeError("Already read"));l.bodyUsed=!0}function He(l){return new Promise(function(p,f){l.onload=function(){p(l.result)},l.onerror=function(){f(l.error)}})}function tt(l){var p=new FileReader,f=He(p);return p.readAsArrayBuffer(l),f}function ke(l){var p=new FileReader,f=He(p);return p.readAsText(l),f}function Se(l){for(var p=new Uint8Array(l),f=new Array(p.length),_=0;_<p.length;_++)f[_]=String.fromCharCode(p[_]);return f.join("")}function ie(l){if(l.slice)return l.slice(0);var p=new Uint8Array(l.byteLength);return p.set(new Uint8Array(l)),p.buffer}function X(){return this.bodyUsed=!1,this._initBody=function(l){this._bodyInit=l,l?typeof l=="string"?this._bodyText=l:he.blob&&Blob.prototype.isPrototypeOf(l)?this._bodyBlob=l:he.formData&&FormData.prototype.isPrototypeOf(l)?this._bodyFormData=l:he.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)?this._bodyText=l.toString():he.arrayBuffer&&he.blob&&Ie(l)?(this._bodyArrayBuffer=ie(l.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):he.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(l)||se(l))?this._bodyArrayBuffer=ie(l):this._bodyText=l=Object.prototype.toString.call(l):this._bodyText="",this.headers.get("content-type")||(typeof l=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):he.searchParams&&URLSearchParams.prototype.isPrototypeOf(l)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},he.blob&&(this.blob=function(){var l=ce(this);if(l)return l;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?ce(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(tt)}),this.text=function(){var l=ce(this);if(l)return l;if(this._bodyBlob)return ke(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(Se(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},he.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var oe=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function fe(l){var p=l.toUpperCase();return oe.indexOf(p)>-1?p:l}function F(l,p){p=p||{};var f=p.body;if(l instanceof F){if(l.bodyUsed)throw new TypeError("Already read");this.url=l.url,this.credentials=l.credentials,p.headers||(this.headers=new Te(l.headers)),this.method=l.method,this.mode=l.mode,this.signal=l.signal,!f&&l._bodyInit!=null&&(f=l._bodyInit,l.bodyUsed=!0)}else this.url=String(l);if(this.credentials=p.credentials||this.credentials||"same-origin",(p.headers||!this.headers)&&(this.headers=new Te(p.headers)),this.method=fe(p.method||this.method||"GET"),this.mode=p.mode||this.mode||null,this.signal=p.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&f)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(f)}F.prototype.clone=function(){return new F(this,{body:this._bodyInit})};function Z(l){var p=new FormData;return l.trim().split("&").forEach(function(f){if(f){var _=f.split("="),O=_.shift().replace(/\+/g," "),C=_.join("=").replace(/\+/g," ");p.append(decodeURIComponent(O),decodeURIComponent(C))}}),p}function re(l){var p=new Te,f=l.replace(/\r?\n[\t ]+/g," ");return f.split(/\r?\n/).forEach(function(_){var O=_.split(":"),C=O.shift().trim();if(C){var W=O.join(":").trim();p.append(C,W)}}),p}X.call(F.prototype);function ye(l,p){p||(p={}),this.type="default",this.status=p.status===void 0?200:p.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in p?p.statusText:"OK",this.headers=new Te(p.headers),this.url=p.url||"",this._initBody(l)}X.call(ye.prototype),ye.prototype.clone=function(){return new ye(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new Te(this.headers),url:this.url})},ye.error=function(){var l=new ye(null,{status:0,statusText:""});return l.type="error",l};var d=[301,302,303,307,308];ye.redirect=function(l,p){if(d.indexOf(p)===-1)throw new RangeError("Invalid status code");return new ye(null,{status:p,headers:{location:l}})},V.DOMException=m.DOMException;try{new V.DOMException}catch{V.DOMException=function(p,f){this.message=p,this.name=f;var _=Error(p);this.stack=_.stack},V.DOMException.prototype=Object.create(Error.prototype),V.DOMException.prototype.constructor=V.DOMException}function b(l,p){return new Promise(function(f,_){var O=new F(l,p);if(O.signal&&O.signal.aborted)return _(new V.DOMException("Aborted","AbortError"));var C=new XMLHttpRequest;function W(){C.abort()}C.onload=function(){var S={status:C.status,statusText:C.statusText,headers:re(C.getAllResponseHeaders()||"")};S.url="responseURL"in C?C.responseURL:S.headers.get("X-Request-URL");var $="response"in C?C.response:C.responseText;f(new ye($,S))},C.onerror=function(){_(new TypeError("Network request failed"))},C.ontimeout=function(){_(new TypeError("Network request failed"))},C.onabort=function(){_(new V.DOMException("Aborted","AbortError"))},C.open(O.method,O.url,!0),O.credentials==="include"?C.withCredentials=!0:O.credentials==="omit"&&(C.withCredentials=!1),"responseType"in C&&he.blob&&(C.responseType="blob"),O.headers.forEach(function(S,$){C.setRequestHeader($,S)}),O.signal&&(O.signal.addEventListener("abort",W),C.onreadystatechange=function(){C.readyState===4&&O.signal.removeEventListener("abort",W)}),C.send(typeof O._bodyInit>"u"?null:O._bodyInit)})}return b.polyfill=!0,m.fetch||(m.fetch=b,m.Headers=Te,m.Request=F,m.Response=ye),V.Headers=Te,V.Request=F,V.Response=ye,V.fetch=b,Object.defineProperty(V,"__esModule",{value:!0}),V}({})})(B),B.fetch.ponyfill=!0,delete B.fetch.polyfill;var ae=B;j=ae.fetch,j.default=ae.fetch,j.fetch=ae.fetch,j.Headers=ae.Headers,j.Request=ae.Request,j.Response=ae.Response,Le.exports=j},17187:function(Le){"use strict";var j=typeof Reflect=="object"?Reflect:null,z=j&&typeof j.apply=="function"?j.apply:function(X,oe,fe){return Function.prototype.apply.call(X,oe,fe)},B;j&&typeof j.ownKeys=="function"?B=j.ownKeys:Object.getOwnPropertySymbols?B=function(X){return Object.getOwnPropertyNames(X).concat(Object.getOwnPropertySymbols(X))}:B=function(X){return Object.getOwnPropertyNames(X)};function ae(ie){console&&console.warn&&console.warn(ie)}var m=Number.isNaN||function(X){return X!==X};function pe(){pe.init.call(this)}Le.exports=pe,Le.exports.once=tt,pe.EventEmitter=pe,pe.prototype._events=void 0,pe.prototype._eventsCount=0,pe.prototype._maxListeners=void 0;var V=10;function he(ie){if(typeof ie!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof ie)}Object.defineProperty(pe,"defaultMaxListeners",{enumerable:!0,get:function(){return V},set:function(ie){if(typeof ie!="number"||ie<0||m(ie))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+ie+".");V=ie}}),pe.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},pe.prototype.setMaxListeners=function(X){if(typeof X!="number"||X<0||m(X))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+X+".");return this._maxListeners=X,this};function Ie(ie){return ie._maxListeners===void 0?pe.defaultMaxListeners:ie._maxListeners}pe.prototype.getMaxListeners=function(){return Ie(this)},pe.prototype.emit=function(X){for(var oe=[],fe=1;fe<arguments.length;fe++)oe.push(arguments[fe]);var F=X==="error",Z=this._events;if(Z!==void 0)F=F&&Z.error===void 0;else if(!F)return!1;if(F){var re;if(oe.length>0&&(re=oe[0]),re instanceof Error)throw re;var ye=new Error("Unhandled error."+(re?" ("+re.message+")":""));throw ye.context=re,ye}var d=Z[X];if(d===void 0)return!1;if(typeof d=="function")z(d,this,oe);else for(var b=d.length,l=Te(d,b),fe=0;fe<b;++fe)z(l[fe],this,oe);return!0};function te(ie,X,oe,fe){var F,Z,re;if(he(oe),Z=ie._events,Z===void 0?(Z=ie._events=Object.create(null),ie._eventsCount=0):(Z.newListener!==void 0&&(ie.emit("newListener",X,oe.listener?oe.listener:oe),Z=ie._events),re=Z[X]),re===void 0)re=Z[X]=oe,++ie._eventsCount;else if(typeof re=="function"?re=Z[X]=fe?[oe,re]:[re,oe]:fe?re.unshift(oe):re.push(oe),F=Ie(ie),F>0&&re.length>F&&!re.warned){re.warned=!0;var ye=new Error("Possible EventEmitter memory leak detected. "+re.length+" "+String(X)+" listeners added. Use emitter.setMaxListeners() to increase limit");ye.name="MaxListenersExceededWarning",ye.emitter=ie,ye.type=X,ye.count=re.length,ae(ye)}return ie}pe.prototype.addListener=function(X,oe){return te(this,X,oe,!1)},pe.prototype.on=pe.prototype.addListener,pe.prototype.prependListener=function(X,oe){return te(this,X,oe,!0)};function se(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function le(ie,X,oe){var fe={fired:!1,wrapFn:void 0,target:ie,type:X,listener:oe},F=se.bind(fe);return F.listener=oe,fe.wrapFn=F,F}pe.prototype.once=function(X,oe){return he(oe),this.on(X,le(this,X,oe)),this},pe.prototype.prependOnceListener=function(X,oe){return he(oe),this.prependListener(X,le(this,X,oe)),this},pe.prototype.removeListener=function(X,oe){var fe,F,Z,re,ye;if(he(oe),F=this._events,F===void 0)return this;if(fe=F[X],fe===void 0)return this;if(fe===oe||fe.listener===oe)--this._eventsCount===0?this._events=Object.create(null):(delete F[X],F.removeListener&&this.emit("removeListener",X,fe.listener||oe));else if(typeof fe!="function"){for(Z=-1,re=fe.length-1;re>=0;re--)if(fe[re]===oe||fe[re].listener===oe){ye=fe[re].listener,Z=re;break}if(Z<0)return this;Z===0?fe.shift():ce(fe,Z),fe.length===1&&(F[X]=fe[0]),F.removeListener!==void 0&&this.emit("removeListener",X,ye||oe)}return this},pe.prototype.off=pe.prototype.removeListener,pe.prototype.removeAllListeners=function(X){var oe,fe,F;if(fe=this._events,fe===void 0)return this;if(fe.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):fe[X]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete fe[X]),this;if(arguments.length===0){var Z=Object.keys(fe),re;for(F=0;F<Z.length;++F)re=Z[F],re!=="removeListener"&&this.removeAllListeners(re);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(oe=fe[X],typeof oe=="function")this.removeListener(X,oe);else if(oe!==void 0)for(F=oe.length-1;F>=0;F--)this.removeListener(X,oe[F]);return this};function Re(ie,X,oe){var fe=ie._events;if(fe===void 0)return[];var F=fe[X];return F===void 0?[]:typeof F=="function"?oe?[F.listener||F]:[F]:oe?He(F):Te(F,F.length)}pe.prototype.listeners=function(X){return Re(this,X,!0)},pe.prototype.rawListeners=function(X){return Re(this,X,!1)},pe.listenerCount=function(ie,X){return typeof ie.listenerCount=="function"?ie.listenerCount(X):xe.call(ie,X)},pe.prototype.listenerCount=xe;function xe(ie){var X=this._events;if(X!==void 0){var oe=X[ie];if(typeof oe=="function")return 1;if(oe!==void 0)return oe.length}return 0}pe.prototype.eventNames=function(){return this._eventsCount>0?B(this._events):[]};function Te(ie,X){for(var oe=new Array(X),fe=0;fe<X;++fe)oe[fe]=ie[fe];return oe}function ce(ie,X){for(;X+1<ie.length;X++)ie[X]=ie[X+1];ie.pop()}function He(ie){for(var X=new Array(ie.length),oe=0;oe<X.length;++oe)X[oe]=ie[oe].listener||ie[oe];return X}function tt(ie,X){return new Promise(function(oe,fe){function F(re){ie.removeListener(X,Z),fe(re)}function Z(){typeof ie.removeListener=="function"&&ie.removeListener("error",F),oe([].slice.call(arguments))}Se(ie,X,Z,{once:!0}),X!=="error"&&ke(ie,F,{once:!0})})}function ke(ie,X,oe){typeof ie.on=="function"&&Se(ie,"error",X,oe)}function Se(ie,X,oe,fe){if(typeof ie.on=="function")fe.once?ie.once(X,oe):ie.on(X,oe);else if(typeof ie.addEventListener=="function")ie.addEventListener(X,function F(Z){fe.once&&ie.removeEventListener(X,F),oe(Z)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof ie)}},72307:function(Le,j,z){Le=z.nmd(Le);var B=200,ae="__lodash_hash_undefined__",m=1,pe=2,V=9007199254740991,he="[object Arguments]",Ie="[object Array]",te="[object AsyncFunction]",se="[object Boolean]",le="[object Date]",Re="[object Error]",xe="[object Function]",Te="[object GeneratorFunction]",ce="[object Map]",He="[object Number]",tt="[object Null]",ke="[object Object]",Se="[object Promise]",ie="[object Proxy]",X="[object RegExp]",oe="[object Set]",fe="[object String]",F="[object Symbol]",Z="[object Undefined]",re="[object WeakMap]",ye="[object ArrayBuffer]",d="[object DataView]",b="[object Float32Array]",l="[object Float64Array]",p="[object Int8Array]",f="[object Int16Array]",_="[object Int32Array]",O="[object Uint8Array]",C="[object Uint8ClampedArray]",W="[object Uint16Array]",S="[object Uint32Array]",$=/[\\^$.*+?()[\]{}|]/g,Pe=/^\[object .+?Constructor\]$/,ue=/^(?:0|[1-9]\d*)$/,me={};me[b]=me[l]=me[p]=me[f]=me[_]=me[O]=me[C]=me[W]=me[S]=!0,me[he]=me[Ie]=me[ye]=me[se]=me[d]=me[le]=me[Re]=me[xe]=me[ce]=me[He]=me[ke]=me[X]=me[oe]=me[fe]=me[re]=!1;var nt=typeof z.g=="object"&&z.g&&z.g.Object===Object&&z.g,sr=typeof self=="object"&&self&&self.Object===Object&&self,ht=nt||sr||Function("return this")(),H=j&&!j.nodeType&&j,k=H&&!0&&Le&&!Le.nodeType&&Le,M=k&&k.exports===H,h=M&&nt.process,A=function(){try{return h&&h.binding&&h.binding("util")}catch{}}(),be=A&&A.isTypedArray;function Fe(x,T){for(var ee=-1,ve=x==null?0:x.length,ct=0,ze=[];++ee<ve;){var bt=x[ee];T(bt,ee,x)&&(ze[ct++]=bt)}return ze}function Je(x,T){for(var ee=-1,ve=T.length,ct=x.length;++ee<ve;)x[ct+ee]=T[ee];return x}function yt(x,T){for(var ee=-1,ve=x==null?0:x.length;++ee<ve;)if(T(x[ee],ee,x))return!0;return!1}function Ze(x,T){for(var ee=-1,ve=Array(x);++ee<x;)ve[ee]=T(ee);return ve}function st(x){return function(T){return x(T)}}function Ht(x,T){return x.has(T)}function lr(x,T){return x==null?void 0:x[T]}function Qt(x){var T=-1,ee=Array(x.size);return x.forEach(function(ve,ct){ee[++T]=[ct,ve]}),ee}function Yt(x,T){return function(ee){return x(T(ee))}}function At(x){var T=-1,ee=Array(x.size);return x.forEach(function(ve){ee[++T]=ve}),ee}var Ct=Array.prototype,Tt=Function.prototype,lt=Object.prototype,at=ht["__core-js_shared__"],ft=Tt.toString,rt=lt.hasOwnProperty,Vt=function(){var x=/[^.]+$/.exec(at&&at.keys&&at.keys.IE_PROTO||"");return x?"Symbol(src)_1."+x:""}(),Xt=lt.toString,or=RegExp("^"+ft.call(rt).replace($,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),er=M?ht.Buffer:void 0,ar=ht.Symbol,Sr=ht.Uint8Array,cr=lt.propertyIsEnumerable,Fr=Ct.splice,gr=ar?ar.toStringTag:void 0,Hr=Object.getOwnPropertySymbols,mi=er?er.isBuffer:void 0,wi=Yt(Object.keys,Object),ci=ji(ht,"DataView"),bi=ji(ht,"Map"),St=ji(ht,"Promise"),Dt=ji(ht,"Set"),Ft=ji(ht,"WeakMap"),dt=ji(Object,"create"),jt=Ei(ci),vt=Ei(bi),Nt=Ei(St),Ot=Ei(Dt),Kt=Ei(Ft),Mt=ar?ar.prototype:void 0,Ut=Mt?Mt.valueOf:void 0;function pt(x){var T=-1,ee=x==null?0:x.length;for(this.clear();++T<ee;){var ve=x[T];this.set(ve[0],ve[1])}}function kt(){this.__data__=dt?dt(null):{},this.size=0}function Gt(x){var T=this.has(x)&&delete this.__data__[x];return this.size-=T?1:0,T}function Wt(x){var T=this.__data__;if(dt){var ee=T[x];return ee===ae?void 0:ee}return rt.call(T,x)?T[x]:void 0}function Jt(x){var T=this.__data__;return dt?T[x]!==void 0:rt.call(T,x)}function ds(x,T){var ee=this.__data__;return this.size+=this.has(x)?0:1,ee[x]=dt&&T===void 0?ae:T,this}pt.prototype.clear=kt,pt.prototype.delete=Gt,pt.prototype.get=Wt,pt.prototype.has=Jt,pt.prototype.set=ds;function Vr(x){var T=-1,ee=x==null?0:x.length;for(this.clear();++T<ee;){var ve=x[T];this.set(ve[0],ve[1])}}function ps(){this.__data__=[],this.size=0}function So(x){var T=this.__data__,ee=pn(T,x);if(ee<0)return!1;var ve=T.length-1;return ee==ve?T.pop():Fr.call(T,ee,1),--this.size,!0}function gs(x){var T=this.__data__,ee=pn(T,x);return ee<0?void 0:T[ee][1]}function Fn(x){return pn(this.__data__,x)>-1}function fn(x,T){var ee=this.__data__,ve=pn(ee,x);return ve<0?(++this.size,ee.push([x,T])):ee[ve][1]=T,this}Vr.prototype.clear=ps,Vr.prototype.delete=So,Vr.prototype.get=gs,Vr.prototype.has=Fn,Vr.prototype.set=fn;function fr(x){var T=-1,ee=x==null?0:x.length;for(this.clear();++T<ee;){var ve=x[T];this.set(ve[0],ve[1])}}function jr(){this.size=0,this.__data__={hash:new pt,map:new(bi||Vr),string:new pt}}function Uc(x){var T=hi(this,x).delete(x);return this.size-=T?1:0,T}function ui(x){return hi(this,x).get(x)}function zc(x){return hi(this,x).has(x)}function qc(x,T){var ee=hi(this,x),ve=ee.size;return ee.set(x,T),this.size+=ee.size==ve?0:1,this}fr.prototype.clear=jr,fr.prototype.delete=Uc,fr.prototype.get=ui,fr.prototype.has=zc,fr.prototype.set=qc;function dn(x){var T=-1,ee=x==null?0:x.length;for(this.__data__=new fr;++T<ee;)this.add(x[T])}function Oo(x){return this.__data__.set(x,ae),this}function $c(x){return this.__data__.has(x)}dn.prototype.add=dn.prototype.push=Oo,dn.prototype.has=$c;function ei(x){var T=this.__data__=new Vr(x);this.size=T.size}function ys(){this.__data__=new Vr,this.size=0}function Ro(x){var T=this.__data__,ee=T.delete(x);return this.size=T.size,ee}function Ao(x){return this.__data__.get(x)}function Co(x){return this.__data__.has(x)}function To(x,T){var ee=this.__data__;if(ee instanceof Vr){var ve=ee.__data__;if(!bi||ve.length<B-1)return ve.push([x,T]),this.size=++ee.size,this;ee=this.__data__=new fr(ve)}return ee.set(x,T),this.size=ee.size,this}ei.prototype.clear=ys,ei.prototype.delete=Ro,ei.prototype.get=Ao,ei.prototype.has=Co,ei.prototype.set=To;function Do(x,T){var ee=gn(x),ve=!ee&&Ko(x),ct=!ee&&!ve&&Mn(x),ze=!ee&&!ve&&!ct&&Is(x),bt=ee||ve||ct||ze,Zt=bt?Ze(x.length,String):[],rr=Zt.length;for(var _t in x)(T||rt.call(x,_t))&&!(bt&&(_t=="length"||ct&&(_t=="offset"||_t=="parent")||ze&&(_t=="buffer"||_t=="byteLength"||_t=="byteOffset")||qo(_t,rr)))&&Zt.push(_t);return Zt}function pn(x,T){for(var ee=x.length;ee--;)if(ws(x[ee][0],T))return ee;return-1}function No(x,T,ee){var ve=T(x);return gn(x)?ve:Je(ve,ee(x))}function Zi(x){return x==null?x===void 0?Z:tt:gr&&gr in Object(x)?zo(x):Vo(x)}function vs(x){return Yi(x)&&Zi(x)==he}function jn(x,T,ee,ve,ct){return x===T?!0:x==null||T==null||!Yi(x)&&!Yi(T)?x!==x&&T!==T:Lo(x,T,ee,ve,jn,ct)}function Lo(x,T,ee,ve,ct,ze){var bt=gn(x),Zt=gn(T),rr=bt?Ie:li(x),_t=Zt?Ie:li(T);rr=rr==he?ke:rr,_t=_t==he?ke:_t;var mr=rr==ke,Or=_t==ke,ur=rr==_t;if(ur&&Mn(x)){if(!Mn(T))return!1;bt=!0,mr=!1}if(ur&&!mr)return ze||(ze=new ei),bt||Is(x)?_s(x,T,ee,ve,ct,ze):ms(x,T,rr,ee,ve,ct,ze);if(!(ee&m)){var Rr=mr&&rt.call(x,"__wrapped__"),Ar=Or&&rt.call(T,"__wrapped__");if(Rr||Ar){var fi=Rr?x.value():x,ti=Ar?T.value():T;return ze||(ze=new ei),ct(fi,ti,ee,ve,ze)}}return ur?(ze||(ze=new ei),Uo(x,T,ee,ve,ct,ze)):!1}function Fo(x){if(!xs(x)||Bo(x))return!1;var T=bs(x)?or:Pe;return T.test(Ei(x))}function jo(x){return Yi(x)&&Es(x.length)&&!!me[Zi(x)]}function Mo(x){if(!Ho(x))return wi(x);var T=[];for(var ee in Object(x))rt.call(x,ee)&&ee!="constructor"&&T.push(ee);return T}function _s(x,T,ee,ve,ct,ze){var bt=ee&m,Zt=x.length,rr=T.length;if(Zt!=rr&&!(bt&&rr>Zt))return!1;var _t=ze.get(x);if(_t&&ze.get(T))return _t==T;var mr=-1,Or=!0,ur=ee&pe?new dn:void 0;for(ze.set(x,T),ze.set(T,x);++mr<Zt;){var Rr=x[mr],Ar=T[mr];if(ve)var fi=bt?ve(Ar,Rr,mr,T,x,ze):ve(Rr,Ar,mr,x,T,ze);if(fi!==void 0){if(fi)continue;Or=!1;break}if(ur){if(!yt(T,function(ti,xi){if(!Ht(ur,xi)&&(Rr===ti||ct(Rr,ti,ee,ve,ze)))return ur.push(xi)})){Or=!1;break}}else if(!(Rr===Ar||ct(Rr,Ar,ee,ve,ze))){Or=!1;break}}return ze.delete(x),ze.delete(T),Or}function ms(x,T,ee,ve,ct,ze,bt){switch(ee){case d:if(x.byteLength!=T.byteLength||x.byteOffset!=T.byteOffset)return!1;x=x.buffer,T=T.buffer;case ye:return!(x.byteLength!=T.byteLength||!ze(new Sr(x),new Sr(T)));case se:case le:case He:return ws(+x,+T);case Re:return x.name==T.name&&x.message==T.message;case X:case fe:return x==T+"";case ce:var Zt=Qt;case oe:var rr=ve&m;if(Zt||(Zt=At),x.size!=T.size&&!rr)return!1;var _t=bt.get(x);if(_t)return _t==T;ve|=pe,bt.set(x,T);var mr=_s(Zt(x),Zt(T),ve,ct,ze,bt);return bt.delete(x),mr;case F:if(Ut)return Ut.call(x)==Ut.call(T)}return!1}function Uo(x,T,ee,ve,ct,ze){var bt=ee&m,Zt=Qi(x),rr=Zt.length,_t=Qi(T),mr=_t.length;if(rr!=mr&&!bt)return!1;for(var Or=rr;Or--;){var ur=Zt[Or];if(!(bt?ur in T:rt.call(T,ur)))return!1}var Rr=ze.get(x);if(Rr&&ze.get(T))return Rr==T;var Ar=!0;ze.set(x,T),ze.set(T,x);for(var fi=bt;++Or<rr;){ur=Zt[Or];var ti=x[ur],xi=T[ur];if(ve)var Ps=bt?ve(xi,ti,ur,T,x,ze):ve(ti,xi,ur,x,T,ze);if(!(Ps===void 0?ti===xi||ct(ti,xi,ee,ve,ze):Ps)){Ar=!1;break}fi||(fi=ur=="constructor")}if(Ar&&!fi){var Xi=x.constructor,yn=T.constructor;Xi!=yn&&"constructor"in x&&"constructor"in T&&!(typeof Xi=="function"&&Xi instanceof Xi&&typeof yn=="function"&&yn instanceof yn)&&(Ar=!1)}return ze.delete(x),ze.delete(T),Ar}function Qi(x){return No(x,Wo,tr)}function hi(x,T){var ee=x.__data__;return $o(T)?ee[typeof T=="string"?"string":"hash"]:ee.map}function ji(x,T){var ee=lr(x,T);return Fo(ee)?ee:void 0}function zo(x){var T=rt.call(x,gr),ee=x[gr];try{x[gr]=void 0;var ve=!0}catch{}var ct=Xt.call(x);return ve&&(T?x[gr]=ee:delete x[gr]),ct}var tr=Hr?function(x){return x==null?[]:(x=Object(x),Fe(Hr(x),function(T){return cr.call(x,T)}))}:Jo,li=Zi;(ci&&li(new ci(new ArrayBuffer(1)))!=d||bi&&li(new bi)!=ce||St&&li(St.resolve())!=Se||Dt&&li(new Dt)!=oe||Ft&&li(new Ft)!=re)&&(li=function(x){var T=Zi(x),ee=T==ke?x.constructor:void 0,ve=ee?Ei(ee):"";if(ve)switch(ve){case jt:return d;case vt:return ce;case Nt:return Se;case Ot:return oe;case Kt:return re}return T});function qo(x,T){return T=T??V,!!T&&(typeof x=="number"||ue.test(x))&&x>-1&&x%1==0&&x<T}function $o(x){var T=typeof x;return T=="string"||T=="number"||T=="symbol"||T=="boolean"?x!=="__proto__":x===null}function Bo(x){return!!Vt&&Vt in x}function Ho(x){var T=x&&x.constructor,ee=typeof T=="function"&&T.prototype||lt;return x===ee}function Vo(x){return Xt.call(x)}function Ei(x){if(x!=null){try{return ft.call(x)}catch{}try{return x+""}catch{}}return""}function ws(x,T){return x===T||x!==x&&T!==T}var Ko=vs(function(){return arguments}())?vs:function(x){return Yi(x)&&rt.call(x,"callee")&&!cr.call(x,"callee")},gn=Array.isArray;function ko(x){return x!=null&&Es(x.length)&&!bs(x)}var Mn=mi||Zo;function Go(x,T){return jn(x,T)}function bs(x){if(!xs(x))return!1;var T=Zi(x);return T==xe||T==Te||T==te||T==ie}function Es(x){return typeof x=="number"&&x>-1&&x%1==0&&x<=V}function xs(x){var T=typeof x;return x!=null&&(T=="object"||T=="function")}function Yi(x){return x!=null&&typeof x=="object"}var Is=be?st(be):jo;function Wo(x){return ko(x)?Do(x):Mo(x)}function Jo(){return[]}function Zo(){return!1}Le.exports=Go},85346:function(Le){"use strict";function j(B){try{return JSON.stringify(B)}catch{return'"[Circular]"'}}Le.exports=z;function z(B,ae,m){var pe=m&&m.stringify||j,V=1;if(typeof B=="object"&&B!==null){var he=ae.length+V;if(he===1)return B;var Ie=new Array(he);Ie[0]=pe(B);for(var te=1;te<he;te++)Ie[te]=pe(ae[te]);return Ie.join(" ")}if(typeof B!="string")return B;var se=ae.length;if(se===0)return B;for(var le="",Re=1-V,xe=-1,Te=B&&B.length||0,ce=0;ce<Te;){if(B.charCodeAt(ce)===37&&ce+1<Te){switch(xe=xe>-1?xe:0,B.charCodeAt(ce+1)){case 100:case 102:if(Re>=se||ae[Re]==null)break;xe<ce&&(le+=B.slice(xe,ce)),le+=Number(ae[Re]),xe=ce+2,ce++;break;case 105:if(Re>=se||ae[Re]==null)break;xe<ce&&(le+=B.slice(xe,ce)),le+=Math.floor(Number(ae[Re])),xe=ce+2,ce++;break;case 79:case 111:case 106:if(Re>=se||ae[Re]===void 0)break;xe<ce&&(le+=B.slice(xe,ce));var He=typeof ae[Re];if(He==="string"){le+="'"+ae[Re]+"'",xe=ce+2,ce++;break}if(He==="function"){le+=ae[Re].name||"<anonymous>",xe=ce+2,ce++;break}le+=pe(ae[Re]),xe=ce+2,ce++;break;case 115:if(Re>=se)break;xe<ce&&(le+=B.slice(xe,ce)),le+=String(ae[Re]),xe=ce+2,ce++;break;case 37:xe<ce&&(le+=B.slice(xe,ce)),le+="%",xe=ce+2,ce++,Re--;break}++Re}++ce}return xe===-1?B:(xe<Te&&(le+=B.slice(xe)),le)}},63954:function(Le,j){"use strict";Object.defineProperty(j,"__esModule",{value:!0});function z(ae){if(typeof ae!="string")throw new Error(`Cannot safe json parse value of type ${typeof ae}`);try{return JSON.parse(ae)}catch{return ae}}j.safeJsonParse=z;function B(ae){return typeof ae=="string"?ae:JSON.stringify(ae,(m,pe)=>typeof pe>"u"?null:pe)}j.safeJsonStringify=B},57026:function(Le){"use strict";Le.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},36559:function(Le,j,z){"use strict";const B=z(85346);Le.exports=V;const ae=fe().console||{},m={mapHttpRequest:He,mapHttpResponse:He,wrapRequestSerializer:tt,wrapResponseSerializer:tt,wrapErrorSerializer:tt,req:He,res:He,err:Te};function pe(F,Z){return Array.isArray(F)?F.filter(function(ye){return ye!=="!stdSerializers.err"}):F===!0?Object.keys(Z):!1}function V(F){F=F||{},F.browser=F.browser||{};const Z=F.browser.transmit;if(Z&&typeof Z.send!="function")throw Error("pino: transmit option must have a send function");const re=F.browser.write||ae;F.browser.write&&(F.browser.asObject=!0);const ye=F.serializers||{},d=pe(F.browser.serialize,ye);let b=F.browser.serialize;Array.isArray(F.browser.serialize)&&F.browser.serialize.indexOf("!stdSerializers.err")>-1&&(b=!1);const l=["error","fatal","warn","info","debug","trace"];typeof re=="function"&&(re.error=re.fatal=re.warn=re.info=re.debug=re.trace=re),F.enabled===!1&&(F.level="silent");const p=F.level||"info",f=Object.create(re);f.log||(f.log=ke),Object.defineProperty(f,"levelVal",{get:O}),Object.defineProperty(f,"level",{get:C,set:W});const _={transmit:Z,serialize:d,asObject:F.browser.asObject,levels:l,timestamp:ce(F)};f.levels=V.levels,f.level=p,f.setMaxListeners=f.getMaxListeners=f.emit=f.addListener=f.on=f.prependListener=f.once=f.prependOnceListener=f.removeListener=f.removeAllListeners=f.listeners=f.listenerCount=f.eventNames=f.write=f.flush=ke,f.serializers=ye,f._serialize=d,f._stdErrSerialize=b,f.child=S,Z&&(f._logEvent=xe());function O(){return this.level==="silent"?1/0:this.levels.values[this.level]}function C(){return this._level}function W($){if($!=="silent"&&!this.levels.values[$])throw Error("unknown level "+$);this._level=$,he(_,f,"error","log"),he(_,f,"fatal","error"),he(_,f,"warn","error"),he(_,f,"info","log"),he(_,f,"debug","log"),he(_,f,"trace","log")}function S($,Pe){if(!$)throw new Error("missing bindings for child Pino");Pe=Pe||{},d&&$.serializers&&(Pe.serializers=$.serializers);const ue=Pe.serializers;if(d&&ue){var me=Object.assign({},ye,ue),nt=F.browser.serialize===!0?Object.keys(me):d;delete $.serializers,se([$],nt,me,this._stdErrSerialize)}function sr(ht){this._childLevel=(ht._childLevel|0)+1,this.error=le(ht,$,"error"),this.fatal=le(ht,$,"fatal"),this.warn=le(ht,$,"warn"),this.info=le(ht,$,"info"),this.debug=le(ht,$,"debug"),this.trace=le(ht,$,"trace"),me&&(this.serializers=me,this._serialize=nt),Z&&(this._logEvent=xe([].concat(ht._logEvent.bindings,$)))}return sr.prototype=this,new sr(this)}return f}V.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},V.stdSerializers=m,V.stdTimeFunctions=Object.assign({},{nullTime:Se,epochTime:ie,unixTime:X,isoTime:oe});function he(F,Z,re,ye){const d=Object.getPrototypeOf(Z);Z[re]=Z.levelVal>Z.levels.values[re]?ke:d[re]?d[re]:ae[re]||ae[ye]||ke,Ie(F,Z,re)}function Ie(F,Z,re){!F.transmit&&Z[re]===ke||(Z[re]=function(ye){return function(){const b=F.timestamp(),l=new Array(arguments.length),p=Object.getPrototypeOf&&Object.getPrototypeOf(this)===ae?ae:this;for(var f=0;f<l.length;f++)l[f]=arguments[f];if(F.serialize&&!F.asObject&&se(l,this._serialize,this.serializers,this._stdErrSerialize),F.asObject?ye.call(p,te(this,re,l,b)):ye.apply(p,l),F.transmit){const _=F.transmit.level||Z.level,O=V.levels.values[_],C=V.levels.values[re];if(C<O)return;Re(this,{ts:b,methodLevel:re,methodValue:C,transmitLevel:_,transmitValue:V.levels.values[F.transmit.level||Z.level],send:F.transmit.send,val:Z.levelVal},l)}}}(Z[re]))}function te(F,Z,re,ye){F._serialize&&se(re,F._serialize,F.serializers,F._stdErrSerialize);const d=re.slice();let b=d[0];const l={};ye&&(l.time=ye),l.level=V.levels.values[Z];let p=(F._childLevel|0)+1;if(p<1&&(p=1),b!==null&&typeof b=="object"){for(;p--&&typeof d[0]=="object";)Object.assign(l,d.shift());b=d.length?B(d.shift(),d):void 0}else typeof b=="string"&&(b=B(d.shift(),d));return b!==void 0&&(l.msg=b),l}function se(F,Z,re,ye){for(const d in F)if(ye&&F[d]instanceof Error)F[d]=V.stdSerializers.err(F[d]);else if(typeof F[d]=="object"&&!Array.isArray(F[d]))for(const b in F[d])Z&&Z.indexOf(b)>-1&&b in re&&(F[d][b]=re[b](F[d][b]))}function le(F,Z,re){return function(){const ye=new Array(1+arguments.length);ye[0]=Z;for(var d=1;d<ye.length;d++)ye[d]=arguments[d-1];return F[re].apply(this,ye)}}function Re(F,Z,re){const ye=Z.send,d=Z.ts,b=Z.methodLevel,l=Z.methodValue,p=Z.val,f=F._logEvent.bindings;se(re,F._serialize||Object.keys(F.serializers),F.serializers,F._stdErrSerialize===void 0?!0:F._stdErrSerialize),F._logEvent.ts=d,F._logEvent.messages=re.filter(function(_){return f.indexOf(_)===-1}),F._logEvent.level.label=b,F._logEvent.level.value=l,ye(b,F._logEvent,p),F._logEvent=xe(f)}function xe(F){return{ts:0,messages:[],bindings:F||[],level:{label:"",value:0}}}function Te(F){const Z={type:F.constructor.name,msg:F.message,stack:F.stack};for(const re in F)Z[re]===void 0&&(Z[re]=F[re]);return Z}function ce(F){return typeof F.timestamp=="function"?F.timestamp:F.timestamp===!1?Se:ie}function He(){return{}}function tt(F){return F}function ke(){}function Se(){return!1}function ie(){return Date.now()}function X(){return Math.round(Date.now()/1e3)}function oe(){return new Date(Date.now()).toISOString()}function fe(){function F(Z){return typeof Z<"u"&&Z}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return F(self)||F(window)||F(this)||{}}}}}]);
